INFO:     Will watch for changes in these directories: ['/home/vancim/whats_agent']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [79577] using WatchFiles
INFO:     Started server process [79579]
INFO:     Waiting for application startup.
2025-08-08 14:07:47,804 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:07:47,805 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:07:47,823 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:07:47,823 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:07:47,823 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:07:47,823 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:07:47,824 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:07:47,824 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:07:47,824 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:07:47,824 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:07:47,825 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:07:47,825 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:07:47,825 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:07:47,825 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:07:47,825 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:47,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:47,827 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,827 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,828 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,828 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,829 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,829 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,829 INFO sqlalchemy.engine.Engine [cached since 0.00176s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,829 - sqlalchemy.engine.Engine - INFO - [cached since 0.00176s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine [cached since 0.002221s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.002221s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine [cached since 0.002624s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.002624s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,830 INFO sqlalchemy.engine.Engine [cached since 0.00298s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.00298s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine [cached since 0.003307s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - [cached since 0.003307s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine [cached since 0.003647s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - [cached since 0.003647s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,831 INFO sqlalchemy.engine.Engine [cached since 0.003924s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,831 - sqlalchemy.engine.Engine - INFO - [cached since 0.003924s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine [cached since 0.00419s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.00419s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine [cached since 0.004448s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.004448s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine [cached since 0.004703s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.004703s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,832 INFO sqlalchemy.engine.Engine [cached since 0.004953s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.004953s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine [cached since 0.005204s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.005204s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine [cached since 0.005446s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.005446s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine [cached since 0.005724s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.005724s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:07:47,833 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:47,833 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:47,834 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:07:47,834 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:07:47,834 - app.main - INFO - Cache service inicializado
2025-08-08 14:07:47,834 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:07:47,834 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     127.0.0.1:42288 - "GET /health HTTP/1.1" 200 OK
2025-08-08 14:07:48,670 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:48,670 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:48,673 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:48,673 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:48,673 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "454"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (158 characters truncated) ... "5511999111111", "id": "wamid.test_1754672868", "timestamp": "1754672868", "text": {"body": "Ol\\u00e1"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:07:48,673 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "454"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (158 characters truncated) ... "5511999111111", "id": "wamid.test_1754672868", "timestamp": "1754672868", "text": {"body": "Ol\\u00e1"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:07:48,675 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:48,675 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:48,676 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:48,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:48,677 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:07:48,677 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:07:48,677 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ('5511999111111',)
2025-08-08 14:07:48,677 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ('5511999111111',)
2025-08-08 14:07:48,679 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:07:48,679 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:07:48,679 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (52, 'active', 'human')
2025-08-08 14:07:48,679 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] (52, 'active', 'human')
2025-08-08 14:07:48,681 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:48,681 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:48,681 INFO sqlalchemy.engine.Engine [generated in 0.00012s] (52, 42, 'in', 'wamid.test_1754672868', 'Olá', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672868", "timestamp": "1754672868", "text": {"body": "Ol\\u00e1"}, "type": "text"}')
2025-08-08 14:07:48,681 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] (52, 42, 'in', 'wamid.test_1754672868', 'Olá', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672868", "timestamp": "1754672868", "text": {"body": "Ol\\u00e1"}, "type": "text"}')
2025-08-08 14:07:48,682 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:48,682 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:48,683 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:48,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:48,684 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:48,684 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:48,684 INFO sqlalchemy.engine.Engine [generated in 0.00010s] (627,)
2025-08-08 14:07:48,684 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (627,)
2025-08-08 14:07:48,685 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:48,685 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:48,686 INFO sqlalchemy.engine.Engine [generated in 0.00010s] (datetime.datetime(2025, 8, 8, 17, 7, 48, 685232), 42)
2025-08-08 14:07:48,686 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] (datetime.datetime(2025, 8, 8, 17, 7, 48, 685232), 42)
2025-08-08 14:07:48,686 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:48,686 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:48,687 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:48,687 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:48,688 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:07:48,688 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:07:48,688 INFO sqlalchemy.engine.Engine [generated in 0.00009s] (42, 10)
2025-08-08 14:07:48,688 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] (42, 10)
2025-08-08 14:07:48,689 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Olá' do usuário 5511999111111
2025-08-08 14:07:48,689 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:07:48,690 - app.services.lead_scoring - INFO - Lead scored: 5511999111111 - Score: 0.28 - Category: cold
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.28, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 0, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 2, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 0.0, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.56, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.0), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.28, confidence=0.56, category=LeadCategory.COLD, priority=1
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - INFO - Estratégia llm_only por simplicidade: words=1, score=0.28
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: llm_only para: Olá...
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - ERROR - Erro no processamento híbrido: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:07:48,690 - app.services.hybrid_llm_crew - ERROR - Erro no fallback: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:07:48,690 - app.routes.webhook - INFO - ✅ Processamento: error_fallback | Agente: unknown | Tempo: 0.00s
2025-08-08 14:07:48,690 - app.routes.webhook - INFO - 💬 Resposta gerada: Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!...
2025-08-08 14:07:48,690 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:07:49,377 - httpx - INFO - HTTP Request: POST https://graph.facebook.com/v18.0/728348237027885/messages "HTTP/1.1 400 Bad Request"
2025-08-08 14:07:49,398 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:49,398 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:49,399 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:49,399 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:49,399 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "ATI_6z-e-jFzkxuwkGrsO3O"}}')
2025-08-08 14:07:49,399 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "ATI_6z-e-jFzkxuwkGrsO3O"}}')
2025-08-08 14:07:49,400 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:49,400 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:49,401 - app.services.retry_handler - WARNING - Tentativa 1 falhou para whatsapp_api: Erro na API (400): {'error': {'message': '(#131030) Recipient phone number not in allowed list', 'type': 'OAuthException', 'code': 131030, 'error_data': {'messaging_product': 'whatsapp', 'details': 'O número de telefone do destinatário não está na lista de permissão: Adicione o telefone do destinatário à lista de destinatários e tente novamente.'}, 'fbtrace_id': 'ATI_6z-e-jFzkxuwkGrsO3O'}}
2025-08-08 14:07:49,401 - app.services.retry_handler - INFO - Aguardando 2.08s antes da próxima tentativa para whatsapp_api
2025-08-08 14:07:52,014 - httpx - INFO - HTTP Request: POST https://graph.facebook.com/v18.0/728348237027885/messages "HTTP/1.1 400 Bad Request"
2025-08-08 14:07:52,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:52,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:52,015 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:52,015 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:52,015 INFO sqlalchemy.engine.Engine [cached since 2.617s ago] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "A59dcPHFoaPIBq4kagvGgv3"}}')
2025-08-08 14:07:52,015 - sqlalchemy.engine.Engine - INFO - [cached since 2.617s ago] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "A59dcPHFoaPIBq4kagvGgv3"}}')
2025-08-08 14:07:52,016 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:52,016 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:52,026 - app.services.retry_handler - WARNING - Tentativa 2 falhou para whatsapp_api: Erro na API (400): {'error': {'message': '(#131030) Recipient phone number not in allowed list', 'type': 'OAuthException', 'code': 131030, 'error_data': {'messaging_product': 'whatsapp', 'details': 'O número de telefone do destinatário não está na lista de permissão: Adicione o telefone do destinatário à lista de destinatários e tente novamente.'}, 'fbtrace_id': 'A59dcPHFoaPIBq4kagvGgv3'}}
2025-08-08 14:07:52,026 - app.services.retry_handler - INFO - Aguardando 4.16s antes da próxima tentativa para whatsapp_api
2025-08-08 14:07:56,782 - httpx - INFO - HTTP Request: POST https://graph.facebook.com/v18.0/728348237027885/messages "HTTP/1.1 400 Bad Request"
2025-08-08 14:07:56,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:56,783 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:56,784 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:56,784 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload, response) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON, $7::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:56,784 INFO sqlalchemy.engine.Engine [cached since 7.385s ago] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "A9g7ZZHhFUP7gHyzm-Wu-5t"}}')
2025-08-08 14:07:56,784 - sqlalchemy.engine.Engine - INFO - [cached since 7.385s ago] ('out', 'https://graph.facebook.com/v18.0/728348237027885/messages', 'POST', 400, '{"Authorization": "Bearer EAAI4WnfpZAe0BPJp9fuZCud6LZArYrGU9K4TV4dwWrLXaDHZCODnU5DqQjZCyoyzhoBJtP8rzaRFNRhKiMGmiGLatt1KsZBcIkjXf7bwhZBWDrQF768UXO5Cfr ... (29 characters truncated) ... NDOZAxDEKL6cdIEmM6vrwZATkRncB9O0fdvHEaCAQsDr4a1wdR7Vie6EOBs6iuZC1cboSBssnoWlnYvNi3hzNGxWFSpZAg1iDRDuLWQxDigZDZD", "Content-Type": "application/json"}', '{"messaging_product": "whatsapp", "to": "5511999111111", "type": "text", "text": {"body": "Desculpe, estamos com problemas t\\u00e9cnicos. Nossa equipe foi notificada e resolveremos em breve!"}}', '{"error": {"message": "(#131030) Recipient phone number not in allowed list", "type": "OAuthException", "code": 131030, "error_data": {"messaging_pro ... (123 characters truncated) ... 00e3o: Adicione o telefone do destinat\\u00e1rio \\u00e0 lista de destinat\\u00e1rios e tente novamente."}, "fbtrace_id": "A9g7ZZHhFUP7gHyzm-Wu-5t"}}')
2025-08-08 14:07:56,784 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:56,784 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:56,785 - app.services.retry_handler - WARNING - Tentativa 3 falhou para whatsapp_api: Erro na API (400): {'error': {'message': '(#131030) Recipient phone number not in allowed list', 'type': 'OAuthException', 'code': 131030, 'error_data': {'messaging_product': 'whatsapp', 'details': 'O número de telefone do destinatário não está na lista de permissão: Adicione o telefone do destinatário à lista de destinatários e tente novamente.'}, 'fbtrace_id': 'A9g7ZZHhFUP7gHyzm-Wu-5t'}}
2025-08-08 14:07:56,785 - app.services.retry_handler - ERROR - Circuit breaker ABERTO para whatsapp_api após 3 falhas
2025-08-08 14:07:56,785 - app.services.retry_handler - ERROR - Todas as 4 tentativas falharam para whatsapp_api
2025-08-08 14:07:56,785 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999111111: Erro na API (400): {'error': {'message': '(#131030) Recipient phone number not in allowed list', 'type': 'OAuthException', 'code': 131030, 'error_data': {'messaging_product': 'whatsapp', 'details': 'O número de telefone do destinatário não está na lista de permissão: Adicione o telefone do destinatário à lista de destinatários e tente novamente.'}, 'fbtrace_id': 'A9g7ZZHhFUP7gHyzm-Wu-5t'}}
2025-08-08 14:07:56,785 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:56,785 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:56,785 INFO sqlalchemy.engine.Engine [cached since 8.105s ago] (52, 42, 'outbound', None, 'Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!', 'text', '{"metadata": {"processing_strategy": "error_fallback", "agent_used": "unknown", "hybrid_metadata": {}, "system_used": "hybrid_primary"}}')
2025-08-08 14:07:56,785 - sqlalchemy.engine.Engine - INFO - [cached since 8.105s ago] (52, 42, 'outbound', None, 'Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!', 'text', '{"metadata": {"processing_strategy": "error_fallback", "agent_used": "unknown", "hybrid_metadata": {}, "system_used": "hybrid_primary"}}')
2025-08-08 14:07:56,786 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:56,786 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:56,787 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:56,787 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:56,787 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:56,787 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:56,787 INFO sqlalchemy.engine.Engine [cached since 8.103s ago] (628,)
2025-08-08 14:07:56,787 - sqlalchemy.engine.Engine - INFO - [cached since 8.103s ago] (628,)
2025-08-08 14:07:56,789 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:56,789 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:56,789 INFO sqlalchemy.engine.Engine [cached since 8.103s ago] (datetime.datetime(2025, 8, 8, 17, 7, 56, 788789), 42)
2025-08-08 14:07:56,789 - sqlalchemy.engine.Engine - INFO - [cached since 8.103s ago] (datetime.datetime(2025, 8, 8, 17, 7, 56, 788789), 42)
2025-08-08 14:07:56,789 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:56,789 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:56,790 - app.routes.webhook - INFO - 💾 Resposta salva no cache para 5511999111111
2025-08-08 14:07:56,790 - app.routes.webhook - INFO - ✅ Resposta enviada e salva para 5511999111111
INFO:     127.0.0.1:42304 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:07:58,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:58,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:58,793 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:58,793 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:07:58,793 INFO sqlalchemy.engine.Engine [cached since 10.12s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "481"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... d.test_1754672878", "timestamp": "1754672878", "text": {"body": "Que servi\\u00e7os voc\\u00eas fazem?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:07:58,793 - sqlalchemy.engine.Engine - INFO - [cached since 10.12s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "481"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... d.test_1754672878", "timestamp": "1754672878", "text": {"body": "Que servi\\u00e7os voc\\u00eas fazem?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:07:58,794 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:58,794 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:58,804 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:58,804 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:58,805 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:07:58,805 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:07:58,805 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] ('5511999111111',)
2025-08-08 14:07:58,805 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] ('5511999111111',)
2025-08-08 14:07:58,806 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:07:58,806 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:07:58,806 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (52, 'active', 'human')
2025-08-08 14:07:58,806 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (52, 'active', 'human')
2025-08-08 14:07:58,807 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:58,807 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:58,807 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (52, 42, 'in', 'wamid.test_1754672878', 'Que serviços vocês fazem?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672878", "timestamp": "1754672878", "text": {"body": "Que servi\\u00e7os voc\\u00eas fazem?"}, "type": "text"}')
2025-08-08 14:07:58,807 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (52, 42, 'in', 'wamid.test_1754672878', 'Que serviços vocês fazem?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672878", "timestamp": "1754672878", "text": {"body": "Que servi\\u00e7os voc\\u00eas fazem?"}, "type": "text"}')
2025-08-08 14:07:58,808 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:58,808 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:58,809 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:58,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:58,809 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:58,809 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:58,809 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (629,)
2025-08-08 14:07:58,809 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (629,)
2025-08-08 14:07:58,810 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:58,810 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:58,810 INFO sqlalchemy.engine.Engine [cached since 10.12s ago] (datetime.datetime(2025, 8, 8, 17, 7, 58, 810210), 42)
2025-08-08 14:07:58,810 - sqlalchemy.engine.Engine - INFO - [cached since 10.12s ago] (datetime.datetime(2025, 8, 8, 17, 7, 58, 810210), 42)
2025-08-08 14:07:58,810 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:58,810 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:58,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:58,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:58,811 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:07:58,811 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:07:58,811 INFO sqlalchemy.engine.Engine [cached since 10.12s ago] (42, 10)
2025-08-08 14:07:58,811 - sqlalchemy.engine.Engine - INFO - [cached since 10.12s ago] (42, 10)
2025-08-08 14:07:58,812 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999111111: Que serviços vocês fazem?
2025-08-08 14:07:58,812 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999111111: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:07:58,813 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:58,813 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:07:58,813 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (52, 42, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:07:58,813 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (52, 42, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:07:58,813 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:58,813 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:58,814 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:07:58,814 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:07:58,814 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:58,814 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:07:58,814 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (630,)
2025-08-08 14:07:58,814 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (630,)
2025-08-08 14:07:58,815 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:58,815 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:07:58,815 INFO sqlalchemy.engine.Engine [cached since 10.13s ago] (datetime.datetime(2025, 8, 8, 17, 7, 58, 815457), 42)
2025-08-08 14:07:58,815 - sqlalchemy.engine.Engine - INFO - [cached since 10.13s ago] (datetime.datetime(2025, 8, 8, 17, 7, 58, 815457), 42)
2025-08-08 14:07:58,816 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:07:58,816 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:07:58,816 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999111111
INFO:     127.0.0.1:55328 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:00,819 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:00,819 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:00,819 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:00,819 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:00,819 INFO sqlalchemy.engine.Engine [cached since 12.15s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... .test_1754672880", "timestamp": "1754672880", "text": {"body": "Qual o pre\\u00e7o do corte masculino?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:00,819 - sqlalchemy.engine.Engine - INFO - [cached since 12.15s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... .test_1754672880", "timestamp": "1754672880", "text": {"body": "Qual o pre\\u00e7o do corte masculino?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:00,820 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:00,820 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:00,821 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:00,821 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:00,821 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:00,821 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:00,821 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] ('5511999111111',)
2025-08-08 14:08:00,821 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] ('5511999111111',)
2025-08-08 14:08:00,822 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:00,822 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:00,822 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] (52, 'active', 'human')
2025-08-08 14:08:00,822 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] (52, 'active', 'human')
2025-08-08 14:08:00,823 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:00,823 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:00,823 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] (52, 42, 'in', 'wamid.test_1754672880', 'Qual o preço do corte masculino?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672880", "timestamp": "1754672880", "text": {"body": "Qual o pre\\u00e7o do corte masculino?"}, "type": "text"}')
2025-08-08 14:08:00,823 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] (52, 42, 'in', 'wamid.test_1754672880', 'Qual o preço do corte masculino?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672880", "timestamp": "1754672880", "text": {"body": "Qual o pre\\u00e7o do corte masculino?"}, "type": "text"}')
2025-08-08 14:08:00,823 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:00,823 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:00,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:00,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:00,825 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:00,825 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:00,825 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] (631,)
2025-08-08 14:08:00,825 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] (631,)
2025-08-08 14:08:00,825 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:00,825 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:00,825 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] (datetime.datetime(2025, 8, 8, 17, 8, 0, 825601), 42)
2025-08-08 14:08:00,825 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] (datetime.datetime(2025, 8, 8, 17, 8, 0, 825601), 42)
2025-08-08 14:08:00,826 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:00,826 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:00,827 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:00,827 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:00,827 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:00,827 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:00,827 INFO sqlalchemy.engine.Engine [cached since 12.14s ago] (42, 10)
2025-08-08 14:08:00,827 - sqlalchemy.engine.Engine - INFO - [cached since 12.14s ago] (42, 10)
2025-08-08 14:08:00,828 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999111111: Qual o preço do corte masculino?
2025-08-08 14:08:00,828 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999111111: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:00,828 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:00,828 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:00,828 INFO sqlalchemy.engine.Engine [cached since 12.15s ago] (52, 42, 'out', None, '✅ **Corte Masculino** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:00,828 - sqlalchemy.engine.Engine - INFO - [cached since 12.15s ago] (52, 42, 'out', None, '✅ **Corte Masculino** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:00,828 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:00,828 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:00,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:00,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:00,830 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:00,830 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:00,830 INFO sqlalchemy.engine.Engine [cached since 12.15s ago] (632,)
2025-08-08 14:08:00,830 - sqlalchemy.engine.Engine - INFO - [cached since 12.15s ago] (632,)
2025-08-08 14:08:00,830 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:00,830 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:00,830 INFO sqlalchemy.engine.Engine [cached since 12.15s ago] (datetime.datetime(2025, 8, 8, 17, 8, 0, 830577), 42)
2025-08-08 14:08:00,830 - sqlalchemy.engine.Engine - INFO - [cached since 12.15s ago] (datetime.datetime(2025, 8, 8, 17, 8, 0, 830577), 42)
2025-08-08 14:08:00,831 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:00,831 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:00,831 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999111111
2025-08-08 14:08:00,831 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999111111
INFO:     127.0.0.1:55342 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:02,834 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:02,834 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:02,834 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:02,834 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:02,835 INFO sqlalchemy.engine.Engine [cached since 14.16s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... .test_1754672882", "timestamp": "1754672882", "text": {"body": "Voc\\u00eas funcionam no s\\u00e1bado?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:02,835 - sqlalchemy.engine.Engine - INFO - [cached since 14.16s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... .test_1754672882", "timestamp": "1754672882", "text": {"body": "Voc\\u00eas funcionam no s\\u00e1bado?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:02,835 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:02,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:02,846 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:02,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:02,846 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:02,846 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:02,846 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] ('5511999111111',)
2025-08-08 14:08:02,846 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] ('5511999111111',)
2025-08-08 14:08:02,847 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:02,847 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:02,847 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (52, 'active', 'human')
2025-08-08 14:08:02,847 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (52, 'active', 'human')
2025-08-08 14:08:02,848 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:02,848 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:02,848 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (52, 42, 'in', 'wamid.test_1754672882', 'Vocês funcionam no sábado?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672882", "timestamp": "1754672882", "text": {"body": "Voc\\u00eas funcionam no s\\u00e1bado?"}, "type": "text"}')
2025-08-08 14:08:02,848 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (52, 42, 'in', 'wamid.test_1754672882', 'Vocês funcionam no sábado?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672882", "timestamp": "1754672882", "text": {"body": "Voc\\u00eas funcionam no s\\u00e1bado?"}, "type": "text"}')
2025-08-08 14:08:02,851 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:02,851 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:02,852 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:02,852 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:02,853 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:02,853 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:02,853 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (633,)
2025-08-08 14:08:02,853 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (633,)
2025-08-08 14:08:02,853 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:02,853 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:02,853 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (datetime.datetime(2025, 8, 8, 17, 8, 2, 853607), 42)
2025-08-08 14:08:02,853 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (datetime.datetime(2025, 8, 8, 17, 8, 2, 853607), 42)
2025-08-08 14:08:02,854 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:02,854 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:02,855 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:02,855 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:02,855 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:02,855 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:02,855 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (42, 10)
2025-08-08 14:08:02,855 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (42, 10)
2025-08-08 14:08:02,855 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999111111: Vocês funcionam no sábado?
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Processing date selection for message: 'Vocês funcionam no sábado?'
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Date parsed successfully: 2025-08-09
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'vocês funcionam no sábado?'
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:08:02,856 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'vocês funcionam no sábado?'
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Time parsing result: 'None'
2025-08-08 14:08:02,857 - app.services.booking_workflow - INFO - DEBUG: Only date found - moving to time collection
2025-08-08 14:08:02,857 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999111111: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:02,857 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:02,857 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:02,857 INFO sqlalchemy.engine.Engine [cached since 14.18s ago] (52, 42, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:02,857 - sqlalchemy.engine.Engine - INFO - [cached since 14.18s ago] (52, 42, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:02,858 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:02,858 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:02,859 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:02,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:02,859 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:02,859 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:02,859 INFO sqlalchemy.engine.Engine [cached since 14.18s ago] (634,)
2025-08-08 14:08:02,859 - sqlalchemy.engine.Engine - INFO - [cached since 14.18s ago] (634,)
2025-08-08 14:08:02,860 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:02,860 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:02,860 INFO sqlalchemy.engine.Engine [cached since 14.17s ago] (datetime.datetime(2025, 8, 8, 17, 8, 2, 860089), 42)
2025-08-08 14:08:02,860 - sqlalchemy.engine.Engine - INFO - [cached since 14.17s ago] (datetime.datetime(2025, 8, 8, 17, 8, 2, 860089), 42)
2025-08-08 14:08:02,860 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:02,860 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:02,861 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999111111
INFO:     127.0.0.1:55350 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:04,864 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:04,864 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:04,864 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:04,864 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:04,864 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "465"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (168 characters truncated) ... 1111", "id": "wamid.test_1754672884", "timestamp": "1754672884", "text": {"body": "Como posso agendar?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:04,864 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "465"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (168 characters truncated) ... 1111", "id": "wamid.test_1754672884", "timestamp": "1754672884", "text": {"body": "Como posso agendar?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:04,865 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:04,865 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:04,866 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:04,866 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:04,866 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:04,866 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:04,866 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] ('5511999111111',)
2025-08-08 14:08:04,866 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] ('5511999111111',)
2025-08-08 14:08:04,867 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:04,867 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:04,867 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (52, 'active', 'human')
2025-08-08 14:08:04,867 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (52, 'active', 'human')
2025-08-08 14:08:04,868 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:04,868 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:04,868 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (52, 42, 'in', 'wamid.test_1754672884', 'Como posso agendar?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672884", "timestamp": "1754672884", "text": {"body": "Como posso agendar?"}, "type": "text"}')
2025-08-08 14:08:04,868 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (52, 42, 'in', 'wamid.test_1754672884', 'Como posso agendar?', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672884", "timestamp": "1754672884", "text": {"body": "Como posso agendar?"}, "type": "text"}')
2025-08-08 14:08:04,868 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:04,868 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:04,869 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:04,869 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:04,869 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:04,869 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:04,869 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (635,)
2025-08-08 14:08:04,869 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (635,)
2025-08-08 14:08:04,870 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:04,870 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:04,870 INFO sqlalchemy.engine.Engine [cached since 16.18s ago] (datetime.datetime(2025, 8, 8, 17, 8, 4, 870385), 42)
2025-08-08 14:08:04,870 - sqlalchemy.engine.Engine - INFO - [cached since 16.18s ago] (datetime.datetime(2025, 8, 8, 17, 8, 4, 870385), 42)
2025-08-08 14:08:04,871 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:04,871 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:04,872 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:04,872 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:04,872 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:04,872 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:04,872 INFO sqlalchemy.engine.Engine [cached since 16.18s ago] (42, 10)
2025-08-08 14:08:04,872 - sqlalchemy.engine.Engine - INFO - [cached since 16.18s ago] (42, 10)
2025-08-08 14:08:04,872 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999111111: Como posso agendar?
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'como posso agendar?'
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:08:04,872 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:08:04,873 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'como posso agendar?'
2025-08-08 14:08:04,873 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999111111: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:04,873 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:04,873 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:04,873 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (52, 42, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:04,873 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (52, 42, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:04,873 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:04,873 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:04,874 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:04,874 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:04,874 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:04,874 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:04,875 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (636,)
2025-08-08 14:08:04,875 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (636,)
2025-08-08 14:08:04,875 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:04,875 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:04,875 INFO sqlalchemy.engine.Engine [cached since 16.19s ago] (datetime.datetime(2025, 8, 8, 17, 8, 4, 875583), 42)
2025-08-08 14:08:04,875 - sqlalchemy.engine.Engine - INFO - [cached since 16.19s ago] (datetime.datetime(2025, 8, 8, 17, 8, 4, 875583), 42)
2025-08-08 14:08:04,876 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:04,876 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:04,876 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999111111
INFO:     127.0.0.1:55356 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:06,879 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:06,879 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:06,879 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:06,879 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:06,879 INFO sqlalchemy.engine.Engine [cached since 18.21s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... test_1754672886", "timestamp": "1754672886", "text": {"body": "Obrigado pelas informa\\u00e7\\u00f5es!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:06,879 - sqlalchemy.engine.Engine - INFO - [cached since 18.21s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... test_1754672886", "timestamp": "1754672886", "text": {"body": "Obrigado pelas informa\\u00e7\\u00f5es!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:06,880 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:06,880 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:06,881 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:06,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:06,881 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:06,881 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:06,881 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] ('5511999111111',)
2025-08-08 14:08:06,881 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] ('5511999111111',)
2025-08-08 14:08:06,882 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:06,882 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:06,882 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] (52, 'active', 'human')
2025-08-08 14:08:06,882 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] (52, 'active', 'human')
2025-08-08 14:08:06,883 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:06,883 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:06,883 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] (52, 42, 'in', 'wamid.test_1754672886', 'Obrigado pelas informações!', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672886", "timestamp": "1754672886", "text": {"body": "Obrigado pelas informa\\u00e7\\u00f5es!"}, "type": "text"}')
2025-08-08 14:08:06,883 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] (52, 42, 'in', 'wamid.test_1754672886', 'Obrigado pelas informações!', 'text', '{"from": "5511999111111", "id": "wamid.test_1754672886", "timestamp": "1754672886", "text": {"body": "Obrigado pelas informa\\u00e7\\u00f5es!"}, "type": "text"}')
2025-08-08 14:08:06,883 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:06,883 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:06,884 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:06,884 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:06,884 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:06,884 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:06,884 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] (637,)
2025-08-08 14:08:06,884 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] (637,)
2025-08-08 14:08:06,885 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:06,885 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:06,885 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] (datetime.datetime(2025, 8, 8, 17, 8, 6, 885371), 42)
2025-08-08 14:08:06,885 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] (datetime.datetime(2025, 8, 8, 17, 8, 6, 885371), 42)
2025-08-08 14:08:06,886 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:06,886 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:06,887 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:06,887 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:06,887 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:06,887 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:06,887 INFO sqlalchemy.engine.Engine [cached since 18.2s ago] (42, 10)
2025-08-08 14:08:06,887 - sqlalchemy.engine.Engine - INFO - [cached since 18.2s ago] (42, 10)
2025-08-08 14:08:06,887 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999111111: Obrigado pelas informações!
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'obrigado pelas informações!'
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:06,887 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:06,888 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:08:06,888 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:08:06,888 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'obrigado pelas informações!'
2025-08-08 14:08:06,888 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999111111: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:06,888 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:06,888 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:06,888 INFO sqlalchemy.engine.Engine [cached since 18.21s ago] (52, 42, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:06,888 - sqlalchemy.engine.Engine - INFO - [cached since 18.21s ago] (52, 42, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:06,888 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:06,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:06,889 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:06,889 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:06,890 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:06,890 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:06,890 INFO sqlalchemy.engine.Engine [cached since 18.21s ago] (638,)
2025-08-08 14:08:06,890 - sqlalchemy.engine.Engine - INFO - [cached since 18.21s ago] (638,)
2025-08-08 14:08:06,890 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:06,890 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:06,890 INFO sqlalchemy.engine.Engine [cached since 18.21s ago] (datetime.datetime(2025, 8, 8, 17, 8, 6, 890688), 42)
2025-08-08 14:08:06,890 - sqlalchemy.engine.Engine - INFO - [cached since 18.21s ago] (datetime.datetime(2025, 8, 8, 17, 8, 6, 890688), 42)
2025-08-08 14:08:06,891 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:06,891 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:06,891 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999111111
INFO:     127.0.0.1:58164 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:14,899 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:14,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:14,900 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:14,900 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:14,900 INFO sqlalchemy.engine.Engine [cached since 26.23s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "474"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (177 characters truncated) ... amid.test_1754672894", "timestamp": "1754672894", "text": {"body": "Oi, quero agendar um hor\\u00e1rio"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:14,900 - sqlalchemy.engine.Engine - INFO - [cached since 26.23s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "474"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (177 characters truncated) ... amid.test_1754672894", "timestamp": "1754672894", "text": {"body": "Oi, quero agendar um hor\\u00e1rio"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:14,900 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:14,900 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:14,901 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:14,901 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:14,901 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:14,901 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:14,901 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] ('5511999222222',)
2025-08-08 14:08:14,901 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] ('5511999222222',)
2025-08-08 14:08:14,902 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:14,902 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:14,902 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (53, 'active', 'human')
2025-08-08 14:08:14,902 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (53, 'active', 'human')
2025-08-08 14:08:14,903 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:14,903 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:14,903 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (53, 43, 'in', 'wamid.test_1754672894', 'Oi, quero agendar um horário', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672894", "timestamp": "1754672894", "text": {"body": "Oi, quero agendar um hor\\u00e1rio"}, "type": "text"}')
2025-08-08 14:08:14,903 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (53, 43, 'in', 'wamid.test_1754672894', 'Oi, quero agendar um horário', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672894", "timestamp": "1754672894", "text": {"body": "Oi, quero agendar um hor\\u00e1rio"}, "type": "text"}')
2025-08-08 14:08:14,903 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:14,903 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:14,904 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:14,904 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:14,905 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:14,905 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:14,905 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (639,)
2025-08-08 14:08:14,905 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (639,)
2025-08-08 14:08:14,905 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:14,905 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:14,905 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (datetime.datetime(2025, 8, 8, 17, 8, 14, 905629), 43)
2025-08-08 14:08:14,905 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (datetime.datetime(2025, 8, 8, 17, 8, 14, 905629), 43)
2025-08-08 14:08:14,906 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:14,906 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:14,907 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:14,907 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:14,907 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:14,907 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:14,907 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (43, 10)
2025-08-08 14:08:14,907 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (43, 10)
2025-08-08 14:08:14,907 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999222222: Oi, quero agendar um horário
2025-08-08 14:08:14,908 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999222222: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:14,908 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:14,908 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:14,908 INFO sqlalchemy.engine.Engine [cached since 26.23s ago] (53, 43, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:14,908 - sqlalchemy.engine.Engine - INFO - [cached since 26.23s ago] (53, 43, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:14,908 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:14,908 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:14,909 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:14,909 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:14,909 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:14,909 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:14,910 INFO sqlalchemy.engine.Engine [cached since 26.23s ago] (640,)
2025-08-08 14:08:14,910 - sqlalchemy.engine.Engine - INFO - [cached since 26.23s ago] (640,)
2025-08-08 14:08:14,910 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:14,910 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:14,910 INFO sqlalchemy.engine.Engine [cached since 26.22s ago] (datetime.datetime(2025, 8, 8, 17, 8, 14, 910459), 43)
2025-08-08 14:08:14,910 - sqlalchemy.engine.Engine - INFO - [cached since 26.22s ago] (datetime.datetime(2025, 8, 8, 17, 8, 14, 910459), 43)
2025-08-08 14:08:14,911 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:14,911 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:14,911 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999222222
INFO:     127.0.0.1:58170 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:17,914 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:17,914 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:17,914 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:17,914 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:17,914 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "456"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (158 characters truncated) ... 99222222", "id": "wamid.test_1754672897", "timestamp": "1754672897", "text": {"body": "Corte masculino"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:17,914 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "456"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (158 characters truncated) ... 99222222", "id": "wamid.test_1754672897", "timestamp": "1754672897", "text": {"body": "Corte masculino"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:17,915 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:17,915 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:17,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:17,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:17,916 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:17,916 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:17,916 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] ('5511999222222',)
2025-08-08 14:08:17,916 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] ('5511999222222',)
2025-08-08 14:08:17,917 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:17,917 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:17,917 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (53, 'active', 'human')
2025-08-08 14:08:17,917 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (53, 'active', 'human')
2025-08-08 14:08:17,917 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:17,917 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:17,917 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (53, 43, 'in', 'wamid.test_1754672897', 'Corte masculino', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672897", "timestamp": "1754672897", "text": {"body": "Corte masculino"}, "type": "text"}')
2025-08-08 14:08:17,917 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (53, 43, 'in', 'wamid.test_1754672897', 'Corte masculino', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672897", "timestamp": "1754672897", "text": {"body": "Corte masculino"}, "type": "text"}')
2025-08-08 14:08:17,918 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:17,918 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:17,919 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:17,919 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:17,919 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:17,919 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:17,919 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (641,)
2025-08-08 14:08:17,919 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (641,)
2025-08-08 14:08:17,920 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:17,920 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:17,920 INFO sqlalchemy.engine.Engine [cached since 29.23s ago] (datetime.datetime(2025, 8, 8, 17, 8, 17, 919841), 43)
2025-08-08 14:08:17,920 - sqlalchemy.engine.Engine - INFO - [cached since 29.23s ago] (datetime.datetime(2025, 8, 8, 17, 8, 17, 919841), 43)
2025-08-08 14:08:17,920 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:17,920 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:17,921 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:17,921 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:17,921 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:17,921 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:17,921 INFO sqlalchemy.engine.Engine [cached since 29.23s ago] (43, 10)
2025-08-08 14:08:17,921 - sqlalchemy.engine.Engine - INFO - [cached since 29.23s ago] (43, 10)
2025-08-08 14:08:17,922 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999222222: Corte masculino
2025-08-08 14:08:17,922 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999222222: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:17,922 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:17,922 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:17,922 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (53, 43, 'out', None, '✅ **Corte Masculino** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:17,922 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (53, 43, 'out', None, '✅ **Corte Masculino** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:17,923 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:17,923 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:17,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:17,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:17,924 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:17,924 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:17,924 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (642,)
2025-08-08 14:08:17,924 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (642,)
2025-08-08 14:08:17,924 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:17,924 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:17,924 INFO sqlalchemy.engine.Engine [cached since 29.24s ago] (datetime.datetime(2025, 8, 8, 17, 8, 17, 924535), 43)
2025-08-08 14:08:17,924 - sqlalchemy.engine.Engine - INFO - [cached since 29.24s ago] (datetime.datetime(2025, 8, 8, 17, 8, 17, 924535), 43)
2025-08-08 14:08:17,925 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:17,925 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:17,925 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999222222
2025-08-08 14:08:17,925 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999222222
INFO:     127.0.0.1:54860 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:20,928 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:20,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:20,928 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:20,928 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:20,928 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... 754672900", "timestamp": "1754672900", "text": {"body": "Amanh\\u00e3 de manh\\u00e3 se poss\\u00edvel"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:20,928 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... 754672900", "timestamp": "1754672900", "text": {"body": "Amanh\\u00e3 de manh\\u00e3 se poss\\u00edvel"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:20,929 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:20,929 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:20,940 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:20,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:20,940 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:20,940 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:20,940 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] ('5511999222222',)
2025-08-08 14:08:20,940 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] ('5511999222222',)
2025-08-08 14:08:20,941 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:20,941 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:20,941 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (53, 'active', 'human')
2025-08-08 14:08:20,941 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (53, 'active', 'human')
2025-08-08 14:08:20,941 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:20,941 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:20,941 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (53, 43, 'in', 'wamid.test_1754672900', 'Amanhã de manhã se possível', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672900", "timestamp": "1754672900", "text": {"body": "Amanh\\u00e3 de manh\\u00e3 se poss\\u00edvel"}, "type": "text"}')
2025-08-08 14:08:20,941 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (53, 43, 'in', 'wamid.test_1754672900', 'Amanhã de manhã se possível', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672900", "timestamp": "1754672900", "text": {"body": "Amanh\\u00e3 de manh\\u00e3 se poss\\u00edvel"}, "type": "text"}')
2025-08-08 14:08:20,942 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:20,942 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:20,943 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:20,943 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:20,943 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:20,943 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:20,943 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (643,)
2025-08-08 14:08:20,943 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (643,)
2025-08-08 14:08:20,944 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:20,944 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:20,944 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (datetime.datetime(2025, 8, 8, 17, 8, 20, 943881), 43)
2025-08-08 14:08:20,944 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (datetime.datetime(2025, 8, 8, 17, 8, 20, 943881), 43)
2025-08-08 14:08:20,944 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:20,944 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:20,945 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:20,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:20,945 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:20,945 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:20,945 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (43, 10)
2025-08-08 14:08:20,945 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (43, 10)
2025-08-08 14:08:20,946 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999222222: Amanhã de manhã se possível
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Processing date selection for message: 'Amanhã de manhã se possível'
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Date parsed successfully: 2025-08-09
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'amanhã de manhã se possível'
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'amanhã de manhã se possível'
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Time parsing result: 'None'
2025-08-08 14:08:20,946 - app.services.booking_workflow - INFO - DEBUG: Only date found - moving to time collection
2025-08-08 14:08:20,946 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999222222: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:20,946 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:20,946 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:20,946 INFO sqlalchemy.engine.Engine [cached since 32.27s ago] (53, 43, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:20,946 - sqlalchemy.engine.Engine - INFO - [cached since 32.27s ago] (53, 43, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:20,947 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:20,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:20,948 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:20,948 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:20,948 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:20,948 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:20,948 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (644,)
2025-08-08 14:08:20,948 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (644,)
2025-08-08 14:08:20,949 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:20,949 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:20,949 INFO sqlalchemy.engine.Engine [cached since 32.26s ago] (datetime.datetime(2025, 8, 8, 17, 8, 20, 948790), 43)
2025-08-08 14:08:20,949 - sqlalchemy.engine.Engine - INFO - [cached since 32.26s ago] (datetime.datetime(2025, 8, 8, 17, 8, 20, 948790), 43)
2025-08-08 14:08:20,949 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:20,949 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:20,949 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999222222
INFO:     127.0.0.1:54862 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:23,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:23,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:23,953 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:23,953 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:23,953 INFO sqlalchemy.engine.Engine [cached since 35.28s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "458"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (161 characters truncated) ... 22222", "id": "wamid.test_1754672903", "timestamp": "1754672903", "text": {"body": "10h est\\u00e1 bom"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:23,953 - sqlalchemy.engine.Engine - INFO - [cached since 35.28s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "458"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (161 characters truncated) ... 22222", "id": "wamid.test_1754672903", "timestamp": "1754672903", "text": {"body": "10h est\\u00e1 bom"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:23,953 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:23,953 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:23,964 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:23,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:23,964 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:23,964 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:23,964 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] ('5511999222222',)
2025-08-08 14:08:23,964 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] ('5511999222222',)
2025-08-08 14:08:23,965 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:23,965 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:23,965 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] (53, 'active', 'human')
2025-08-08 14:08:23,965 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] (53, 'active', 'human')
2025-08-08 14:08:23,966 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:23,966 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:23,966 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] (53, 43, 'in', 'wamid.test_1754672903', '10h está bom', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672903", "timestamp": "1754672903", "text": {"body": "10h est\\u00e1 bom"}, "type": "text"}')
2025-08-08 14:08:23,966 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] (53, 43, 'in', 'wamid.test_1754672903', '10h está bom', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672903", "timestamp": "1754672903", "text": {"body": "10h est\\u00e1 bom"}, "type": "text"}')
2025-08-08 14:08:23,967 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:23,967 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:23,968 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:23,968 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:23,968 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:23,968 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:23,968 INFO sqlalchemy.engine.Engine [cached since 35.28s ago] (645,)
2025-08-08 14:08:23,968 - sqlalchemy.engine.Engine - INFO - [cached since 35.28s ago] (645,)
2025-08-08 14:08:23,969 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:23,969 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:23,969 INFO sqlalchemy.engine.Engine [cached since 35.28s ago] (datetime.datetime(2025, 8, 8, 17, 8, 23, 968820), 43)
2025-08-08 14:08:23,969 - sqlalchemy.engine.Engine - INFO - [cached since 35.28s ago] (datetime.datetime(2025, 8, 8, 17, 8, 23, 968820), 43)
2025-08-08 14:08:23,969 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:23,969 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:23,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:23,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:23,970 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:23,970 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:23,970 INFO sqlalchemy.engine.Engine [cached since 35.28s ago] (43, 10)
2025-08-08 14:08:23,970 - sqlalchemy.engine.Engine - INFO - [cached since 35.28s ago] (43, 10)
2025-08-08 14:08:23,971 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999222222: 10h está bom
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: '10h está bom'
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: ('10', None)
2025-08-08 14:08:23,971 - app.services.booking_workflow - INFO - DEBUG: Time parsing successful: '10:00' from pattern 10
2025-08-08 14:08:23,971 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999222222: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:23,972 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:23,972 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:23,972 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] (53, 43, 'out', None, '✅ **Horário confirmado!**\n\n👤 **Qual é o seu nome completo?**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:23,972 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] (53, 43, 'out', None, '✅ **Horário confirmado!**\n\n👤 **Qual é o seu nome completo?**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:23,972 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:23,972 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:23,973 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:23,973 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:23,973 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:23,973 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:23,973 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] (646,)
2025-08-08 14:08:23,973 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] (646,)
2025-08-08 14:08:23,974 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:23,974 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:23,974 INFO sqlalchemy.engine.Engine [cached since 35.29s ago] (datetime.datetime(2025, 8, 8, 17, 8, 23, 974254), 43)
2025-08-08 14:08:23,974 - sqlalchemy.engine.Engine - INFO - [cached since 35.29s ago] (datetime.datetime(2025, 8, 8, 17, 8, 23, 974254), 43)
2025-08-08 14:08:23,974 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:23,974 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:23,975 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999222222
2025-08-08 14:08:23,975 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999222222
INFO:     127.0.0.1:54874 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:26,978 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:26,978 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:26,978 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:26,978 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:26,978 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "454"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (156 characters truncated) ... 1999222222", "id": "wamid.test_1754672906", "timestamp": "1754672906", "text": {"body": "Sim, confirmo"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:26,978 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "454"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (156 characters truncated) ... 1999222222", "id": "wamid.test_1754672906", "timestamp": "1754672906", "text": {"body": "Sim, confirmo"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:26,979 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:26,979 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:26,989 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:26,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:26,990 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:26,990 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:26,990 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] ('5511999222222',)
2025-08-08 14:08:26,990 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] ('5511999222222',)
2025-08-08 14:08:26,991 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:26,991 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:26,991 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (53, 'active', 'human')
2025-08-08 14:08:26,991 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (53, 'active', 'human')
2025-08-08 14:08:26,991 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:26,991 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:26,991 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (53, 43, 'in', 'wamid.test_1754672906', 'Sim, confirmo', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672906", "timestamp": "1754672906", "text": {"body": "Sim, confirmo"}, "type": "text"}')
2025-08-08 14:08:26,991 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (53, 43, 'in', 'wamid.test_1754672906', 'Sim, confirmo', 'text', '{"from": "5511999222222", "id": "wamid.test_1754672906", "timestamp": "1754672906", "text": {"body": "Sim, confirmo"}, "type": "text"}')
2025-08-08 14:08:26,992 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:26,992 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:26,993 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:26,993 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:26,993 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:26,993 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:26,993 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (647,)
2025-08-08 14:08:26,993 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (647,)
2025-08-08 14:08:26,994 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:26,994 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:26,994 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (datetime.datetime(2025, 8, 8, 17, 8, 26, 994053), 43)
2025-08-08 14:08:26,994 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (datetime.datetime(2025, 8, 8, 17, 8, 26, 994053), 43)
2025-08-08 14:08:26,994 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:26,994 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:26,995 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:26,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:26,995 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:26,995 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:26,995 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (43, 10)
2025-08-08 14:08:26,995 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (43, 10)
2025-08-08 14:08:26,996 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999222222: Sim, confirmo
2025-08-08 14:08:26,996 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999222222: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:26,997 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:26,997 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:26,997 INFO sqlalchemy.engine.Engine [cached since 38.32s ago] (53, 43, 'out', None, '❌ Nome deve conter apenas letras. Por favor, digite novamente.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:26,997 - sqlalchemy.engine.Engine - INFO - [cached since 38.32s ago] (53, 43, 'out', None, '❌ Nome deve conter apenas letras. Por favor, digite novamente.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:26,997 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:26,997 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:26,998 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:26,998 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:26,998 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:26,998 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:26,998 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (648,)
2025-08-08 14:08:26,998 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (648,)
2025-08-08 14:08:26,999 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:26,999 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:26,999 INFO sqlalchemy.engine.Engine [cached since 38.31s ago] (datetime.datetime(2025, 8, 8, 17, 8, 26, 999272), 43)
2025-08-08 14:08:26,999 - sqlalchemy.engine.Engine - INFO - [cached since 38.31s ago] (datetime.datetime(2025, 8, 8, 17, 8, 26, 999272), 43)
2025-08-08 14:08:26,999 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:26,999 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:27,000 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999222222
2025-08-08 14:08:27,000 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999222222
INFO:     127.0.0.1:55426 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:39,007 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:39,007 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:39,007 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:39,007 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:39,008 INFO sqlalchemy.engine.Engine [cached since 50.33s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "488"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (193 characters truncated) ... 72919", "timestamp": "1754672919", "text": {"body": "Ol\\u00e1, quero fazer uma reclama\\u00e7\\u00e3o"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:39,008 - sqlalchemy.engine.Engine - INFO - [cached since 50.33s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "488"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (193 characters truncated) ... 72919", "timestamp": "1754672919", "text": {"body": "Ol\\u00e1, quero fazer uma reclama\\u00e7\\u00e3o"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:39,008 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:39,008 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:39,019 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:39,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:39,019 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:39,019 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:39,019 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] ('5511999333333',)
2025-08-08 14:08:39,019 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] ('5511999333333',)
2025-08-08 14:08:39,020 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:39,020 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:39,020 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] (54, 'active', 'human')
2025-08-08 14:08:39,020 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] (54, 'active', 'human')
2025-08-08 14:08:39,021 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:39,021 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:39,021 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] (54, 44, 'in', 'wamid.test_1754672919', 'Olá, quero fazer uma reclamação', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672919", "timestamp": "1754672919", "text": {"body": "Ol\\u00e1, quero fazer uma reclama\\u00e7\\u00e3o"}, "type": "text"}')
2025-08-08 14:08:39,021 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] (54, 44, 'in', 'wamid.test_1754672919', 'Olá, quero fazer uma reclamação', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672919", "timestamp": "1754672919", "text": {"body": "Ol\\u00e1, quero fazer uma reclama\\u00e7\\u00e3o"}, "type": "text"}')
2025-08-08 14:08:39,021 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:39,021 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:39,022 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:39,022 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:39,022 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:39,022 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:39,022 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] (649,)
2025-08-08 14:08:39,022 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] (649,)
2025-08-08 14:08:39,023 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:39,023 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:39,023 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] (datetime.datetime(2025, 8, 8, 17, 8, 39, 23405), 44)
2025-08-08 14:08:39,023 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] (datetime.datetime(2025, 8, 8, 17, 8, 39, 23405), 44)
2025-08-08 14:08:39,024 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:39,024 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:39,025 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:39,025 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:39,025 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:39,025 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:39,025 INFO sqlalchemy.engine.Engine [cached since 50.34s ago] (44, 10)
2025-08-08 14:08:39,025 - sqlalchemy.engine.Engine - INFO - [cached since 50.34s ago] (44, 10)
2025-08-08 14:08:39,025 - app.services.intelligent_handoff - INFO - 🎯 Handoff detectado: complaint_detection para usuário 5511999333333
2025-08-08 14:08:39,025 - app.services.intelligent_handoff - ERROR - Erro na análise de handoff: 'complaint_detection' is not a valid HandoffReason
2025-08-08 14:08:39,025 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Olá, quero fazer uma reclamação' do usuário 5511999333333
2025-08-08 14:08:39,025 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:08:39,026 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:08:39,026 - app.services.lead_scoring - INFO - Lead scored: 5511999333333 - Score: 0.36 - Category: cold
2025-08-08 14:08:39,026 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.36, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 0, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 2, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 1.5, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.64, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.0), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:08:39,026 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.36, confidence=0.64, category=LeadCategory.COLD, priority=1
2025-08-08 14:08:39,026 - app.services.hybrid_llm_crew - INFO - Estratégia hybrid por complexidade e score baixo: 0.36
2025-08-08 14:08:39,026 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: hybrid para: Olá, quero fazer uma reclamação...
2025-08-08 14:08:39,026 - app.services.conversation_flow - INFO - Flow decision for 5511999333333: natural_progression → support
2025-08-08 14:08:39,026 - app.services.lead_scoring - INFO - Lead scored: 5511999333333 - Score: 0.52 - Category: cold
╭────────────────────────────────────────────────────── 🤖 Agent Started ───────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Especialista em Suporte Técnico                                                                                       │
│                                                                                                                               │
│  Task:                                                                                                                        │
│                                                                                                                               │
│          Mensagem do cliente: "Olá, quero fazer uma reclamação"                                                               │
│          Telefone: 5511999333333                                                                                              │
│          Intenção detectada: suporte                                                                                          │
│          Contexto adicional: {'user_id': '5511999333333', 'analysis': {'llm_response': None, 'intent': None, 'confidence':    │
│  0.0, 'conversation_state': 'unknown', 'context_available': False, 'message_complexity': 'medium', 'customer_value':          │
│  'standard'}, 'timestamp': '2025-08-08T14:08:39.026314'}                                                                      │
│                                                                                                                               │
│          INFORMAÇÕES DO LEAD:                                                                                                 │
│          - Score: 0.52/100 (COLD)                                                                                             │
│          - Prioridade: 1/5                                                                                                    │
│          - Valor Estimado: R$ 50.00                                                                                           │
│          - Probabilidade de Conversão: 1.0%                                                                                   │
│          - Recomendações: 📚 Educar sobre benefícios, 🔄 Follow-up semanal                                                    │
│                                                                                                                               │
│                                                                                                                               │
│          CONTEXTO DA CONVERSA:                                                                                                │
│          - Estado da Conversa: SUPPORT                                                                                        │
│          - Tipo de Transição: natural_progression                                                                             │
│          - Confiança: 77.5%                                                                                                   │
│          - Tópicos Ativos: support, greeting                                                                                  │
│          - Instruções Especiais: Primary topic detected: Suporte (confidence: 0.25). Additional topics: Cumprimentos.         │
│  Following natural conversation flow. Current state: greeting → Next state: support                                           │
│                                                                                                                               │
│                                                                                                                               │
│                                                                                                                               │
│              Como especialista em suporte contextual:                                                                         │
│                                                                                                                               │
│              🔧 MODO SUPORTE: Cliente precisa de ajuda ou tem problema.                                                       │
│  💡 SUGESTÃO: Estou aqui para te ajudar! Vamos resolver isso juntos.                                                          │
│                                                                                                                               │
│              SUAS RESPONSABILIDADES:                                                                                          │
│              1. Entender o problema no contexto da conversa completa                                                          │
│              2. Reconhecer se é novo problema ou continuação                                                                  │
│              3. Ser empático com mudanças de humor/contexto                                                                   │
│              4. Resolver de forma natural e conversacional                                                                    │
│                                                                                                                               │
│                                                                                                                               │
│              💙 LEAD FRIO: Cultive o relacionamento                                                                           │
│              - Seja educativo e informativo                                                                                   │
│              - Construa confiança gradualmente                                                                                │
│              - Não pressione por vendas                                                                                       │
│              - Ofereça valor através de informações                                                                           │
│                                                                                                                               │
│                                                                                                                               │
│              ABORDAGEM: Resolver problemas considerando todo o contexto conversacional.                                       │
│                                                                                                                               │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

[92m14:08:39 - LiteLLM:INFO[0m: utils.py:3224 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:08:39,050 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:08:43,139 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m14:08:43 - LiteLLM:INFO[0m: utils.py:1236 - Wrapper: Completed Call, calling success_handler
2025-08-08 14:08:43,156 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
╭──────────────────────────────────────────────────── ✅ Agent Final Answer ────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Especialista em Suporte Técnico                                                                                       │
│                                                                                                                               │
│  Final Answer:                                                                                                                │
│  Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente que você esteja         │
│  enfrentando. Estou aqui para ajudar e gostaria de entender melhor a sua reclamação.                                          │
│                                                                                                                               │
│  Você poderia compartilhar comigo mais detalhes sobre o que aconteceu? Isso nos ajudará a resolver sua situação da melhor     │
│  forma possível. Estou à disposição para ouvir as suas preocupações e garantir que você se sinta satisfeito com o nosso       │
│  suporte.                                                                                                                     │
│                                                                                                                               │
│  Por favor, sinta-se à vontade para explicar. Estou aqui para ajudar!                                                         │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

2025-08-08 14:08:43,172 - app.routes.webhook - INFO - ✅ Processamento: hybrid | Agente: support | Tempo: 4.15s
2025-08-08 14:08:43,172 - app.routes.webhook - INFO - 💬 Resposta gerada: Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente...
2025-08-08 14:08:43,172 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:08:43,172 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999333333: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:43,173 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:08:43,173 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:08:43,173 - app.routes.webhook - ERROR - ❌ Erro no sistema híbrido principal: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 54, 'content': 'Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente que você esteja enfre ... (1459 characters truncated) ... ['support', 'greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 44, 'direction': 'outbound', 'message_id': None}]]
2025-08-08 14:08:43,180 - app.routes.webhook - ERROR - Traceback: Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type LeadCategory is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/routes/webhook.py", line 678, in _process_and_respond
    await MessageService.create_message(
    ...<12 lines>...
    )
  File "/home/vancim/whats_agent/app/services/data.py", line 197, in create_message
    await db.commit()
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1818, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 54, 'content': 'Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente que você esteja enfre ... (1459 characters truncated) ... ['support', 'greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 44, 'direction': 'outbound', 'message_id': None}]]

2025-08-08 14:08:43,180 - app.routes.webhook - ERROR - Erro no sistema dinâmico integrado: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 54, 'content': 'Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente que você esteja enfre ... (1459 characters truncated) ... ['support', 'greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 44, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-08-08 14:08:43,180 - app.routes.webhook - ERROR - Erro ao processar mensagem individual: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 54, 'content': 'Olá! Primeiro, gostaria de agradecer por entrar em contato e me desculpar por qualquer inconveniente que você esteja enfre ... (1459 characters truncated) ... ['support', 'greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 44, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:     127.0.0.1:52768 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:45,183 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:45,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:45,183 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:45,183 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:45,184 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "486"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (189 characters truncated) ... 754672925", "timestamp": "1754672925", "text": {"body": "Voc\\u00eas cortaram meu cabelo errado ontem!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:45,184 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "486"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (189 characters truncated) ... 754672925", "timestamp": "1754672925", "text": {"body": "Voc\\u00eas cortaram meu cabelo errado ontem!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:45,184 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:45,184 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:45,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:45,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:45,185 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:45,185 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:45,185 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] ('5511999333333',)
2025-08-08 14:08:45,185 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] ('5511999333333',)
2025-08-08 14:08:45,186 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:45,186 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:45,186 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] (54, 'active', 'human')
2025-08-08 14:08:45,186 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] (54, 'active', 'human')
2025-08-08 14:08:45,186 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:45,186 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:45,187 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] (54, 44, 'in', 'wamid.test_1754672925', 'Vocês cortaram meu cabelo errado ontem!', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672925", "timestamp": "1754672925", "text": {"body": "Voc\\u00eas cortaram meu cabelo errado ontem!"}, "type": "text"}')
2025-08-08 14:08:45,187 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] (54, 44, 'in', 'wamid.test_1754672925', 'Vocês cortaram meu cabelo errado ontem!', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672925", "timestamp": "1754672925", "text": {"body": "Voc\\u00eas cortaram meu cabelo errado ontem!"}, "type": "text"}')
2025-08-08 14:08:45,187 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:45,187 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:45,188 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:45,188 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:45,188 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:45,188 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:45,188 INFO sqlalchemy.engine.Engine [cached since 56.5s ago] (650,)
2025-08-08 14:08:45,188 - sqlalchemy.engine.Engine - INFO - [cached since 56.5s ago] (650,)
2025-08-08 14:08:45,189 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:45,189 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:45,189 INFO sqlalchemy.engine.Engine [cached since 56.5s ago] (datetime.datetime(2025, 8, 8, 17, 8, 45, 189218), 44)
2025-08-08 14:08:45,189 - sqlalchemy.engine.Engine - INFO - [cached since 56.5s ago] (datetime.datetime(2025, 8, 8, 17, 8, 45, 189218), 44)
2025-08-08 14:08:45,189 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:45,189 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:45,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:45,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:45,190 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:45,190 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:45,190 INFO sqlalchemy.engine.Engine [cached since 56.5s ago] (44, 10)
2025-08-08 14:08:45,190 - sqlalchemy.engine.Engine - INFO - [cached since 56.5s ago] (44, 10)
2025-08-08 14:08:45,191 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999333333: Vocês cortaram meu cabelo errado ontem!
2025-08-08 14:08:45,191 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999333333: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:45,191 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:45,191 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:45,192 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] (54, 44, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:45,192 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] (54, 44, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:45,192 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:45,192 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:45,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:45,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:45,193 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:45,193 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:45,193 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] (651,)
2025-08-08 14:08:45,193 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] (651,)
2025-08-08 14:08:45,194 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:45,194 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:45,194 INFO sqlalchemy.engine.Engine [cached since 56.51s ago] (datetime.datetime(2025, 8, 8, 17, 8, 45, 193972), 44)
2025-08-08 14:08:45,194 - sqlalchemy.engine.Engine - INFO - [cached since 56.51s ago] (datetime.datetime(2025, 8, 8, 17, 8, 45, 193972), 44)
2025-08-08 14:08:45,194 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:45,194 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:45,194 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999333333
INFO:     127.0.0.1:43500 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:47,198 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:47,198 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:47,198 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:47,198 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:47,198 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "485"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... 1754672927", "timestamp": "1754672927", "text": {"body": "Estou muito insatisfeito com o servi\\u00e7o"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:47,198 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "485"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (188 characters truncated) ... 1754672927", "timestamp": "1754672927", "text": {"body": "Estou muito insatisfeito com o servi\\u00e7o"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:47,198 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:47,198 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:47,199 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:47,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:47,200 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:47,200 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:47,200 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] ('5511999333333',)
2025-08-08 14:08:47,200 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] ('5511999333333',)
2025-08-08 14:08:47,200 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:47,200 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:47,201 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (54, 'active', 'human')
2025-08-08 14:08:47,201 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (54, 'active', 'human')
2025-08-08 14:08:47,201 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:47,201 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:47,201 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (54, 44, 'in', 'wamid.test_1754672927', 'Estou muito insatisfeito com o serviço', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672927", "timestamp": "1754672927", "text": {"body": "Estou muito insatisfeito com o servi\\u00e7o"}, "type": "text"}')
2025-08-08 14:08:47,201 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (54, 44, 'in', 'wamid.test_1754672927', 'Estou muito insatisfeito com o serviço', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672927", "timestamp": "1754672927", "text": {"body": "Estou muito insatisfeito com o servi\\u00e7o"}, "type": "text"}')
2025-08-08 14:08:47,202 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:47,202 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:47,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:47,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:47,203 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:47,203 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:47,203 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (652,)
2025-08-08 14:08:47,203 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (652,)
2025-08-08 14:08:47,204 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:47,204 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:47,204 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (datetime.datetime(2025, 8, 8, 17, 8, 47, 203934), 44)
2025-08-08 14:08:47,204 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (datetime.datetime(2025, 8, 8, 17, 8, 47, 203934), 44)
2025-08-08 14:08:47,204 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:47,204 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:47,205 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:47,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:47,205 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:47,205 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:47,205 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (44, 10)
2025-08-08 14:08:47,205 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (44, 10)
2025-08-08 14:08:47,206 - app.services.intelligent_handoff - INFO - 🎯 Handoff detectado: complaint_detection para usuário 5511999333333
2025-08-08 14:08:47,206 - app.services.intelligent_handoff - ERROR - Erro na análise de handoff: 'complaint_detection' is not a valid HandoffReason
2025-08-08 14:08:47,206 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999333333: Estou muito insatisfeito com o serviço
2025-08-08 14:08:47,206 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999333333: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:47,206 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:47,206 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:47,206 INFO sqlalchemy.engine.Engine [cached since 58.53s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço.\n\n🔸 **Escolha uma das opções:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:47,206 - sqlalchemy.engine.Engine - INFO - [cached since 58.53s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço.\n\n🔸 **Escolha uma das opções:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:47,207 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:47,207 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:47,208 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:47,208 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:47,208 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:47,208 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:47,208 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (653,)
2025-08-08 14:08:47,208 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (653,)
2025-08-08 14:08:47,209 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:47,209 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:47,209 INFO sqlalchemy.engine.Engine [cached since 58.52s ago] (datetime.datetime(2025, 8, 8, 17, 8, 47, 208747), 44)
2025-08-08 14:08:47,209 - sqlalchemy.engine.Engine - INFO - [cached since 58.52s ago] (datetime.datetime(2025, 8, 8, 17, 8, 47, 208747), 44)
2025-08-08 14:08:47,209 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:47,209 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:47,209 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999333333
INFO:     127.0.0.1:43508 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:49,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:49,212 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:49,213 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:49,213 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:49,213 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "467"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (169 characters truncated) ...  "id": "wamid.test_1754672929", "timestamp": "1754672929", "text": {"body": "Quero falar com o gerente"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:49,213 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "467"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (169 characters truncated) ...  "id": "wamid.test_1754672929", "timestamp": "1754672929", "text": {"body": "Quero falar com o gerente"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:49,213 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:49,213 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:49,214 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:49,214 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:49,214 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:49,214 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:49,214 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] ('5511999333333',)
2025-08-08 14:08:49,214 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] ('5511999333333',)
2025-08-08 14:08:49,215 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:49,215 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:49,215 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] (54, 'active', 'human')
2025-08-08 14:08:49,215 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] (54, 'active', 'human')
2025-08-08 14:08:49,216 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:49,216 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:49,216 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] (54, 44, 'in', 'wamid.test_1754672929', 'Quero falar com o gerente', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672929", "timestamp": "1754672929", "text": {"body": "Quero falar com o gerente"}, "type": "text"}')
2025-08-08 14:08:49,216 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] (54, 44, 'in', 'wamid.test_1754672929', 'Quero falar com o gerente', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672929", "timestamp": "1754672929", "text": {"body": "Quero falar com o gerente"}, "type": "text"}')
2025-08-08 14:08:49,216 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:49,216 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:49,217 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:49,217 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:49,217 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:49,217 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:49,217 INFO sqlalchemy.engine.Engine [cached since 60.53s ago] (654,)
2025-08-08 14:08:49,217 - sqlalchemy.engine.Engine - INFO - [cached since 60.53s ago] (654,)
2025-08-08 14:08:49,218 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:49,218 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:49,218 INFO sqlalchemy.engine.Engine [cached since 60.53s ago] (datetime.datetime(2025, 8, 8, 17, 8, 49, 218515), 44)
2025-08-08 14:08:49,218 - sqlalchemy.engine.Engine - INFO - [cached since 60.53s ago] (datetime.datetime(2025, 8, 8, 17, 8, 49, 218515), 44)
2025-08-08 14:08:49,219 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:49,219 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:49,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:49,220 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:49,220 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:49,220 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:49,220 INFO sqlalchemy.engine.Engine [cached since 60.53s ago] (44, 10)
2025-08-08 14:08:49,220 - sqlalchemy.engine.Engine - INFO - [cached since 60.53s ago] (44, 10)
2025-08-08 14:08:49,220 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999333333: Quero falar com o gerente
2025-08-08 14:08:49,220 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999333333: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:49,221 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:49,221 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:49,221 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço.\n\n🔸 **Escolha uma das opções:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:49,221 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço.\n\n🔸 **Escolha uma das opções:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:08:49,221 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:49,221 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:49,222 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:49,222 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:49,222 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:49,222 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:49,222 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] (655,)
2025-08-08 14:08:49,222 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] (655,)
2025-08-08 14:08:49,223 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:49,223 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:49,223 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] (datetime.datetime(2025, 8, 8, 17, 8, 49, 223167), 44)
2025-08-08 14:08:49,223 - sqlalchemy.engine.Engine - INFO - [cached since 60.54s ago] (datetime.datetime(2025, 8, 8, 17, 8, 49, 223167), 44)
2025-08-08 14:08:49,223 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:49,223 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:49,224 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999333333
INFO:     127.0.0.1:43520 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:51,227 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:51,227 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:51,227 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:51,227 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:51,227 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "471"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (175 characters truncated) ...  "wamid.test_1754672931", "timestamp": "1754672931", "text": {"body": "Isso \\u00e9 inaceit\\u00e1vel!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:51,227 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "471"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (175 characters truncated) ...  "wamid.test_1754672931", "timestamp": "1754672931", "text": {"body": "Isso \\u00e9 inaceit\\u00e1vel!"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:51,227 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:51,227 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:51,229 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:51,229 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:51,229 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:51,229 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:51,229 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] ('5511999333333',)
2025-08-08 14:08:51,229 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] ('5511999333333',)
2025-08-08 14:08:51,230 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:51,230 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:51,230 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (54, 'active', 'human')
2025-08-08 14:08:51,230 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (54, 'active', 'human')
2025-08-08 14:08:51,230 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:51,230 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:51,230 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (54, 44, 'in', 'wamid.test_1754672931', 'Isso é inaceitável!', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672931", "timestamp": "1754672931", "text": {"body": "Isso \\u00e9 inaceit\\u00e1vel!"}, "type": "text"}')
2025-08-08 14:08:51,230 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (54, 44, 'in', 'wamid.test_1754672931', 'Isso é inaceitável!', 'text', '{"from": "5511999333333", "id": "wamid.test_1754672931", "timestamp": "1754672931", "text": {"body": "Isso \\u00e9 inaceit\\u00e1vel!"}, "type": "text"}')
2025-08-08 14:08:51,231 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:51,231 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:51,232 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:51,232 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:51,232 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:51,232 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:51,232 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (656,)
2025-08-08 14:08:51,232 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (656,)
2025-08-08 14:08:51,233 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:51,233 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:51,233 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (datetime.datetime(2025, 8, 8, 17, 8, 51, 233057), 44)
2025-08-08 14:08:51,233 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (datetime.datetime(2025, 8, 8, 17, 8, 51, 233057), 44)
2025-08-08 14:08:51,233 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:51,233 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:51,234 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:51,234 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:51,234 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:51,234 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:51,234 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (44, 10)
2025-08-08 14:08:51,234 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (44, 10)
2025-08-08 14:08:51,235 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999333333: Isso é inaceitável!
2025-08-08 14:08:51,235 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999333333: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:08:51,235 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:51,235 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:51,235 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço. Vamos começar novamente?', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:51,235 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (54, 44, 'out', None, '❌ Não consegui identificar o serviço. Vamos começar novamente?', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:08:51,236 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:51,236 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:51,236 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:51,236 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:51,237 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:51,237 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:51,237 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (657,)
2025-08-08 14:08:51,237 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (657,)
2025-08-08 14:08:51,237 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:51,237 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:51,237 INFO sqlalchemy.engine.Engine [cached since 62.55s ago] (datetime.datetime(2025, 8, 8, 17, 8, 51, 237660), 44)
2025-08-08 14:08:51,237 - sqlalchemy.engine.Engine - INFO - [cached since 62.55s ago] (datetime.datetime(2025, 8, 8, 17, 8, 51, 237660), 44)
2025-08-08 14:08:51,238 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:51,238 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:51,238 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999333333
2025-08-08 14:08:51,238 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999333333
INFO:     127.0.0.1:43532 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:08:59,245 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:59,245 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:59,245 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:59,245 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:08:59,245 INFO sqlalchemy.engine.Engine [cached since 70.57s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "493"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (197 characters truncated) ... 939", "timestamp": "1754672939", "text": {"body": "Ol\\u00e1, sou cliente h\\u00e1 5 anos da barbearia"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:59,245 - sqlalchemy.engine.Engine - INFO - [cached since 70.57s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "493"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (197 characters truncated) ... 939", "timestamp": "1754672939", "text": {"body": "Ol\\u00e1, sou cliente h\\u00e1 5 anos da barbearia"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:08:59,246 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:59,246 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:59,247 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:59,247 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:59,247 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:59,247 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:08:59,247 INFO sqlalchemy.engine.Engine [cached since 70.57s ago] ('5511999444444',)
2025-08-08 14:08:59,247 - sqlalchemy.engine.Engine - INFO - [cached since 70.57s ago] ('5511999444444',)
2025-08-08 14:08:59,248 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:59,248 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:08:59,248 INFO sqlalchemy.engine.Engine [cached since 70.57s ago] (55, 'active', 'human')
2025-08-08 14:08:59,248 - sqlalchemy.engine.Engine - INFO - [cached since 70.57s ago] (55, 'active', 'human')
2025-08-08 14:08:59,248 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:59,248 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:08:59,248 INFO sqlalchemy.engine.Engine [cached since 70.57s ago] (55, 45, 'in', 'wamid.test_1754672939', 'Olá, sou cliente há 5 anos da barbearia', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672939", "timestamp": "1754672939", "text": {"body": "Ol\\u00e1, sou cliente h\\u00e1 5 anos da barbearia"}, "type": "text"}')
2025-08-08 14:08:59,248 - sqlalchemy.engine.Engine - INFO - [cached since 70.57s ago] (55, 45, 'in', 'wamid.test_1754672939', 'Olá, sou cliente há 5 anos da barbearia', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672939", "timestamp": "1754672939", "text": {"body": "Ol\\u00e1, sou cliente h\\u00e1 5 anos da barbearia"}, "type": "text"}')
2025-08-08 14:08:59,249 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:59,249 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:59,250 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:59,250 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:59,250 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:59,250 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:08:59,250 INFO sqlalchemy.engine.Engine [cached since 70.57s ago] (658,)
2025-08-08 14:08:59,250 - sqlalchemy.engine.Engine - INFO - [cached since 70.57s ago] (658,)
2025-08-08 14:08:59,250 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:59,250 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:08:59,250 INFO sqlalchemy.engine.Engine [cached since 70.56s ago] (datetime.datetime(2025, 8, 8, 17, 8, 59, 250658), 45)
2025-08-08 14:08:59,250 - sqlalchemy.engine.Engine - INFO - [cached since 70.56s ago] (datetime.datetime(2025, 8, 8, 17, 8, 59, 250658), 45)
2025-08-08 14:08:59,251 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:08:59,251 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:08:59,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:08:59,252 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:08:59,252 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:59,252 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:08:59,252 INFO sqlalchemy.engine.Engine [cached since 70.56s ago] (45, 10)
2025-08-08 14:08:59,252 - sqlalchemy.engine.Engine - INFO - [cached since 70.56s ago] (45, 10)
2025-08-08 14:08:59,252 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Olá, sou cliente há 5 anos da barbearia' do usuário 5511999444444
2025-08-08 14:08:59,252 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:08:59,252 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:08:59,253 - app.services.lead_scoring - INFO - Lead scored: 5511999444444 - Score: 0.28 - Category: cold
2025-08-08 14:08:59,253 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.28, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 0, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 2, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 0.0, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.56, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.0), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:08:59,253 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.28, confidence=0.56, category=LeadCategory.COLD, priority=1
2025-08-08 14:08:59,253 - app.services.hybrid_llm_crew - INFO - Estratégia hybrid por baixa confiança: 0.56
2025-08-08 14:08:59,253 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: hybrid para: Olá, sou cliente há 5 anos da barbearia...
2025-08-08 14:08:59,253 - app.services.conversation_flow - INFO - Flow decision for 5511999444444: natural_progression → greeting
2025-08-08 14:08:59,253 - app.services.lead_scoring - INFO - Lead scored: 5511999444444 - Score: 0.44 - Category: cold
╭────────────────────────────────────────────────────── 🤖 Agent Started ───────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Task:                                                                                                                        │
│                                                                                                                               │
│          Mensagem do cliente: "Olá, sou cliente há 5 anos da barbearia"                                                       │
│          Telefone: 5511999444444                                                                                              │
│          Intenção detectada: saudacao                                                                                         │
│          Contexto adicional: {'user_id': '5511999444444', 'analysis': {'llm_response': None, 'intent': None, 'confidence':    │
│  0.0, 'conversation_state': 'unknown', 'context_available': False, 'message_complexity': 'medium', 'customer_value':          │
│  'standard'}, 'timestamp': '2025-08-08T14:08:59.253237'}                                                                      │
│                                                                                                                               │
│          INFORMAÇÕES DO LEAD:                                                                                                 │
│          - Score: 0.44/100 (COLD)                                                                                             │
│          - Prioridade: 1/5                                                                                                    │
│          - Valor Estimado: R$ 50.00                                                                                           │
│          - Probabilidade de Conversão: 0.0%                                                                                   │
│          - Recomendações: 📚 Educar sobre benefícios, 🔄 Follow-up semanal                                                    │
│                                                                                                                               │
│                                                                                                                               │
│          CONTEXTO DA CONVERSA:                                                                                                │
│          - Estado da Conversa: GREETING                                                                                       │
│          - Tipo de Transição: natural_progression                                                                             │
│          - Confiança: 77.5%                                                                                                   │
│          - Tópicos Ativos: greeting                                                                                           │
│          - Instruções Especiais: Primary topic detected: Cumprimentos (confidence: 0.25). Following natural conversation      │
│  flow. Current state: greeting → Next state: greeting                                                                         │
│                                                                                                                               │
│                                                                                                                               │
│                                                                                                                               │
│              Como recepcionista inteligente, você deve:                                                                       │
│                                                                                                                               │
│              💡 SUGESTÃO: Perfeito, sobre Cumprimentos...                                                                     │
│                                                                                                                               │
│              SUAS RESPONSABILIDADES:                                                                                          │
│              1. Manter continuidade da conversa considerando o contexto                                                       │
│              2. Ser natural na transição entre tópicos                                                                        │
│              3. Reconhecer quando o cliente muda de assunto                                                                   │
│              4. Fornecer informações relevantes ao momento da conversa                                                        │
│              5. Direcionar adequadamente quando necessário                                                                    │
│                                                                                                                               │
│                                                                                                                               │
│              💙 LEAD FRIO: Cultive o relacionamento                                                                           │
│              - Seja educativo e informativo                                                                                   │
│              - Construa confiança gradualmente                                                                                │
│              - Não pressione por vendas                                                                                       │
│              - Ofereça valor através de informações                                                                           │
│                                                                                                                               │
│                                                                                                                               │
│              IMPORTANTE: Seja conversacional e adaptável. Se o cliente mudou de assunto,                                      │
│              acompanhe naturalmente. Se está retomando algo anterior, demonstre que lembra.                                   │
│                                                                                                                               │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

[92m14:08:59 - LiteLLM:INFO[0m: utils.py:3224 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:08:59,263 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:09:01,488 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m14:09:01 - LiteLLM:INFO[0m: utils.py:1236 - Wrapper: Completed Call, calling success_handler
2025-08-08 14:09:01,491 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
╭──────────────────────────────────────────────────── ✅ Agent Final Answer ────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Final Answer:                                                                                                                │
│  Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 anos. Estamos sempre aqui  │
│  para garantir que você tenha a melhor experiência possível na nossa barbearia.                                               │
│                                                                                                                               │
│  Se precisar de informações ou desejar saber mais sobre os nossos serviços e os benefícios que oferecemos, estou à            │
│  disposição para ajudar! Sinta-se à vontade para compartilhar o que você precisa. Agradeço por seu tempo e pela confiança     │
│  que deposita em nós!                                                                                                         │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

2025-08-08 14:09:01,505 - app.routes.webhook - INFO - ✅ Processamento: hybrid | Agente: receptionist | Tempo: 2.25s
2025-08-08 14:09:01,505 - app.routes.webhook - INFO - 💬 Resposta gerada: Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 an...
2025-08-08 14:09:01,505 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:09:01,505 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999444444: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:01,506 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:09:01,506 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:09:01,507 - app.routes.webhook - ERROR - ❌ Erro no sistema híbrido principal: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 55, 'content': 'Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 anos. Estamos sempre aqu ... (1334 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 45, 'direction': 'outbound', 'message_id': None}]]
2025-08-08 14:09:01,510 - app.routes.webhook - ERROR - Traceback: Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type LeadCategory is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/routes/webhook.py", line 678, in _process_and_respond
    await MessageService.create_message(
    ...<12 lines>...
    )
  File "/home/vancim/whats_agent/app/services/data.py", line 197, in create_message
    await db.commit()
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1818, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 55, 'content': 'Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 anos. Estamos sempre aqu ... (1334 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 45, 'direction': 'outbound', 'message_id': None}]]

2025-08-08 14:09:01,510 - app.routes.webhook - ERROR - Erro no sistema dinâmico integrado: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 55, 'content': 'Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 anos. Estamos sempre aqu ... (1334 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 45, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-08-08 14:09:01,510 - app.routes.webhook - ERROR - Erro ao processar mensagem individual: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 55, 'content': 'Olá! É um prazer receber uma mensagem de um cliente tão especial como você, que está conosco há 5 anos. Estamos sempre aqu ... (1334 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 45, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:     127.0.0.1:56306 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:03,513 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:03,513 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:03,513 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:03,513 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:03,513 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "497"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (199 characters truncated) ... 3", "timestamp": "1754672943", "text": {"body": "Preciso de um atendimento especial para meu casamento"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:03,513 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "497"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (199 characters truncated) ... 3", "timestamp": "1754672943", "text": {"body": "Preciso de um atendimento especial para meu casamento"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:03,514 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:03,514 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:03,515 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:03,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:03,515 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:03,515 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:03,515 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] ('5511999444444',)
2025-08-08 14:09:03,515 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] ('5511999444444',)
2025-08-08 14:09:03,516 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:03,516 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:03,516 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] (55, 'active', 'human')
2025-08-08 14:09:03,516 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] (55, 'active', 'human')
2025-08-08 14:09:03,517 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:03,517 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:03,517 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] (55, 45, 'in', 'wamid.test_1754672943', 'Preciso de um atendimento especial para meu casamento', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672943", "timestamp": "1754672943", "text": {"body": "Preciso de um atendimento especial para meu casamento"}, "type": "text"}')
2025-08-08 14:09:03,517 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] (55, 45, 'in', 'wamid.test_1754672943', 'Preciso de um atendimento especial para meu casamento', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672943", "timestamp": "1754672943", "text": {"body": "Preciso de um atendimento especial para meu casamento"}, "type": "text"}')
2025-08-08 14:09:03,517 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:03,517 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:03,518 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:03,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:03,518 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:03,518 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:03,518 INFO sqlalchemy.engine.Engine [cached since 74.83s ago] (659,)
2025-08-08 14:09:03,518 - sqlalchemy.engine.Engine - INFO - [cached since 74.83s ago] (659,)
2025-08-08 14:09:03,519 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:03,519 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:03,519 INFO sqlalchemy.engine.Engine [cached since 74.83s ago] (datetime.datetime(2025, 8, 8, 17, 9, 3, 519044), 45)
2025-08-08 14:09:03,519 - sqlalchemy.engine.Engine - INFO - [cached since 74.83s ago] (datetime.datetime(2025, 8, 8, 17, 9, 3, 519044), 45)
2025-08-08 14:09:03,519 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:03,519 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:03,520 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:03,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:03,520 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:03,520 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:03,520 INFO sqlalchemy.engine.Engine [cached since 74.83s ago] (45, 10)
2025-08-08 14:09:03,520 - sqlalchemy.engine.Engine - INFO - [cached since 74.83s ago] (45, 10)
2025-08-08 14:09:03,521 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Preciso de um atendimento especial para meu casamento' do usuário 5511999444444
2025-08-08 14:09:03,521 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:09:03,521 - app.services.lead_scoring - INFO - Lead scored: 5511999444444 - Score: 0.97 - Category: cold
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.97, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 3, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 4, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 1.5, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.72, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.01), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.97, confidence=0.72, category=LeadCategory.COLD, priority=1
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: llm_only para: Preciso de um atendimento especial para meu casame...
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - ERROR - Erro no processamento híbrido: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:09:03,521 - app.services.hybrid_llm_crew - ERROR - Erro no fallback: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:09:03,521 - app.routes.webhook - INFO - ✅ Processamento: error_fallback | Agente: unknown | Tempo: 0.00s
2025-08-08 14:09:03,521 - app.routes.webhook - INFO - 💬 Resposta gerada: Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!...
2025-08-08 14:09:03,521 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:09:03,521 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999444444: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:03,522 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:03,522 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:03,522 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] (55, 45, 'outbound', None, 'Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!', 'text', '{"metadata": {"processing_strategy": "error_fallback", "agent_used": "unknown", "hybrid_metadata": {}, "system_used": "hybrid_primary"}}')
2025-08-08 14:09:03,522 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] (55, 45, 'outbound', None, 'Desculpe, estamos com problemas técnicos. Nossa equipe foi notificada e resolveremos em breve!', 'text', '{"metadata": {"processing_strategy": "error_fallback", "agent_used": "unknown", "hybrid_metadata": {}, "system_used": "hybrid_primary"}}')
2025-08-08 14:09:03,522 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:03,522 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:03,523 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:03,523 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:03,523 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:03,523 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:03,523 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] (660,)
2025-08-08 14:09:03,523 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] (660,)
2025-08-08 14:09:03,524 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:03,524 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:03,524 INFO sqlalchemy.engine.Engine [cached since 74.84s ago] (datetime.datetime(2025, 8, 8, 17, 9, 3, 523901), 45)
2025-08-08 14:09:03,524 - sqlalchemy.engine.Engine - INFO - [cached since 74.84s ago] (datetime.datetime(2025, 8, 8, 17, 9, 3, 523901), 45)
2025-08-08 14:09:03,524 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:03,524 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:03,524 - app.routes.webhook - INFO - 💾 Resposta salva no cache para 5511999444444
2025-08-08 14:09:03,524 - app.routes.webhook - INFO - ✅ Resposta enviada e salva para 5511999444444
INFO:     127.0.0.1:56322 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:05,527 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:05,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:05,528 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:05,528 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:05,528 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "510"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (212 characters truncated) ... p": "1754672945", "text": {"body": "Quero agendar corte, barba, sobrancelha e algum tratamento premium"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:05,528 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "510"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (212 characters truncated) ... p": "1754672945", "text": {"body": "Quero agendar corte, barba, sobrancelha e algum tratamento premium"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:05,528 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:05,528 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:05,529 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:05,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:05,529 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:05,529 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:05,529 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] ('5511999444444',)
2025-08-08 14:09:05,529 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] ('5511999444444',)
2025-08-08 14:09:05,530 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:05,530 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:05,530 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (55, 'active', 'human')
2025-08-08 14:09:05,530 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (55, 'active', 'human')
2025-08-08 14:09:05,531 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:05,531 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:05,531 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (55, 45, 'in', 'wamid.test_1754672945', 'Quero agendar corte, barba, sobrancelha e algum tratamento premium', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672945", "timestamp": "1754672945", "text": {"body": "Quero agendar corte, barba, sobrancelha e algum tratamento premium"}, "type": "text"}')
2025-08-08 14:09:05,531 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (55, 45, 'in', 'wamid.test_1754672945', 'Quero agendar corte, barba, sobrancelha e algum tratamento premium', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672945", "timestamp": "1754672945", "text": {"body": "Quero agendar corte, barba, sobrancelha e algum tratamento premium"}, "type": "text"}')
2025-08-08 14:09:05,531 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:05,531 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:05,532 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:05,532 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:05,532 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:05,532 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:05,532 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (661,)
2025-08-08 14:09:05,532 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (661,)
2025-08-08 14:09:05,533 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:05,533 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:05,533 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (datetime.datetime(2025, 8, 8, 17, 9, 5, 533441), 45)
2025-08-08 14:09:05,533 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (datetime.datetime(2025, 8, 8, 17, 9, 5, 533441), 45)
2025-08-08 14:09:05,534 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:05,534 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:05,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:05,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:05,535 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:05,535 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:05,535 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (45, 10)
2025-08-08 14:09:05,535 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (45, 10)
2025-08-08 14:09:05,535 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999444444: Quero agendar corte, barba, sobrancelha e algum tratamento premium
2025-08-08 14:09:05,535 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999444444: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:05,536 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:05,536 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:05,536 INFO sqlalchemy.engine.Engine [cached since 76.86s ago] (55, 45, 'out', None, '✅ **Barba** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:09:05,536 - sqlalchemy.engine.Engine - INFO - [cached since 76.86s ago] (55, 45, 'out', None, '✅ **Barba** selecionado!\n\n📅 **Para qual data você gostaria de agendar?**\n\nVocê pode dizer:\n• Hoje, amanhã\n• 15/08, 15/08/2024\n• Segunda-feira, terça-feira, etc.', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": false}}')
2025-08-08 14:09:05,536 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:05,536 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:05,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:05,537 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:05,537 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:05,537 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:05,537 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (662,)
2025-08-08 14:09:05,537 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (662,)
2025-08-08 14:09:05,538 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:05,538 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:05,538 INFO sqlalchemy.engine.Engine [cached since 76.85s ago] (datetime.datetime(2025, 8, 8, 17, 9, 5, 538214), 45)
2025-08-08 14:09:05,538 - sqlalchemy.engine.Engine - INFO - [cached since 76.85s ago] (datetime.datetime(2025, 8, 8, 17, 9, 5, 538214), 45)
2025-08-08 14:09:05,538 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:05,538 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:05,539 - app.routes.webhook - INFO - 💾 Resposta de agendamento salva no cache para 5511999444444
2025-08-08 14:09:05,539 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999444444
INFO:     127.0.0.1:52064 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:07,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:07,541 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:07,542 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:07,542 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:07,542 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "521"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (226 characters truncated) ... 7", "text": {"body": "\\u00c9 para o pr\\u00f3ximo s\\u00e1bado, posso pagar extra por atendimento VIP"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:07,542 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "521"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (226 characters truncated) ... 7", "text": {"body": "\\u00c9 para o pr\\u00f3ximo s\\u00e1bado, posso pagar extra por atendimento VIP"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:07,543 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:07,543 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:07,544 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:07,544 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:07,544 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:07,544 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:07,544 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] ('5511999444444',)
2025-08-08 14:09:07,544 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] ('5511999444444',)
2025-08-08 14:09:07,545 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:07,545 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:07,545 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] (55, 'active', 'human')
2025-08-08 14:09:07,545 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] (55, 'active', 'human')
2025-08-08 14:09:07,545 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:07,545 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:07,545 INFO sqlalchemy.engine.Engine [cached since 78.86s ago] (55, 45, 'in', 'wamid.test_1754672947', 'É para o próximo sábado, posso pagar extra por atendimento VIP', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672947", "timestamp": "1754672947", "text": {"body": "\\u00c9 para o pr\\u00f3ximo s\\u00e1bado, posso pagar extra por atendimento VIP"}, "type": "text"}')
2025-08-08 14:09:07,545 - sqlalchemy.engine.Engine - INFO - [cached since 78.86s ago] (55, 45, 'in', 'wamid.test_1754672947', 'É para o próximo sábado, posso pagar extra por atendimento VIP', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672947", "timestamp": "1754672947", "text": {"body": "\\u00c9 para o pr\\u00f3ximo s\\u00e1bado, posso pagar extra por atendimento VIP"}, "type": "text"}')
2025-08-08 14:09:07,546 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:07,546 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:07,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:07,547 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:07,547 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:07,547 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:07,547 INFO sqlalchemy.engine.Engine [cached since 78.86s ago] (663,)
2025-08-08 14:09:07,547 - sqlalchemy.engine.Engine - INFO - [cached since 78.86s ago] (663,)
2025-08-08 14:09:07,547 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:07,547 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:07,547 INFO sqlalchemy.engine.Engine [cached since 78.86s ago] (datetime.datetime(2025, 8, 8, 17, 9, 7, 547705), 45)
2025-08-08 14:09:07,547 - sqlalchemy.engine.Engine - INFO - [cached since 78.86s ago] (datetime.datetime(2025, 8, 8, 17, 9, 7, 547705), 45)
2025-08-08 14:09:07,548 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:07,548 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:07,549 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:07,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:07,549 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:07,549 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:07,549 INFO sqlalchemy.engine.Engine [cached since 78.86s ago] (45, 10)
2025-08-08 14:09:07,549 - sqlalchemy.engine.Engine - INFO - [cached since 78.86s ago] (45, 10)
2025-08-08 14:09:07,550 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999444444: É para o próximo sábado, posso pagar extra por atendimento VIP
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Processing date selection for message: 'É para o próximo sábado, posso pagar extra por atendimento VIP'
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Date parsed successfully: 2025-08-09
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'é para o próximo sábado, posso pagar extra por atendimento vip'
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'é para o próximo sábado, posso pagar extra por atendimento vip'
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Time parsing result: 'None'
2025-08-08 14:09:07,550 - app.services.booking_workflow - INFO - DEBUG: Only date found - moving to time collection
2025-08-08 14:09:07,550 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999444444: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:07,550 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:07,550 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:07,550 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] (55, 45, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:07,550 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] (55, 45, 'out', None, '📅 Data escolhida: **Sábado, 09/08/2025**\n\n🕐 **Que horário você prefere?**\n\nVocê pode dizer:\n• 14:30, 15h00\n• 9 da manhã, 2 da tarde', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:07,551 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:07,551 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:07,552 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:07,552 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:07,552 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:07,552 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:07,552 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] (664,)
2025-08-08 14:09:07,552 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] (664,)
2025-08-08 14:09:07,553 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:07,553 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:07,553 INFO sqlalchemy.engine.Engine [cached since 78.87s ago] (datetime.datetime(2025, 8, 8, 17, 9, 7, 552833), 45)
2025-08-08 14:09:07,553 - sqlalchemy.engine.Engine - INFO - [cached since 78.87s ago] (datetime.datetime(2025, 8, 8, 17, 9, 7, 552833), 45)
2025-08-08 14:09:07,553 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:07,553 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:07,553 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999444444
INFO:     127.0.0.1:52080 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:09,556 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:09,556 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:09,557 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:09,557 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:09,557 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "484"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... est_1754672949", "timestamp": "1754672949", "text": {"body": "Podem fazer um pacote especial para mim?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:09,557 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "484"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... est_1754672949", "timestamp": "1754672949", "text": {"body": "Podem fazer um pacote especial para mim?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:09,557 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:09,557 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:09,558 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:09,558 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:09,558 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:09,558 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:09,558 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] ('5511999444444',)
2025-08-08 14:09:09,558 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] ('5511999444444',)
2025-08-08 14:09:09,559 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:09,559 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:09,559 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (55, 'active', 'human')
2025-08-08 14:09:09,559 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (55, 'active', 'human')
2025-08-08 14:09:09,560 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:09,560 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:09,560 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (55, 45, 'in', 'wamid.test_1754672949', 'Podem fazer um pacote especial para mim?', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672949", "timestamp": "1754672949", "text": {"body": "Podem fazer um pacote especial para mim?"}, "type": "text"}')
2025-08-08 14:09:09,560 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (55, 45, 'in', 'wamid.test_1754672949', 'Podem fazer um pacote especial para mim?', 'text', '{"from": "5511999444444", "id": "wamid.test_1754672949", "timestamp": "1754672949", "text": {"body": "Podem fazer um pacote especial para mim?"}, "type": "text"}')
2025-08-08 14:09:09,560 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:09,560 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:09,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:09,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:09,561 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:09,561 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:09,561 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (665,)
2025-08-08 14:09:09,561 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (665,)
2025-08-08 14:09:09,562 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:09,562 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:09,562 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (datetime.datetime(2025, 8, 8, 17, 9, 9, 562369), 45)
2025-08-08 14:09:09,562 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (datetime.datetime(2025, 8, 8, 17, 9, 9, 562369), 45)
2025-08-08 14:09:09,563 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:09,563 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:09,563 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:09,563 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:09,564 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:09,564 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:09,564 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (45, 10)
2025-08-08 14:09:09,564 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (45, 10)
2025-08-08 14:09:09,564 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999444444: Podem fazer um pacote especial para mim?
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Parsing time from message: 'podem fazer um pacote especial para mim?'
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 0 '[àa]s?\s*(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 1 '[àa]s?\s*(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 2 '[àa]s?\s*(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 3 '[àa]s?\s*(\d{1,2})\s*h(?:oras?)?' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 4 '[àa]s?\s*(\d{1,2})(?:\s*h)?' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 5 '(\d{1,2})[:h](\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 6 '(\d{1,2})[:h](\d{2})\s*h' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 7 '(\d{1,2})\s*h\s*(\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 8 '(\d{1,2})\s*[:\.](\d{2})' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 9 '(\d{1,2})\s*da\s*(manha|manhã|tarde|noite)' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: Pattern 10 '(\d{1,2})\s*h(?:\s*da\s*(manha|manhã|tarde|noite))?' -> Match: None
2025-08-08 14:09:09,564 - app.services.booking_workflow - INFO - DEBUG: No time pattern matched for: 'podem fazer um pacote especial para mim?'
2025-08-08 14:09:09,565 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999444444: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:09,565 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:09,565 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:09,565 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (55, 45, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:09,565 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (55, 45, 'out', None, '❌ Horário não disponível.\n\n🕐 **Escolha outro horário:**', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:09,565 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:09,565 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:09,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:09,566 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:09,566 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:09,566 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:09,566 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (666,)
2025-08-08 14:09:09,566 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (666,)
2025-08-08 14:09:09,567 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:09,567 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:09,567 INFO sqlalchemy.engine.Engine [cached since 80.88s ago] (datetime.datetime(2025, 8, 8, 17, 9, 9, 567326), 45)
2025-08-08 14:09:09,567 - sqlalchemy.engine.Engine - INFO - [cached since 80.88s ago] (datetime.datetime(2025, 8, 8, 17, 9, 9, 567326), 45)
2025-08-08 14:09:09,567 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:09,567 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:09,568 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999444444
INFO:     127.0.0.1:52092 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Ol\\u00e1, quero agendar um corte"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Ol\\u00e1, quero agendar um corte"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,577 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Voc\\u00eas funcionam no domingo?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,577 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "482"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (186 characters truncated) ... wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Voc\\u00eas funcionam no domingo?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,578 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,578 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,578 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,578 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,579 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:20,579 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:20,579 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] ('5511999555001',)
2025-08-08 14:09:20,579 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] ('5511999555001',)
2025-08-08 14:09:20,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,580 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:20,580 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:20,580 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] ('5511999555003',)
2025-08-08 14:09:20,580 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] ('5511999555003',)
2025-08-08 14:09:20,581 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:20,581 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:20,581 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] (57, 'active', 'human')
2025-08-08 14:09:20,581 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] (57, 'active', 'human')
2025-08-08 14:09:20,582 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:20,582 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:20,582 INFO sqlalchemy.engine.Engine [cached since 91.9s ago] (58, 'active', 'human')
2025-08-08 14:09:20,582 - sqlalchemy.engine.Engine - INFO - [cached since 91.9s ago] (58, 'active', 'human')
2025-08-08 14:09:20,595 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,595 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,595 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (57, 47, 'in', 'wamid.test_1754672960', 'Olá, quero agendar um corte', 'text', '{"from": "5511999555001", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Ol\\u00e1, quero agendar um corte"}, "type": "text"}')
2025-08-08 14:09:20,595 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (57, 47, 'in', 'wamid.test_1754672960', 'Olá, quero agendar um corte', 'text', '{"from": "5511999555001", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Ol\\u00e1, quero agendar um corte"}, "type": "text"}')
2025-08-08 14:09:20,596 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,596 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,596 INFO sqlalchemy.engine.Engine [cached since 91.92s ago] (58, 48, 'in', 'wamid.test_1754672960', 'Vocês funcionam no domingo?', 'text', '{"from": "5511999555003", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Voc\\u00eas funcionam no domingo?"}, "type": "text"}')
2025-08-08 14:09:20,596 - sqlalchemy.engine.Engine - INFO - [cached since 91.92s ago] (58, 48, 'in', 'wamid.test_1754672960', 'Vocês funcionam no domingo?', 'text', '{"from": "5511999555003", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Voc\\u00eas funcionam no domingo?"}, "type": "text"}')
2025-08-08 14:09:20,596 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,596 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,596 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,596 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (667,)
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (667,)
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (668,)
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (668,)
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,598 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,598 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:20,599 INFO sqlalchemy.engine.Engine [cached since 91.93s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "498"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (204 characters truncated) ... 960", "timestamp": "1754672960", "text": {"body": "Quais s\\u00e3o os pre\\u00e7os dos servi\\u00e7os?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,599 - sqlalchemy.engine.Engine - INFO - [cached since 91.93s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "498"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (204 characters truncated) ... 960", "timestamp": "1754672960", "text": {"body": "Quais s\\u00e3o os pre\\u00e7os dos servi\\u00e7os?"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:20,599 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:20,599 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:20,599 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (datetime.datetime(2025, 8, 8, 17, 9, 20, 599532), 47)
2025-08-08 14:09:20,599 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (datetime.datetime(2025, 8, 8, 17, 9, 20, 599532), 47)
2025-08-08 14:09:20,600 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:20,600 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:20,600 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (datetime.datetime(2025, 8, 8, 17, 9, 20, 600123), 48)
2025-08-08 14:09:20,600 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (datetime.datetime(2025, 8, 8, 17, 9, 20, 600123), 48)
2025-08-08 14:09:20,600 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,600 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,600 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,600 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,601 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:20,601 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (47, 10)
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (47, 10)
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:20,602 INFO sqlalchemy.engine.Engine [cached since 91.91s ago] (48, 10)
2025-08-08 14:09:20,602 - sqlalchemy.engine.Engine - INFO - [cached since 91.91s ago] (48, 10)
2025-08-08 14:09:20,603 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999555001: Olá, quero agendar um corte
2025-08-08 14:09:20,603 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999555001: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:20,603 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,603 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:20,603 INFO sqlalchemy.engine.Engine [cached since 91.92s ago] (57, 47, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:20,603 - sqlalchemy.engine.Engine - INFO - [cached since 91.92s ago] (57, 47, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:20,604 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Vocês funcionam no domingo?' do usuário 5511999555003
2025-08-08 14:09:20,604 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:09:20,604 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:09:20,604 - app.services.lead_scoring - INFO - Lead scored: 5511999555003 - Score: 0.28 - Category: cold
2025-08-08 14:09:20,604 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.28, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 0, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 2, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 0.0, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.56, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.0), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:09:20,604 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.28, confidence=0.56, category=LeadCategory.COLD, priority=1
2025-08-08 14:09:20,604 - app.services.hybrid_llm_crew - INFO - Estratégia hybrid por baixa confiança: 0.56
2025-08-08 14:09:20,604 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: hybrid para: Vocês funcionam no domingo?...
2025-08-08 14:09:20,604 - app.services.conversation_flow - INFO - Flow decision for 5511999555003: natural_progression → greeting
2025-08-08 14:09:20,604 - app.services.lead_scoring - INFO - Lead scored: 5511999555003 - Score: 0.44 - Category: cold
╭────────────────────────────────────────────────────── 🤖 Agent Started ───────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Task:                                                                                                                        │
│                                                                                                                               │
│          Mensagem do cliente: "Vocês funcionam no domingo?"                                                                   │
│          Telefone: 5511999555003                                                                                              │
│          Intenção detectada: geral                                                                                            │
│          Contexto adicional: {'user_id': '5511999555003', 'analysis': {'llm_response': None, 'intent': None, 'confidence':    │
│  0.0, 'conversation_state': 'unknown', 'context_available': False, 'message_complexity': 'medium', 'customer_value':          │
│  'standard'}, 'timestamp': '2025-08-08T14:09:20.604712'}                                                                      │
│                                                                                                                               │
│          INFORMAÇÕES DO LEAD:                                                                                                 │
│          - Score: 0.44/100 (COLD)                                                                                             │
│          - Prioridade: 1/5                                                                                                    │
│          - Valor Estimado: R$ 50.00                                                                                           │
│          - Probabilidade de Conversão: 0.0%                                                                                   │
│          - Recomendações: 📚 Educar sobre benefícios, 🔄 Follow-up semanal                                                    │
│                                                                                                                               │
│                                                                                                                               │
│          CONTEXTO DA CONVERSA:                                                                                                │
│          - Estado da Conversa: GREETING                                                                                       │
│          - Tipo de Transição: natural_progression                                                                             │
│          - Confiança: 70.0%                                                                                                   │
│          - Tópicos Ativos:                                                                                                    │
│          - Instruções Especiais: Following natural conversation flow. Current state: greeting → Next state: greeting          │
│                                                                                                                               │
│                                                                                                                               │
│                                                                                                                               │
│              Como recepcionista inteligente, você deve:                                                                       │
│                                                                                                                               │
│              💡 SUGESTÃO: Como posso te ajudar com isso?                                                                      │
│                                                                                                                               │
│              SUAS RESPONSABILIDADES:                                                                                          │
│              1. Manter continuidade da conversa considerando o contexto                                                       │
│              2. Ser natural na transição entre tópicos                                                                        │
│              3. Reconhecer quando o cliente muda de assunto                                                                   │
│              4. Fornecer informações relevantes ao momento da conversa                                                        │
│              5. Direcionar adequadamente quando necessário                                                                    │
│                                                                                                                               │
│                                                                                                                               │
│              💙 LEAD FRIO: Cultive o relacionamento                                                                           │
│              - Seja educativo e informativo                                                                                   │
│              - Construa confiança gradualmente                                                                                │
│              - Não pressione por vendas                                                                                       │
│              - Ofereça valor através de informações                                                                           │
│                                                                                                                               │
│                                                                                                                               │
│              IMPORTANTE: Seja conversacional e adaptável. Se o cliente mudou de assunto,                                      │
│              acompanhe naturalmente. Se está retomando algo anterior, demonstre que lembra.                                   │
│                                                                                                                               │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

[92m14:09:20 - LiteLLM:INFO[0m: utils.py:3224 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:09:20,612 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:09:21,933 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m14:09:21 - LiteLLM:INFO[0m: utils.py:1236 - Wrapper: Completed Call, calling success_handler
2025-08-08 14:09:21,934 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
╭──────────────────────────────────────────────────── ✅ Agent Final Answer ────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Final Answer:                                                                                                                │
│  Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma informação ou se        │
│  houver algo mais que eu possa ajudar, por favor, me avise! Estou aqui para ajudar. 😊                                        │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

2025-08-08 14:09:21,938 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,938 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,939 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:21,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:21,939 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:21,939 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:21,939 INFO sqlalchemy.engine.Engine [cached since 93.26s ago] ('5511999555002',)
2025-08-08 14:09:21,939 - sqlalchemy.engine.Engine - INFO - [cached since 93.26s ago] ('5511999555002',)
2025-08-08 14:09:21,939 - app.routes.webhook - INFO - ✅ Processamento: hybrid | Agente: receptionist | Tempo: 1.34s
2025-08-08 14:09:21,939 - app.routes.webhook - INFO - 💬 Resposta gerada: Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma...
2025-08-08 14:09:21,939 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:09:21,939 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999555003: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:21,939 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:09:21,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:09:21,940 - app.routes.webhook - ERROR - ❌ Erro no sistema híbrido principal: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 58, 'content': 'Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma informação ou se houv ... (786 characters truncated) ... , 'topics_detected': []}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 48, 'direction': 'outbound', 'message_id': None}]]
2025-08-08 14:09:21,943 - app.routes.webhook - ERROR - Traceback: Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type LeadCategory is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/routes/webhook.py", line 678, in _process_and_respond
    await MessageService.create_message(
    ...<12 lines>...
    )
  File "/home/vancim/whats_agent/app/services/data.py", line 197, in create_message
    await db.commit()
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1818, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 58, 'content': 'Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma informação ou se houv ... (786 characters truncated) ... , 'topics_detected': []}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 48, 'direction': 'outbound', 'message_id': None}]]

2025-08-08 14:09:21,944 - app.routes.webhook - ERROR - Erro no sistema dinâmico integrado: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 58, 'content': 'Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma informação ou se houv ... (786 characters truncated) ... , 'topics_detected': []}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 48, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-08-08 14:09:21,944 - app.routes.webhook - ERROR - Erro ao processar mensagem individual: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 58, 'content': 'Olá! Tudo bem? Agradeço pelo seu contato. Nós funcionamos no domingo sim! Se precisar de mais alguma informação ou se houv ... (786 characters truncated) ... , 'topics_detected': []}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 48, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:     127.0.0.1:42506 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:21,945 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:21,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:21,945 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,945 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,945 INFO sqlalchemy.engine.Engine [cached since 93.26s ago] (669,)
2025-08-08 14:09:21,945 - sqlalchemy.engine.Engine - INFO - [cached since 93.26s ago] (669,)
2025-08-08 14:09:21,946 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:21,946 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:21,946 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (56, 'active', 'human')
2025-08-08 14:09:21,946 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (56, 'active', 'human')
2025-08-08 14:09:21,946 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,946 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,947 INFO sqlalchemy.engine.Engine [cached since 93.26s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 946731), 47)
2025-08-08 14:09:21,947 - sqlalchemy.engine.Engine - INFO - [cached since 93.26s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 946731), 47)
2025-08-08 14:09:21,947 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,947 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,947 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:21,947 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:21,947 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (56, 46, 'in', 'wamid.test_1754672960', 'Quais são os preços dos serviços?', 'text', '{"from": "5511999555002", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Quais s\\u00e3o os pre\\u00e7os dos servi\\u00e7os?"}, "type": "text"}')
2025-08-08 14:09:21,947 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (56, 46, 'in', 'wamid.test_1754672960', 'Quais são os preços dos serviços?', 'text', '{"from": "5511999555002", "id": "wamid.test_1754672960", "timestamp": "1754672960", "text": {"body": "Quais s\\u00e3o os pre\\u00e7os dos servi\\u00e7os?"}, "type": "text"}')
2025-08-08 14:09:21,948 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999555001
INFO:     127.0.0.1:42494 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:09:21,949 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,949 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,949 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:21,949 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:21,950 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,950 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,950 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (670,)
2025-08-08 14:09:21,950 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (670,)
2025-08-08 14:09:21,950 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,950 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,951 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 950738), 46)
2025-08-08 14:09:21,951 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 950738), 46)
2025-08-08 14:09:21,951 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,951 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:21,952 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:21,952 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:21,952 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:21,952 INFO sqlalchemy.engine.Engine [cached since 93.26s ago] (46, 10)
2025-08-08 14:09:21,952 - sqlalchemy.engine.Engine - INFO - [cached since 93.26s ago] (46, 10)
2025-08-08 14:09:21,952 - app.routes.webhook - INFO - 🗓️ Mensagem de agendamento detectada para 5511999555002: Quais são os preços dos serviços?
2025-08-08 14:09:21,953 - app.services.whatsapp - ERROR - Falha definitiva ao enviar botões para 5511999555002: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:21,953 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:21,953 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:21,953 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (56, 46, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:21,953 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (56, 46, 'out', None, '🔸 **Qual serviço você gostaria de agendar?**\n\nEscolha uma das opções abaixo:', 'text', '{"metadata": {"processing_system": "booking_workflow", "system_used": "booking_primary", "has_buttons": true}}')
2025-08-08 14:09:21,953 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,953 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,954 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:21,954 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:21,954 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,954 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:21,955 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (671,)
2025-08-08 14:09:21,955 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (671,)
2025-08-08 14:09:21,956 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,956 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:21,956 INFO sqlalchemy.engine.Engine [cached since 93.27s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 955819), 46)
2025-08-08 14:09:21,956 - sqlalchemy.engine.Engine - INFO - [cached since 93.27s ago] (datetime.datetime(2025, 8, 8, 17, 9, 21, 955819), 46)
2025-08-08 14:09:21,956 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:21,956 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:21,957 - app.routes.webhook - INFO - ✅ Resposta de agendamento enviada para 5511999555002
INFO:     127.0.0.1:42508 - "POST /webhook HTTP/1.1" 200 OK
INFO:     127.0.0.1:60400 - "GET /health HTTP/1.1" 200 OK
2025-08-08 14:09:27,962 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:27,962 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:27,962 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:27,962 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:09:27,962 INFO sqlalchemy.engine.Engine [cached since 99.29s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... ple_1754672967", "timestamp": "1754672967", "text": {"body": "Ol\\u00e1, este \\u00e9 um teste simples"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:27,962 - sqlalchemy.engine.Engine - INFO - [cached since 99.29s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-type": "application/json", "content-length": "483"}', '{"entry": [{"id": "PHONE_NUMBER_ID_TEST", "changes": [{"value": {"messaging_product": "whatsapp", "metadata": {"display_phone_number": "5511999887766 ... (187 characters truncated) ... ple_1754672967", "timestamp": "1754672967", "text": {"body": "Ol\\u00e1, este \\u00e9 um teste simples"}, "type": "text"}]}, "field": "messages"}]}]}')
2025-08-08 14:09:27,963 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:27,963 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:27,964 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:27,964 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:27,964 INFO sqlalchemy.engine.Engine SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:27,964 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.wa_id, users.nome, users.telefone, users.email, users.created_at, users.updated_at 
FROM users 
WHERE users.wa_id = $1::VARCHAR
2025-08-08 14:09:27,964 INFO sqlalchemy.engine.Engine [cached since 99.29s ago] ('5511999000000',)
2025-08-08 14:09:27,964 - sqlalchemy.engine.Engine - INFO - [cached since 99.29s ago] ('5511999000000',)
2025-08-08 14:09:27,965 INFO sqlalchemy.engine.Engine SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:27,965 - sqlalchemy.engine.Engine - INFO - SELECT conversations.id, conversations.user_id, conversations.status, conversations.last_message_at, conversations.created_at, conversations.updated_at 
FROM conversations 
WHERE conversations.user_id = $1::INTEGER AND conversations.status IN ($2::VARCHAR, $3::VARCHAR) ORDER BY conversations.created_at DESC
2025-08-08 14:09:27,965 INFO sqlalchemy.engine.Engine [cached since 99.29s ago] (51, 'active', 'human')
2025-08-08 14:09:27,965 - sqlalchemy.engine.Engine - INFO - [cached since 99.29s ago] (51, 'active', 'human')
2025-08-08 14:09:27,966 INFO sqlalchemy.engine.Engine INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:27,966 - sqlalchemy.engine.Engine - INFO - INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at
2025-08-08 14:09:27,966 INFO sqlalchemy.engine.Engine [cached since 99.29s ago] (51, 41, 'in', 'wamid.test_simple_1754672967', 'Olá, este é um teste simples', 'text', '{"from": "5511999000000", "id": "wamid.test_simple_1754672967", "timestamp": "1754672967", "text": {"body": "Ol\\u00e1, este \\u00e9 um teste simples"}, "type": "text"}')
2025-08-08 14:09:27,966 - sqlalchemy.engine.Engine - INFO - [cached since 99.29s ago] (51, 41, 'in', 'wamid.test_simple_1754672967', 'Olá, este é um teste simples', 'text', '{"from": "5511999000000", "id": "wamid.test_simple_1754672967", "timestamp": "1754672967", "text": {"body": "Ol\\u00e1, este \\u00e9 um teste simples"}, "type": "text"}')
2025-08-08 14:09:27,966 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:27,966 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:27,967 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:27,967 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:27,968 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:27,968 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.id = $1::INTEGER
2025-08-08 14:09:27,968 INFO sqlalchemy.engine.Engine [cached since 99.28s ago] (672,)
2025-08-08 14:09:27,968 - sqlalchemy.engine.Engine - INFO - [cached since 99.28s ago] (672,)
2025-08-08 14:09:27,968 INFO sqlalchemy.engine.Engine UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:27,968 - sqlalchemy.engine.Engine - INFO - UPDATE conversations SET last_message_at=$1::TIMESTAMP WITH TIME ZONE, updated_at=now() WHERE conversations.id = $2::INTEGER
2025-08-08 14:09:27,968 INFO sqlalchemy.engine.Engine [cached since 99.28s ago] (datetime.datetime(2025, 8, 8, 17, 9, 27, 968616), 41)
2025-08-08 14:09:27,968 - sqlalchemy.engine.Engine - INFO - [cached since 99.28s ago] (datetime.datetime(2025, 8, 8, 17, 9, 27, 968616), 41)
2025-08-08 14:09:27,969 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:09:27,969 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:09:27,970 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:09:27,970 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:09:27,970 INFO sqlalchemy.engine.Engine SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:27,970 - sqlalchemy.engine.Engine - INFO - SELECT messages.id, messages.user_id, messages.conversation_id, messages.direction, messages.message_id, messages.content, messages.message_type, messages.raw_payload, messages.created_at 
FROM messages 
WHERE messages.conversation_id = $1::INTEGER ORDER BY messages.created_at DESC 
 LIMIT $2::INTEGER
2025-08-08 14:09:27,970 INFO sqlalchemy.engine.Engine [cached since 99.28s ago] (41, 10)
2025-08-08 14:09:27,970 - sqlalchemy.engine.Engine - INFO - [cached since 99.28s ago] (41, 10)
2025-08-08 14:09:27,971 - app.routes.webhook - INFO - 🤖 Processando mensagem 'Olá, este é um teste simples' do usuário 5511999000000
2025-08-08 14:09:27,971 - app.services.strategy_compatibility - ERROR - Erro no novo sistema, usando fallback: StrategyManager.process() got an unexpected keyword argument 'conversation_id'
2025-08-08 14:09:27,971 - app.services.hybrid_llm_crew - WARNING - Erro na análise LLM inicial: 'NoneType' object has no attribute 'process_message'
2025-08-08 14:09:27,971 - app.services.lead_scoring - INFO - Lead scored: 5511999000000 - Score: 0.28 - Category: cold
2025-08-08 14:09:27,971 - app.services.hybrid_llm_crew - INFO - Lead Score recebido: LeadScore(total_score=0.28, category=<LeadCategory.COLD: 'cold'>, factors={'urgency_indicators': 0, 'price_sensitivity': 0.0, 'service_specificity': 0, 'decision_authority': 0, 'previous_purchases': 0, 'interaction_frequency': 2, 'response_speed': 0, 'loyalty_indicators': 0, 'geographic_value': 0, 'time_preference': 0, 'communication_quality': 2, 'buying_signals': 0.0, 'timeline_urgency': 0, 'budget_indicators': 0}, recommendations=['📚 Educar sobre benefícios', '🔄 Follow-up semanal', '👥 Adicionar à campanha de nurturing'], priority_level=1, confidence=0.56, next_actions=['Responder em até 24 horas', 'Enviar conteúdo introdutório', 'Adicionar à campanha de nurturing', 'Follow-up semanal'], estimated_value=50.0, conversion_probability=0.0), type: <class 'app.services.lead_scoring.LeadScore'>
2025-08-08 14:09:27,971 - app.services.hybrid_llm_crew - INFO - Lead Score processado: score=0.28, confidence=0.56, category=LeadCategory.COLD, priority=1
2025-08-08 14:09:27,971 - app.services.hybrid_llm_crew - INFO - Estratégia hybrid por baixa confiança: 0.56
2025-08-08 14:09:27,971 - app.services.hybrid_llm_crew - INFO - Estratégia selecionada: hybrid para: Olá, este é um teste simples...
2025-08-08 14:09:27,971 - app.services.conversation_flow - INFO - Flow decision for 5511999000000: natural_progression → greeting
2025-08-08 14:09:27,971 - app.services.lead_scoring - INFO - Lead scored: 5511999000000 - Score: 0.44 - Category: cold
╭────────────────────────────────────────────────────── 🤖 Agent Started ───────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Task:                                                                                                                        │
│                                                                                                                               │
│          Mensagem do cliente: "Olá, este é um teste simples"                                                                  │
│          Telefone: 5511999000000                                                                                              │
│          Intenção detectada: saudacao                                                                                         │
│          Contexto adicional: {'user_id': '5511999000000', 'analysis': {'llm_response': None, 'intent': None, 'confidence':    │
│  0.0, 'conversation_state': 'unknown', 'context_available': False, 'message_complexity': 'medium', 'customer_value':          │
│  'standard'}, 'timestamp': '2025-08-08T14:09:27.971604'}                                                                      │
│                                                                                                                               │
│          INFORMAÇÕES DO LEAD:                                                                                                 │
│          - Score: 0.44/100 (COLD)                                                                                             │
│          - Prioridade: 1/5                                                                                                    │
│          - Valor Estimado: R$ 50.00                                                                                           │
│          - Probabilidade de Conversão: 0.0%                                                                                   │
│          - Recomendações: 📚 Educar sobre benefícios, 🔄 Follow-up semanal                                                    │
│                                                                                                                               │
│                                                                                                                               │
│          CONTEXTO DA CONVERSA:                                                                                                │
│          - Estado da Conversa: GREETING                                                                                       │
│          - Tipo de Transição: natural_progression                                                                             │
│          - Confiança: 77.5%                                                                                                   │
│          - Tópicos Ativos: greeting                                                                                           │
│          - Instruções Especiais: Primary topic detected: Cumprimentos (confidence: 0.25). Following natural conversation      │
│  flow. Current state: greeting → Next state: greeting                                                                         │
│                                                                                                                               │
│                                                                                                                               │
│                                                                                                                               │
│              Como recepcionista inteligente, você deve:                                                                       │
│                                                                                                                               │
│              💡 SUGESTÃO: Perfeito, sobre Cumprimentos...                                                                     │
│                                                                                                                               │
│              SUAS RESPONSABILIDADES:                                                                                          │
│              1. Manter continuidade da conversa considerando o contexto                                                       │
│              2. Ser natural na transição entre tópicos                                                                        │
│              3. Reconhecer quando o cliente muda de assunto                                                                   │
│              4. Fornecer informações relevantes ao momento da conversa                                                        │
│              5. Direcionar adequadamente quando necessário                                                                    │
│                                                                                                                               │
│                                                                                                                               │
│              💙 LEAD FRIO: Cultive o relacionamento                                                                           │
│              - Seja educativo e informativo                                                                                   │
│              - Construa confiança gradualmente                                                                                │
│              - Não pressione por vendas                                                                                       │
│              - Ofereça valor através de informações                                                                           │
│                                                                                                                               │
│                                                                                                                               │
│              IMPORTANTE: Seja conversacional e adaptável. Se o cliente mudou de assunto,                                      │
│              acompanhe naturalmente. Se está retomando algo anterior, demonstre que lembra.                                   │
│                                                                                                                               │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

[92m14:09:27 - LiteLLM:INFO[0m: utils.py:3224 - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:09:27,978 - LiteLLM - INFO - 
LiteLLM completion() model= gpt-4o-mini; provider = openai
2025-08-08 14:09:29,957 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[92m14:09:29 - LiteLLM:INFO[0m: utils.py:1236 - Wrapper: Completed Call, calling success_handler
2025-08-08 14:09:29,971 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
╭──────────────────────────────────────────────────── ✅ Agent Final Answer ────────────────────────────────────────────────────╮
│                                                                                                                               │
│  Agent: Recepcionista Virtual                                                                                                 │
│                                                                                                                               │
│  Final Answer:                                                                                                                │
│  Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar. Apenas um teste        │
│  simples, mas se precisar de alguma informação ou tiver alguma dúvida, estou aqui para ajudar! Você gostaria de saber mais    │
│  sobre nossos serviços ou como podemos te apoiar? Fique à vontade para perguntar!                                             │
│                                                                                                                               │
╰───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

2025-08-08 14:09:29,976 - app.routes.webhook - INFO - ✅ Processamento: hybrid | Agente: receptionist | Tempo: 2.00s
2025-08-08 14:09:29,976 - app.routes.webhook - INFO - 💬 Resposta gerada: Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar....
2025-08-08 14:09:29,976 - app.routes.webhook - INFO - 📤 Enviando resposta de texto simples
2025-08-08 14:09:29,976 - app.services.whatsapp - ERROR - Falha definitiva ao enviar mensagem para 5511999000000: Circuit breaker OPEN para whatsapp_api
2025-08-08 14:09:29,976 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:09:29,976 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:09:29,977 - app.routes.webhook - ERROR - ❌ Erro no sistema híbrido principal: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 51, 'content': 'Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar. Apenas um teste simpl ... (1048 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 41, 'direction': 'outbound', 'message_id': None}]]
2025-08-08 14:09:29,980 - app.routes.webhook - ERROR - Traceback: Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type LeadCategory is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/routes/webhook.py", line 678, in _process_and_respond
    await MessageService.create_message(
    ...<12 lines>...
    )
  File "/home/vancim/whats_agent/app/services/data.py", line 197, in create_message
    await db.commit()
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1818, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1812, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1477, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 2747, in process
    return json_serializer(value)
  File "/home/vancim/anaconda3/lib/python3.13/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 261, in iterencode
    return _iterencode(o, 0)
  File "/home/vancim/anaconda3/lib/python3.13/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
sqlalchemy.exc.StatementError: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 51, 'content': 'Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar. Apenas um teste simpl ... (1048 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 41, 'direction': 'outbound', 'message_id': None}]]

2025-08-08 14:09:29,981 - app.routes.webhook - ERROR - Erro no sistema dinâmico integrado: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 51, 'content': 'Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar. Apenas um teste simpl ... (1048 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 41, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
2025-08-08 14:09:29,981 - app.routes.webhook - ERROR - Erro ao processar mensagem individual: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (builtins.TypeError) Object of type LeadCategory is not JSON serializable
[SQL: INSERT INTO messages (user_id, conversation_id, direction, message_id, content, message_type, raw_payload) VALUES ($1::INTEGER, $2::INTEGER, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR, $7::JSON) RETURNING messages.id, messages.created_at]
[parameters: [{'user_id': 51, 'content': 'Olá! 😊 Que bom que você entrou em contato! Este é um espaço onde estamos sempre prontos para ajudar. Apenas um teste simpl ... (1048 characters truncated) ... detected': ['greeting']}}, 'response_time': 0}, 'system_used': 'hybrid_primary'}}, 'conversation_id': 41, 'direction': 'outbound', 'message_id': None}]] (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:     127.0.0.1:60412 - "POST /webhook HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_dashboard_integration.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:23:23,008 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:23:23,008 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:23:23,008 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [79579]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_dashboard_integration.py'. Reloading...
INFO:     Started server process [80995]
INFO:     Waiting for application startup.
2025-08-08 14:23:26,860 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:23:26,862 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:23:26,881 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:23:26,881 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:23:26,881 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:26,881 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:26,882 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:23:26,882 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:23:26,882 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:26,882 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:26,883 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:23:26,883 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:23:26,883 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:26,883 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:26,883 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:23:26,883 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:23:26,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,886 INFO sqlalchemy.engine.Engine [generated in 0.00022s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,886 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,888 INFO sqlalchemy.engine.Engine [cached since 0.002202s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.002202s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,889 INFO sqlalchemy.engine.Engine [cached since 0.002665s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.002665s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,889 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,889 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,889 INFO sqlalchemy.engine.Engine [cached since 0.003048s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.003048s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,889 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,889 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,889 INFO sqlalchemy.engine.Engine [cached since 0.003413s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.003413s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine [cached since 0.003791s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.003791s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine [cached since 0.004199s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.004199s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,890 INFO sqlalchemy.engine.Engine [cached since 0.004472s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.004472s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine [cached since 0.004728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.004728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine [cached since 0.005022s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.005022s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine [cached since 0.005308s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.005308s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,891 INFO sqlalchemy.engine.Engine [cached since 0.005618s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.005618s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine [cached since 0.005878s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.005878s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine [cached since 0.00615s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.00615s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:26,892 INFO sqlalchemy.engine.Engine [cached since 0.006428s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.006428s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:26,893 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:23:26,893 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:23:26,893 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:23:26,894 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:23:26,894 - app.main - INFO - Cache service inicializado
2025-08-08 14:23:26,894 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:23:26,894 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81058]
INFO:     Waiting for application startup.
2025-08-08 14:23:30,334 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:23:30,336 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:23:30,355 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:23:30,355 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:23:30,355 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:30,355 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:30,356 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:23:30,356 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:23:30,356 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:30,356 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:30,357 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:23:30,357 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:23:30,357 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:23:30,357 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:23:30,358 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:23:30,358 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:23:30,361 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,361 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,361 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,361 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,363 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,363 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,363 INFO sqlalchemy.engine.Engine [cached since 0.002167s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,363 - sqlalchemy.engine.Engine - INFO - [cached since 0.002167s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,363 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,363 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,363 INFO sqlalchemy.engine.Engine [cached since 0.00255s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,363 - sqlalchemy.engine.Engine - INFO - [cached since 0.00255s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,363 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,363 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,364 INFO sqlalchemy.engine.Engine [cached since 0.002896s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,364 - sqlalchemy.engine.Engine - INFO - [cached since 0.002896s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,364 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,364 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,364 INFO sqlalchemy.engine.Engine [cached since 0.003297s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,364 - sqlalchemy.engine.Engine - INFO - [cached since 0.003297s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,364 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,364 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,364 INFO sqlalchemy.engine.Engine [cached since 0.003694s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,364 - sqlalchemy.engine.Engine - INFO - [cached since 0.003694s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine [cached since 0.004069s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - [cached since 0.004069s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine [cached since 0.004347s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - [cached since 0.004347s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine [cached since 0.004612s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - [cached since 0.004612s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,365 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine [cached since 0.004876s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - [cached since 0.004876s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine [cached since 0.005179s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - [cached since 0.005179s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine [cached since 0.005456s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - [cached since 0.005456s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,366 INFO sqlalchemy.engine.Engine [cached since 0.005716s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,366 - sqlalchemy.engine.Engine - INFO - [cached since 0.005716s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,367 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,367 INFO sqlalchemy.engine.Engine [cached since 0.005967s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,367 - sqlalchemy.engine.Engine - INFO - [cached since 0.005967s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,367 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:23:30,367 INFO sqlalchemy.engine.Engine [cached since 0.006229s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,367 - sqlalchemy.engine.Engine - INFO - [cached since 0.006229s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:23:30,367 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:23:30,367 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:23:30,367 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:23:30,368 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:23:30,368 - app.main - INFO - Cache service inicializado
2025-08-08 14:23:30,368 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:23:30,368 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_stress_load.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:24:41,730 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:24:41,730 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:24:41,730 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81058]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_stress_load.py'. Reloading...
INFO:     Started server process [81105]
INFO:     Waiting for application startup.
2025-08-08 14:24:44,982 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:24:44,983 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:24:45,002 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:24:45,002 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:24:45,002 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:45,002 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:45,003 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:24:45,003 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:24:45,003 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:45,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:45,003 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:24:45,003 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:24:45,003 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:45,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:45,004 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:24:45,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:24:45,006 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,006 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,006 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,006 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,008 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,008 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,008 INFO sqlalchemy.engine.Engine [cached since 0.001774s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,008 - sqlalchemy.engine.Engine - INFO - [cached since 0.001774s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,008 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,008 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,008 INFO sqlalchemy.engine.Engine [cached since 0.002192s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,008 - sqlalchemy.engine.Engine - INFO - [cached since 0.002192s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,009 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,009 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,009 INFO sqlalchemy.engine.Engine [cached since 0.002594s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,009 - sqlalchemy.engine.Engine - INFO - [cached since 0.002594s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,009 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,009 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,009 INFO sqlalchemy.engine.Engine [cached since 0.003092s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,009 - sqlalchemy.engine.Engine - INFO - [cached since 0.003092s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,009 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,009 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine [cached since 0.003465s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - [cached since 0.003465s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine [cached since 0.003837s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - [cached since 0.003837s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine [cached since 0.004105s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - [cached since 0.004105s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,010 INFO sqlalchemy.engine.Engine [cached since 0.004359s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,010 - sqlalchemy.engine.Engine - INFO - [cached since 0.004359s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine [cached since 0.004609s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - [cached since 0.004609s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine [cached since 0.004857s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - [cached since 0.004857s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,011 INFO sqlalchemy.engine.Engine [cached since 0.005207s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,011 - sqlalchemy.engine.Engine - INFO - [cached since 0.005207s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine [cached since 0.005531s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - [cached since 0.005531s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine [cached since 0.005841s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - [cached since 0.005841s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine [cached since 0.006125s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - [cached since 0.006125s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:45,012 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:24:45,012 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:24:45,013 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:24:45,014 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:24:45,014 - app.main - INFO - Cache service inicializado
2025-08-08 14:24:45,014 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:24:45,014 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81117]
INFO:     Waiting for application startup.
2025-08-08 14:24:48,031 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:24:48,033 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:24:48,050 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:24:48,050 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:24:48,051 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:48,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:48,051 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:24:48,051 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:24:48,051 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:48,051 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:48,052 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:24:48,052 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:24:48,052 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:24:48,052 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:24:48,053 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:24:48,053 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:24:48,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,055 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,055 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,055 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,056 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,056 INFO sqlalchemy.engine.Engine [cached since 0.001659s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,056 - sqlalchemy.engine.Engine - INFO - [cached since 0.001659s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine [cached since 0.002021s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - [cached since 0.002021s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine [cached since 0.002365s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - [cached since 0.002365s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,057 INFO sqlalchemy.engine.Engine [cached since 0.002686s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,057 - sqlalchemy.engine.Engine - INFO - [cached since 0.002686s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine [cached since 0.002998s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.002998s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine [cached since 0.003336s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.003336s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine [cached since 0.003591s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.003591s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,058 INFO sqlalchemy.engine.Engine [cached since 0.003832s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.003832s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine [cached since 0.004081s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.004081s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine [cached since 0.004323s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.004323s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine [cached since 0.004575s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.004575s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,059 INFO sqlalchemy.engine.Engine [cached since 0.004814s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.004814s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,060 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,060 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,060 INFO sqlalchemy.engine.Engine [cached since 0.005054s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,060 - sqlalchemy.engine.Engine - INFO - [cached since 0.005054s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,060 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,060 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:24:48,060 INFO sqlalchemy.engine.Engine [cached since 0.005293s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,060 - sqlalchemy.engine.Engine - INFO - [cached since 0.005293s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:24:48,060 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:24:48,060 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:24:48,060 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:24:48,061 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:24:48,061 - app.main - INFO - Cache service inicializado
2025-08-08 14:24:48,061 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:24:48,061 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_failure_scenarios.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:26:09,023 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:26:09,024 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:26:09,024 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81117]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_failure_scenarios.py'. Reloading...
INFO:     Started server process [81173]
INFO:     Waiting for application startup.
2025-08-08 14:26:12,424 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:26:12,425 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:26:12,445 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:26:12,445 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:26:12,445 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:12,445 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:12,446 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:26:12,446 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:26:12,446 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:12,446 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:12,447 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:26:12,447 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:26:12,447 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:12,447 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:12,447 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:26:12,447 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:26:12,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,450 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,450 INFO sqlalchemy.engine.Engine [generated in 0.00025s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,450 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,451 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,451 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,452 INFO sqlalchemy.engine.Engine [cached since 0.002033s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.002033s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,452 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,452 INFO sqlalchemy.engine.Engine [cached since 0.002448s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.002448s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,452 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,452 INFO sqlalchemy.engine.Engine [cached since 0.00282s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.00282s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine [cached since 0.00318s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.00318s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine [cached since 0.003532s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.003532s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,453 INFO sqlalchemy.engine.Engine [cached since 0.003875s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.003875s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine [cached since 0.004189s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.004189s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine [cached since 0.004489s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.004489s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine [cached since 0.004769s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.004769s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine [cached since 0.005024s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.005024s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine [cached since 0.005277s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.005277s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine [cached since 0.005545s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.005545s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine [cached since 0.005797s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - [cached since 0.005797s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,455 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,455 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:12,456 INFO sqlalchemy.engine.Engine [cached since 0.00605s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,456 - sqlalchemy.engine.Engine - INFO - [cached since 0.00605s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:12,456 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:26:12,456 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:26:12,456 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:26:12,457 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:26:12,457 - app.main - INFO - Cache service inicializado
2025-08-08 14:26:12,457 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:26:12,457 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81184]
INFO:     Waiting for application startup.
2025-08-08 14:26:15,784 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:26:15,786 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:26:15,804 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:26:15,804 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:26:15,804 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:15,804 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:15,805 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:26:15,805 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:26:15,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:15,805 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:15,806 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:26:15,806 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:26:15,806 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:26:15,806 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:26:15,807 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:26:15,807 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:26:15,809 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,809 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,809 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,809 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,811 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,811 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,811 INFO sqlalchemy.engine.Engine [cached since 0.002286s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,811 - sqlalchemy.engine.Engine - INFO - [cached since 0.002286s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,812 INFO sqlalchemy.engine.Engine [cached since 0.002779s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,812 - sqlalchemy.engine.Engine - INFO - [cached since 0.002779s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,812 INFO sqlalchemy.engine.Engine [cached since 0.003143s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,812 - sqlalchemy.engine.Engine - INFO - [cached since 0.003143s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine [cached since 0.003478s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.003478s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine [cached since 0.003811s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.003811s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine [cached since 0.004162s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.004162s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,813 INFO sqlalchemy.engine.Engine [cached since 0.004419s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.004419s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine [cached since 0.004671s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.004671s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine [cached since 0.00499s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.00499s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,814 INFO sqlalchemy.engine.Engine [cached since 0.00526s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.00526s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine [cached since 0.005611s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.005611s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine [cached since 0.005952s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.005952s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine [cached since 0.006207s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.006207s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:26:15,816 INFO sqlalchemy.engine.Engine [cached since 0.006459s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.006459s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:26:15,816 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:26:15,816 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:26:15,816 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:26:15,817 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:26:15,817 - app.main - INFO - Cache service inicializado
2025-08-08 14:26:15,817 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:26:15,817 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_end_to_end.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:27:52,108 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:27:52,108 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:27:52,108 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81184]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/test_end_to_end.py'. Reloading...
INFO:     Started server process [81252]
INFO:     Waiting for application startup.
2025-08-08 14:27:55,465 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:27:55,466 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:27:55,485 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:27:55,485 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:27:55,485 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:55,485 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:55,486 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:27:55,486 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:27:55,486 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:55,486 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:55,486 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:27:55,486 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:27:55,486 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:55,486 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:55,487 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:27:55,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:27:55,489 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,489 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,489 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,491 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,491 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,491 INFO sqlalchemy.engine.Engine [cached since 0.001851s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.001851s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,491 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,491 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,491 INFO sqlalchemy.engine.Engine [cached since 0.002341s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.002341s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine [cached since 0.002689s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.002689s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine [cached since 0.003037s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.003037s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,492 INFO sqlalchemy.engine.Engine [cached since 0.003364s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.003364s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine [cached since 0.003693s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.003693s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine [cached since 0.003952s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.003952s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine [cached since 0.004207s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.004207s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine [cached since 0.004457s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - [cached since 0.004457s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine [cached since 0.004697s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - [cached since 0.004697s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine [cached since 0.004949s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - [cached since 0.004949s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine [cached since 0.00519s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - [cached since 0.00519s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,494 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,494 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,495 INFO sqlalchemy.engine.Engine [cached since 0.005426s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,495 - sqlalchemy.engine.Engine - INFO - [cached since 0.005426s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,495 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,495 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:55,495 INFO sqlalchemy.engine.Engine [cached since 0.005673s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,495 - sqlalchemy.engine.Engine - INFO - [cached since 0.005673s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:55,495 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:27:55,495 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:27:55,495 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:27:55,496 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:27:55,496 - app.main - INFO - Cache service inicializado
2025-08-08 14:27:55,496 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:27:55,496 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81269]
INFO:     Waiting for application startup.
2025-08-08 14:27:58,634 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:27:58,635 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:27:58,654 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:27:58,654 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:27:58,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:58,654 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:58,655 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:27:58,655 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:27:58,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:58,655 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:58,655 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:27:58,655 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:27:58,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:27:58,655 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:27:58,656 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:27:58,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:27:58,658 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,658 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,658 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,658 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine [cached since 0.001676s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.001676s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine [cached since 0.002078s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.002078s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,660 INFO sqlalchemy.engine.Engine [cached since 0.002463s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,660 - sqlalchemy.engine.Engine - INFO - [cached since 0.002463s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine [cached since 0.002828s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - [cached since 0.002828s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine [cached since 0.003161s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - [cached since 0.003161s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,661 INFO sqlalchemy.engine.Engine [cached since 0.003493s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,661 - sqlalchemy.engine.Engine - INFO - [cached since 0.003493s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine [cached since 0.003745s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.003745s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine [cached since 0.003997s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.003997s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine [cached since 0.00426s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.00426s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,662 INFO sqlalchemy.engine.Engine [cached since 0.004506s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,662 - sqlalchemy.engine.Engine - INFO - [cached since 0.004506s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine [cached since 0.004755s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.004755s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine [cached since 0.004994s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.004994s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine [cached since 0.00524s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.00524s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:27:58,663 INFO sqlalchemy.engine.Engine [cached since 0.005484s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,663 - sqlalchemy.engine.Engine - INFO - [cached since 0.005484s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:27:58,664 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:27:58,664 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:27:58,664 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:27:58,665 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:27:58,665 - app.main - INFO - Cache service inicializado
2025-08-08 14:27:58,665 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:27:58,665 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/run_advanced_tests.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:28:09,083 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:28:09,084 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:28:09,084 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81269]
WARNING:  WatchFiles detected changes in 'tests/run_advanced_tests.py'. Reloading...
INFO:     Started server process [81289]
INFO:     Waiting for application startup.
2025-08-08 14:28:12,372 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:28:12,373 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:28:12,392 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:28:12,392 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:28:12,392 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:12,392 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:12,393 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:28:12,393 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:28:12,393 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:12,393 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:12,394 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:28:12,394 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:28:12,394 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:12,394 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:12,394 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:28:12,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:28:12,396 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,396 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,397 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,397 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,398 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,398 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,398 INFO sqlalchemy.engine.Engine [cached since 0.002013s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,398 - sqlalchemy.engine.Engine - INFO - [cached since 0.002013s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine [cached since 0.002416s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.002416s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine [cached since 0.002766s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.002766s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,399 INFO sqlalchemy.engine.Engine [cached since 0.003106s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.003106s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine [cached since 0.003435s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.003435s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine [cached since 0.003784s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.003784s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,400 INFO sqlalchemy.engine.Engine [cached since 0.004045s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.004045s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine [cached since 0.004342s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.004342s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine [cached since 0.004638s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.004638s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,401 INFO sqlalchemy.engine.Engine [cached since 0.004932s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.004932s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine [cached since 0.00527s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.00527s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine [cached since 0.005534s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.005534s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine [cached since 0.005788s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.005788s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:12,402 INFO sqlalchemy.engine.Engine [cached since 0.006043s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.006043s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:12,403 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:28:12,403 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:28:12,403 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:28:12,404 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:28:12,404 - app.main - INFO - Cache service inicializado
2025-08-08 14:28:12,404 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:28:12,404 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81306]
INFO:     Waiting for application startup.
2025-08-08 14:28:15,564 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:28:15,565 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:28:15,583 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:28:15,583 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:28:15,584 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:15,584 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:15,584 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:28:15,584 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:28:15,584 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:15,584 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:15,585 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:28:15,585 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:28:15,585 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:15,585 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:15,586 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:28:15,586 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:28:15,588 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,588 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,588 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,588 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine [cached since 0.001817s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.001817s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine [cached since 0.002188s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.002188s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,590 INFO sqlalchemy.engine.Engine [cached since 0.002535s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.002535s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine [cached since 0.002867s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.002867s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine [cached since 0.003184s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.003184s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,591 INFO sqlalchemy.engine.Engine [cached since 0.003523s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.003523s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine [cached since 0.003783s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.003783s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine [cached since 0.004034s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.004034s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine [cached since 0.004299s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.004299s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,592 INFO sqlalchemy.engine.Engine [cached since 0.004552s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.004552s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine [cached since 0.004809s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.004809s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine [cached since 0.00506s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.00506s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine [cached since 0.005324s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.005324s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:15,593 INFO sqlalchemy.engine.Engine [cached since 0.005578s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.005578s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:15,594 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:28:15,594 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:28:15,594 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:28:15,595 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:28:15,595 - app.main - INFO - Cache service inicializado
2025-08-08 14:28:15,595 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:28:15,595 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/conftest.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:28:43,443 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:28:43,443 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:28:43,443 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81306]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/conftest.py'. Reloading...
INFO:     Started server process [81357]
INFO:     Waiting for application startup.
2025-08-08 14:28:46,917 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:28:46,918 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:28:46,938 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:28:46,938 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:28:46,939 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:46,939 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:46,940 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:28:46,940 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:28:46,940 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:46,940 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:46,940 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:28:46,940 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:28:46,940 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:46,940 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:46,941 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:28:46,941 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:28:46,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,943 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,943 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,943 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,945 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,945 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,945 INFO sqlalchemy.engine.Engine [cached since 0.002075s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.002075s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine [cached since 0.002558s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.002558s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine [cached since 0.002981s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.002981s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,946 INFO sqlalchemy.engine.Engine [cached since 0.003339s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.003339s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine [cached since 0.003672s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.003672s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine [cached since 0.004052s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.004052s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,947 INFO sqlalchemy.engine.Engine [cached since 0.004316s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.004316s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine [cached since 0.004562s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.004562s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine [cached since 0.004829s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.004829s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine [cached since 0.005085s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.005085s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,948 INFO sqlalchemy.engine.Engine [cached since 0.005331s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.005331s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine [cached since 0.00557s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.00557s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine [cached since 0.005814s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.005814s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:46,949 INFO sqlalchemy.engine.Engine [cached since 0.006093s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.006093s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:46,950 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:28:46,950 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:28:46,950 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:28:46,951 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:28:46,951 - app.main - INFO - Cache service inicializado
2025-08-08 14:28:46,951 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:28:46,951 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81370]
INFO:     Waiting for application startup.
2025-08-08 14:28:50,323 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:28:50,324 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:28:50,344 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:28:50,344 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:28:50,344 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:50,344 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:50,345 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:28:50,345 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:28:50,345 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:50,345 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:50,345 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:28:50,345 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:28:50,345 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:28:50,345 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:28:50,346 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:28:50,346 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:28:50,348 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,348 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,350 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,350 INFO sqlalchemy.engine.Engine [cached since 0.001724s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.001724s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,350 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,350 INFO sqlalchemy.engine.Engine [cached since 0.002111s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.002111s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine [cached since 0.002462s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - [cached since 0.002462s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine [cached since 0.002803s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - [cached since 0.002803s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,351 INFO sqlalchemy.engine.Engine [cached since 0.003132s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,351 - sqlalchemy.engine.Engine - INFO - [cached since 0.003132s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine [cached since 0.003474s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - [cached since 0.003474s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine [cached since 0.003736s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - [cached since 0.003736s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine [cached since 0.003998s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - [cached since 0.003998s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,352 INFO sqlalchemy.engine.Engine [cached since 0.00426s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,352 - sqlalchemy.engine.Engine - INFO - [cached since 0.00426s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine [cached since 0.004509s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - [cached since 0.004509s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine [cached since 0.004755s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - [cached since 0.004755s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine [cached since 0.005009s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - [cached since 0.005009s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,353 INFO sqlalchemy.engine.Engine [cached since 0.005257s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,353 - sqlalchemy.engine.Engine - INFO - [cached since 0.005257s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,354 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,354 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:28:50,354 INFO sqlalchemy.engine.Engine [cached since 0.00551s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,354 - sqlalchemy.engine.Engine - INFO - [cached since 0.00551s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:28:50,354 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:28:50,354 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:28:50,354 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:28:50,355 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:28:50,355 - app.main - INFO - Cache service inicializado
2025-08-08 14:28:50,355 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:28:50,355 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/__init__.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:29:27,637 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:29:27,637 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:29:27,637 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81370]
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/__init__.py'. Reloading...
INFO:     Started server process [81457]
INFO:     Waiting for application startup.
2025-08-08 14:29:31,238 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:29:31,239 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:29:31,259 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:29:31,259 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:29:31,259 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:31,259 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:31,260 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:29:31,260 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:29:31,260 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:31,260 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:31,260 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:29:31,260 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:29:31,261 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:31,261 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:31,261 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:29:31,261 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:29:31,263 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,263 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,263 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,263 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,265 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,265 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,265 INFO sqlalchemy.engine.Engine [cached since 0.001983s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,265 - sqlalchemy.engine.Engine - INFO - [cached since 0.001983s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine [cached since 0.002372s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - [cached since 0.002372s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine [cached since 0.002713s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - [cached since 0.002713s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,266 INFO sqlalchemy.engine.Engine [cached since 0.003142s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,266 - sqlalchemy.engine.Engine - INFO - [cached since 0.003142s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine [cached since 0.003514s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - [cached since 0.003514s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine [cached since 0.0039s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - [cached since 0.0039s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,267 INFO sqlalchemy.engine.Engine [cached since 0.004174s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,267 - sqlalchemy.engine.Engine - INFO - [cached since 0.004174s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine [cached since 0.004439s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - [cached since 0.004439s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine [cached since 0.004719s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - [cached since 0.004719s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,268 INFO sqlalchemy.engine.Engine [cached since 0.005066s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,268 - sqlalchemy.engine.Engine - INFO - [cached since 0.005066s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine [cached since 0.005359s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.005359s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine [cached since 0.005648s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.005648s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine [cached since 0.005932s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.005932s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:31,269 INFO sqlalchemy.engine.Engine [cached since 0.006218s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,269 - sqlalchemy.engine.Engine - INFO - [cached since 0.006218s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:31,270 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:29:31,270 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:29:31,270 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:29:31,271 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:29:31,271 - app.main - INFO - Cache service inicializado
2025-08-08 14:29:31,271 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:29:31,271 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81491]
INFO:     Waiting for application startup.
2025-08-08 14:29:34,494 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:29:34,495 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:29:34,514 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:29:34,514 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:29:34,514 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:34,514 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:34,515 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:29:34,515 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:29:34,515 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:34,515 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:34,516 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:29:34,516 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:29:34,516 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:29:34,516 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:29:34,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:29:34,516 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:29:34,519 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,519 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,519 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,519 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,521 INFO sqlalchemy.engine.Engine [cached since 0.002482s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,521 - sqlalchemy.engine.Engine - INFO - [cached since 0.002482s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,522 INFO sqlalchemy.engine.Engine [cached since 0.002975s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.002975s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,522 INFO sqlalchemy.engine.Engine [cached since 0.003469s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.003469s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,522 INFO sqlalchemy.engine.Engine [cached since 0.003905s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.003905s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,523 INFO sqlalchemy.engine.Engine [cached since 0.004416s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.004416s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,523 INFO sqlalchemy.engine.Engine [cached since 0.00481s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.00481s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine [cached since 0.005084s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.005084s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine [cached since 0.005346s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.005346s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine [cached since 0.00562s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.00562s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,524 INFO sqlalchemy.engine.Engine [cached since 0.005872s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.005872s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine [cached since 0.006123s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.006123s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine [cached since 0.006369s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.006369s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine [cached since 0.006625s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.006625s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:29:34,525 INFO sqlalchemy.engine.Engine [cached since 0.00687s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.00687s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:29:34,526 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:29:34,526 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:29:34,526 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:29:34,527 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:29:34,527 - app.main - INFO - Cache service inicializado
2025-08-08 14:29:34,527 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:29:34,527 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'tests/test_basic_advanced.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:30:53,079 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:30:53,079 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:30:53,079 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81491]
WARNING:  WatchFiles detected changes in 'tests/test_basic_advanced.py'. Reloading...
INFO:     Started server process [81643]
INFO:     Waiting for application startup.
2025-08-08 14:30:56,320 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:30:56,321 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:30:56,340 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:30:56,340 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:30:56,340 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:56,340 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:56,341 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:30:56,341 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:30:56,341 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:56,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:56,341 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:30:56,341 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:30:56,341 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:56,341 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:56,342 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:30:56,342 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:30:56,344 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,344 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,344 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,344 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,346 INFO sqlalchemy.engine.Engine [cached since 0.001869s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.001869s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,346 INFO sqlalchemy.engine.Engine [cached since 0.002383s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.002383s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,347 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,347 INFO sqlalchemy.engine.Engine [cached since 0.002819s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.002819s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,347 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,347 INFO sqlalchemy.engine.Engine [cached since 0.003241s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.003241s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine [cached since 0.003613s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - [cached since 0.003613s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine [cached since 0.004022s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - [cached since 0.004022s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,348 INFO sqlalchemy.engine.Engine [cached since 0.004302s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,348 - sqlalchemy.engine.Engine - INFO - [cached since 0.004302s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine [cached since 0.004572s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.004572s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine [cached since 0.004862s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.004862s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine [cached since 0.005138s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.005138s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,349 INFO sqlalchemy.engine.Engine [cached since 0.005391s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,349 - sqlalchemy.engine.Engine - INFO - [cached since 0.005391s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine [cached since 0.00566s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.00566s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine [cached since 0.005907s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.005907s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:56,350 INFO sqlalchemy.engine.Engine [cached since 0.006179s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,350 - sqlalchemy.engine.Engine - INFO - [cached since 0.006179s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:56,351 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:30:56,351 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:30:56,351 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:30:56,351 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:30:56,351 - app.main - INFO - Cache service inicializado
2025-08-08 14:30:56,351 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:30:56,351 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [81662]
INFO:     Waiting for application startup.
2025-08-08 14:30:59,553 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:30:59,555 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:30:59,578 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:30:59,578 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:30:59,578 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:59,578 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:59,580 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:30:59,580 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:30:59,580 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:59,580 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:59,582 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:30:59,582 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:30:59,582 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:30:59,582 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:30:59,583 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:30:59,583 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:30:59,586 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,586 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,586 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,586 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,588 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,588 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,588 INFO sqlalchemy.engine.Engine [cached since 0.002198s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,588 - sqlalchemy.engine.Engine - INFO - [cached since 0.002198s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine [cached since 0.002749s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - [cached since 0.002749s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine [cached since 0.003174s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - [cached since 0.003174s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,589 INFO sqlalchemy.engine.Engine [cached since 0.003546s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,589 - sqlalchemy.engine.Engine - INFO - [cached since 0.003546s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine [cached since 0.003926s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.003926s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine [cached since 0.004294s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.004294s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,590 INFO sqlalchemy.engine.Engine [cached since 0.004565s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,590 - sqlalchemy.engine.Engine - INFO - [cached since 0.004565s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine [cached since 0.004833s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.004833s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine [cached since 0.005091s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.005091s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,591 INFO sqlalchemy.engine.Engine [cached since 0.005485s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.005485s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine [cached since 0.005823s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.005823s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine [cached since 0.006163s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.006163s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,592 INFO sqlalchemy.engine.Engine [cached since 0.0065s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.0065s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,593 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,593 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:30:59,593 INFO sqlalchemy.engine.Engine [cached since 0.00683s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.00683s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:30:59,593 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:30:59,593 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:30:59,593 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:30:59,594 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:30:59,594 - app.main - INFO - Cache service inicializado
2025-08-08 14:30:59,594 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:30:59,594 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     127.0.0.1:56240 - "GET /health HTTP/1.1" 200 OK
2025-08-08 14:31:08,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,549 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,549 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,549 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress00", "text": {"body": "Teste stress b\\u00e1sico 0"}, "type": "text", "id": "wamid.basic_stress_0", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,549 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress00", "text": {"body": "Teste stress b\\u00e1sico 0"}, "type": "text", "id": "wamid.basic_stress_0", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,550 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,550 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56244 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,554 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,554 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,554 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,554 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,554 INFO sqlalchemy.engine.Engine [cached since 0.005164s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress01", "text": {"body": "Teste stress b\\u00e1sico 1"}, "type": "text", "id": "wamid.basic_stress_1", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,554 - sqlalchemy.engine.Engine - INFO - [cached since 0.005164s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress01", "text": {"body": "Teste stress b\\u00e1sico 1"}, "type": "text", "id": "wamid.basic_stress_1", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,554 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,554 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56260 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,557 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,557 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,557 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,557 INFO sqlalchemy.engine.Engine [cached since 0.008637s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress02", "text": {"body": "Teste stress b\\u00e1sico 2"}, "type": "text", "id": "wamid.basic_stress_2", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,557 - sqlalchemy.engine.Engine - INFO - [cached since 0.008637s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress02", "text": {"body": "Teste stress b\\u00e1sico 2"}, "type": "text", "id": "wamid.basic_stress_2", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,558 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,558 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56270 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,561 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,561 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,561 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,561 INFO sqlalchemy.engine.Engine [cached since 0.01238s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress03", "text": {"body": "Teste stress b\\u00e1sico 3"}, "type": "text", "id": "wamid.basic_stress_3", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,561 - sqlalchemy.engine.Engine - INFO - [cached since 0.01238s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress03", "text": {"body": "Teste stress b\\u00e1sico 3"}, "type": "text", "id": "wamid.basic_stress_3", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,562 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,562 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56280 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,564 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,565 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,565 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,565 INFO sqlalchemy.engine.Engine [cached since 0.01592s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress04", "text": {"body": "Teste stress b\\u00e1sico 4"}, "type": "text", "id": "wamid.basic_stress_4", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,565 - sqlalchemy.engine.Engine - INFO - [cached since 0.01592s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress04", "text": {"body": "Teste stress b\\u00e1sico 4"}, "type": "text", "id": "wamid.basic_stress_4", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,565 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,565 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56292 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,568 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,568 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,568 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,568 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,568 INFO sqlalchemy.engine.Engine [cached since 0.01971s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress05", "text": {"body": "Teste stress b\\u00e1sico 5"}, "type": "text", "id": "wamid.basic_stress_5", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,568 - sqlalchemy.engine.Engine - INFO - [cached since 0.01971s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress05", "text": {"body": "Teste stress b\\u00e1sico 5"}, "type": "text", "id": "wamid.basic_stress_5", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,569 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,569 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56300 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,572 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,572 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,572 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,572 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,572 INFO sqlalchemy.engine.Engine [cached since 0.02323s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress06", "text": {"body": "Teste stress b\\u00e1sico 6"}, "type": "text", "id": "wamid.basic_stress_6", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.02323s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress06", "text": {"body": "Teste stress b\\u00e1sico 6"}, "type": "text", "id": "wamid.basic_stress_6", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,572 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,572 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56314 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,576 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,576 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,576 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,576 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,576 INFO sqlalchemy.engine.Engine [cached since 0.02719s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress07", "text": {"body": "Teste stress b\\u00e1sico 7"}, "type": "text", "id": "wamid.basic_stress_7", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,576 - sqlalchemy.engine.Engine - INFO - [cached since 0.02719s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress07", "text": {"body": "Teste stress b\\u00e1sico 7"}, "type": "text", "id": "wamid.basic_stress_7", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,576 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,576 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56330 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,580 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,580 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,580 INFO sqlalchemy.engine.Engine [cached since 0.03091s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress08", "text": {"body": "Teste stress b\\u00e1sico 8"}, "type": "text", "id": "wamid.basic_stress_8", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,580 - sqlalchemy.engine.Engine - INFO - [cached since 0.03091s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress08", "text": {"body": "Teste stress b\\u00e1sico 8"}, "type": "text", "id": "wamid.basic_stress_8", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,580 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,580 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56332 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,584 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,584 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,584 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,584 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,584 INFO sqlalchemy.engine.Engine [cached since 0.03516s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress09", "text": {"body": "Teste stress b\\u00e1sico 9"}, "type": "text", "id": "wamid.basic_stress_9", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,584 - sqlalchemy.engine.Engine - INFO - [cached since 0.03516s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress09", "text": {"body": "Teste stress b\\u00e1sico 9"}, "type": "text", "id": "wamid.basic_stress_9", "timestamp": "1754674268"}]}}]}]}')
2025-08-08 14:31:08,584 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,584 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56340 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,588 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,588 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,588 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,588 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:08,588 INFO sqlalchemy.engine.Engine [cached since 0.03949s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "19", "content-type": "application/json"}', '{"invalid": "data"}')
2025-08-08 14:31:08,588 - sqlalchemy.engine.Engine - INFO - [cached since 0.03949s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "19", "content-type": "application/json"}', '{"invalid": "data"}')
2025-08-08 14:31:08,589 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:08,589 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56344 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:08,591 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 14:31:08,624 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:08,624 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:08,624 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 14:31:08,624 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 14:31:08,624 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 14:31:08,624 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 14:31:08,625 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:31:08,625 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:31:09,508 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/models "HTTP/1.1 200 OK"
2025-08-08 14:31:09,548 - httpx - INFO - HTTP Request: GET https://graph.facebook.com/v18.0/me "HTTP/1.1 200 OK"
INFO:     127.0.0.1:56360 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 14:31:09,658 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:09,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:09,658 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:09,658 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:09,658 INFO sqlalchemy.engine.Engine [cached since 1.109s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "271", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999e2etest", "text": {"body": "Teste end-to-end b\\u00e1sico"}, "type": "text", "id": "wamid.basic_e2e", "timestamp": "1754674269"}]}}]}]}')
2025-08-08 14:31:09,658 - sqlalchemy.engine.Engine - INFO - [cached since 1.109s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "271", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999e2etest", "text": {"body": "Teste end-to-end b\\u00e1sico"}, "type": "text", "id": "wamid.basic_e2e", "timestamp": "1754674269"}]}}]}]}')
2025-08-08 14:31:09,659 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:09,659 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:56362 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:11,661 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 14:31:11,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:11,694 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:11,694 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 14:31:11,694 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 14:31:11,694 INFO sqlalchemy.engine.Engine [cached since 3.07s ago] ()
2025-08-08 14:31:11,694 - sqlalchemy.engine.Engine - INFO - [cached since 3.07s ago] ()
2025-08-08 14:31:11,694 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:31:11,694 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:31:12,172 - httpx - INFO - HTTP Request: GET https://graph.facebook.com/v18.0/me "HTTP/1.1 200 OK"
2025-08-08 14:31:12,441 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/models "HTTP/1.1 200 OK"
INFO:     127.0.0.1:56378 - "GET /metrics HTTP/1.1" 200 OK
INFO:     127.0.0.1:58402 - "GET /health HTTP/1.1" 200 OK
2025-08-08 14:31:20,503 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,503 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,503 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,503 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,503 INFO sqlalchemy.engine.Engine [cached since 11.95s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress00", "text": {"body": "Teste stress b\\u00e1sico 0"}, "type": "text", "id": "wamid.basic_stress_0", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,503 - sqlalchemy.engine.Engine - INFO - [cached since 11.95s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress00", "text": {"body": "Teste stress b\\u00e1sico 0"}, "type": "text", "id": "wamid.basic_stress_0", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,504 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,504 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58412 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,506 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,506 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,507 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,507 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,507 INFO sqlalchemy.engine.Engine [cached since 11.96s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress01", "text": {"body": "Teste stress b\\u00e1sico 1"}, "type": "text", "id": "wamid.basic_stress_1", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,507 - sqlalchemy.engine.Engine - INFO - [cached since 11.96s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress01", "text": {"body": "Teste stress b\\u00e1sico 1"}, "type": "text", "id": "wamid.basic_stress_1", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,507 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,507 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58416 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,510 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,510 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,510 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,510 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,510 INFO sqlalchemy.engine.Engine [cached since 11.96s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress02", "text": {"body": "Teste stress b\\u00e1sico 2"}, "type": "text", "id": "wamid.basic_stress_2", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,510 - sqlalchemy.engine.Engine - INFO - [cached since 11.96s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress02", "text": {"body": "Teste stress b\\u00e1sico 2"}, "type": "text", "id": "wamid.basic_stress_2", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,511 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,511 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58426 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,514 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,514 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,514 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,514 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,514 INFO sqlalchemy.engine.Engine [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress03", "text": {"body": "Teste stress b\\u00e1sico 3"}, "type": "text", "id": "wamid.basic_stress_3", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,514 - sqlalchemy.engine.Engine - INFO - [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress03", "text": {"body": "Teste stress b\\u00e1sico 3"}, "type": "text", "id": "wamid.basic_stress_3", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,515 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,515 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58430 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,517 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,517 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,517 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,517 INFO sqlalchemy.engine.Engine [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress04", "text": {"body": "Teste stress b\\u00e1sico 4"}, "type": "text", "id": "wamid.basic_stress_4", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,517 - sqlalchemy.engine.Engine - INFO - [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress04", "text": {"body": "Teste stress b\\u00e1sico 4"}, "type": "text", "id": "wamid.basic_stress_4", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,518 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,518 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58444 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,520 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,520 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,521 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,521 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,521 INFO sqlalchemy.engine.Engine [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress05", "text": {"body": "Teste stress b\\u00e1sico 5"}, "type": "text", "id": "wamid.basic_stress_5", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,521 - sqlalchemy.engine.Engine - INFO - [cached since 11.97s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress05", "text": {"body": "Teste stress b\\u00e1sico 5"}, "type": "text", "id": "wamid.basic_stress_5", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,521 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,521 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58450 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,524 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,524 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,524 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,524 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,524 INFO sqlalchemy.engine.Engine [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress06", "text": {"body": "Teste stress b\\u00e1sico 6"}, "type": "text", "id": "wamid.basic_stress_6", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,524 - sqlalchemy.engine.Engine - INFO - [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress06", "text": {"body": "Teste stress b\\u00e1sico 6"}, "type": "text", "id": "wamid.basic_stress_6", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,525 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,525 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58452 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,527 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,527 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,528 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,528 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,528 INFO sqlalchemy.engine.Engine [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress07", "text": {"body": "Teste stress b\\u00e1sico 7"}, "type": "text", "id": "wamid.basic_stress_7", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,528 - sqlalchemy.engine.Engine - INFO - [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress07", "text": {"body": "Teste stress b\\u00e1sico 7"}, "type": "text", "id": "wamid.basic_stress_7", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,528 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,528 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58464 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,531 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,531 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,531 INFO sqlalchemy.engine.Engine [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress08", "text": {"body": "Teste stress b\\u00e1sico 8"}, "type": "text", "id": "wamid.basic_stress_8", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,531 - sqlalchemy.engine.Engine - INFO - [cached since 11.98s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress08", "text": {"body": "Teste stress b\\u00e1sico 8"}, "type": "text", "id": "wamid.basic_stress_8", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,532 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,532 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58472 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,534 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,535 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,535 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,535 INFO sqlalchemy.engine.Engine [cached since 11.99s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress09", "text": {"body": "Teste stress b\\u00e1sico 9"}, "type": "text", "id": "wamid.basic_stress_9", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,535 - sqlalchemy.engine.Engine - INFO - [cached since 11.99s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "275", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999stress09", "text": {"body": "Teste stress b\\u00e1sico 9"}, "type": "text", "id": "wamid.basic_stress_9", "timestamp": "1754674280"}]}}]}]}')
2025-08-08 14:31:20,535 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,535 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58474 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,538 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,538 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,538 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:20,539 INFO sqlalchemy.engine.Engine [cached since 11.99s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "19", "content-type": "application/json"}', '{"invalid": "data"}')
2025-08-08 14:31:20,539 - sqlalchemy.engine.Engine - INFO - [cached since 11.99s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "19", "content-type": "application/json"}', '{"invalid": "data"}')
2025-08-08 14:31:20,539 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:20,539 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58478 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:20,541 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 14:31:20,572 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:20,572 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:20,572 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 14:31:20,572 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 14:31:20,572 INFO sqlalchemy.engine.Engine [cached since 11.95s ago] ()
2025-08-08 14:31:20,572 - sqlalchemy.engine.Engine - INFO - [cached since 11.95s ago] ()
2025-08-08 14:31:20,573 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:31:20,573 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:31:21,040 - httpx - INFO - HTTP Request: GET https://graph.facebook.com/v18.0/me "HTTP/1.1 200 OK"
2025-08-08 14:31:21,238 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/models "HTTP/1.1 200 OK"
INFO:     127.0.0.1:58494 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 14:31:21,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:21,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:21,323 INFO sqlalchemy.engine.Engine INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:21,323 - sqlalchemy.engine.Engine - INFO - INSERT INTO meta_logs (direction, endpoint, method, status_code, headers, payload) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::INTEGER, $5::JSON, $6::JSON) RETURNING meta_logs.id, meta_logs.created_at
2025-08-08 14:31:21,323 INFO sqlalchemy.engine.Engine [cached since 12.77s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "271", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999e2etest", "text": {"body": "Teste end-to-end b\\u00e1sico"}, "type": "text", "id": "wamid.basic_e2e", "timestamp": "1754674281"}]}}]}]}')
2025-08-08 14:31:21,323 - sqlalchemy.engine.Engine - INFO - [cached since 12.77s ago] ('in', '/webhook', 'POST', 200, '{"host": "localhost:8000", "user-agent": "python-requests/2.32.4", "accept-encoding": "gzip, deflate, br, zstd", "accept": "*/*", "connection": "keep-alive", "content-length": "271", "content-type": "application/json"}', '{"object": "whatsapp_business_account", "entry": [{"changes": [{"value": {"messaging_product": "whatsapp", "messages": [{"from": "5511999e2etest", "text": {"body": "Teste end-to-end b\\u00e1sico"}, "type": "text", "id": "wamid.basic_e2e", "timestamp": "1754674281"}]}}]}]}')
2025-08-08 14:31:21,324 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:31:21,324 - sqlalchemy.engine.Engine - INFO - COMMIT
INFO:     127.0.0.1:58500 - "POST /webhook HTTP/1.1" 200 OK
2025-08-08 14:31:23,327 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 14:31:23,364 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:31:23,364 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:31:23,364 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 14:31:23,364 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 14:31:23,364 INFO sqlalchemy.engine.Engine [cached since 14.74s ago] ()
2025-08-08 14:31:23,364 - sqlalchemy.engine.Engine - INFO - [cached since 14.74s ago] ()
2025-08-08 14:31:23,365 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 14:31:23,365 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-08-08 14:31:23,704 - httpx - INFO - HTTP Request: GET https://graph.facebook.com/v18.0/me "HTTP/1.1 200 OK"
2025-08-08 14:31:24,504 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/models "HTTP/1.1 200 OK"
INFO:     127.0.0.1:58516 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'tests/advanced_testing/__init__.py', 'tests/test_basic_advanced.py', 'tests/advanced_testing/test_end_to_end.py', 'tests/advanced_testing/test_failure_scenarios.py', 'tests/advanced_testing/test_dashboard_integration.py', 'tests/advanced_testing/conftest.py', 'tests/advanced_testing/test_stress_load.py', 'tests/run_advanced_tests.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:33:50,543 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:33:50,543 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:33:50,543 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81662]
INFO:     Started server process [81852]
INFO:     Waiting for application startup.
2025-08-08 14:33:53,576 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:33:53,578 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:33:53,595 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:33:53,595 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:33:53,595 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:33:53,595 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:33:53,596 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:33:53,596 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:33:53,596 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:33:53,596 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:33:53,597 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:33:53,597 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:33:53,597 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:33:53,597 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:33:53,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:33:53,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:33:53,600 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,600 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,600 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,600 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,601 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,601 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,601 INFO sqlalchemy.engine.Engine [cached since 0.001551s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,601 - sqlalchemy.engine.Engine - INFO - [cached since 0.001551s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine [cached since 0.001938s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.001938s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine [cached since 0.002312s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.002312s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,602 INFO sqlalchemy.engine.Engine [cached since 0.002666s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.002666s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine [cached since 0.003011s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.003011s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine [cached since 0.003376s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.003376s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,603 INFO sqlalchemy.engine.Engine [cached since 0.003659s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.003659s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine [cached since 0.003935s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.003935s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine [cached since 0.004216s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.004216s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine [cached since 0.004498s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.004498s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,604 INFO sqlalchemy.engine.Engine [cached since 0.00477s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.00477s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine [cached since 0.005039s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.005039s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine [cached since 0.005319s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.005319s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:33:53,605 INFO sqlalchemy.engine.Engine [cached since 0.005599s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.005599s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:33:53,606 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:33:53,606 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:33:53,606 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:33:53,606 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:33:53,606 - app.main - INFO - Cache service inicializado
2025-08-08 14:33:53,606 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:33:53,606 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'cost_dashboard.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:48:39,767 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:48:39,768 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:48:39,768 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [81852]
INFO:     Started server process [82823]
INFO:     Waiting for application startup.
2025-08-08 14:48:42,994 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:48:42,996 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:48:43,014 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:48:43,014 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:48:43,014 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:43,014 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:43,015 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:48:43,015 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:48:43,015 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:43,015 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:43,016 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:48:43,016 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:48:43,016 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:43,016 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:43,016 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:48:43,016 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:48:43,018 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,018 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,019 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,019 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,020 INFO sqlalchemy.engine.Engine [cached since 0.001597s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,020 - sqlalchemy.engine.Engine - INFO - [cached since 0.001597s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,020 INFO sqlalchemy.engine.Engine [cached since 0.001982s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,020 - sqlalchemy.engine.Engine - INFO - [cached since 0.001982s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine [cached since 0.002363s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.002363s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine [cached since 0.002739s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.002739s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,021 INFO sqlalchemy.engine.Engine [cached since 0.00307s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.00307s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine [cached since 0.003402s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.003402s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine [cached since 0.003664s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.003664s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,022 INFO sqlalchemy.engine.Engine [cached since 0.003909s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.003909s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine [cached since 0.004162s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.004162s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine [cached since 0.004406s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.004406s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine [cached since 0.004655s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.004655s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine [cached since 0.004897s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.004897s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,024 INFO sqlalchemy.engine.Engine [cached since 0.005142s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,024 - sqlalchemy.engine.Engine - INFO - [cached since 0.005142s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,024 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,024 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:43,024 INFO sqlalchemy.engine.Engine [cached since 0.005382s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,024 - sqlalchemy.engine.Engine - INFO - [cached since 0.005382s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:43,024 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:48:43,024 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:48:43,024 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:48:43,025 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:48:43,025 - app.main - INFO - Cache service inicializado
2025-08-08 14:48:43,025 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:48:43,025 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_notification.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 14:48:52,049 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 14:48:52,049 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 14:48:52,049 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [82823]
INFO:     Started server process [82873]
INFO:     Waiting for application startup.
2025-08-08 14:48:55,464 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 14:48:55,465 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 14:48:55,483 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 14:48:55,483 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 14:48:55,483 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:55,483 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:55,484 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 14:48:55,484 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 14:48:55,484 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:55,484 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:55,484 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 14:48:55,484 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 14:48:55,485 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 14:48:55,485 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 14:48:55,485 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 14:48:55,485 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 14:48:55,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,487 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,487 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,489 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,489 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,489 INFO sqlalchemy.engine.Engine [cached since 0.001805s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,489 - sqlalchemy.engine.Engine - INFO - [cached since 0.001805s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,489 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,489 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,489 INFO sqlalchemy.engine.Engine [cached since 0.002227s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,489 - sqlalchemy.engine.Engine - INFO - [cached since 0.002227s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine [cached since 0.002608s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - [cached since 0.002608s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine [cached since 0.002973s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - [cached since 0.002973s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,490 INFO sqlalchemy.engine.Engine [cached since 0.003294s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,490 - sqlalchemy.engine.Engine - INFO - [cached since 0.003294s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine [cached since 0.003631s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.003631s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine [cached since 0.003892s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.003892s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,491 INFO sqlalchemy.engine.Engine [cached since 0.004143s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,491 - sqlalchemy.engine.Engine - INFO - [cached since 0.004143s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine [cached since 0.004429s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.004429s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine [cached since 0.004676s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.004676s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine [cached since 0.004926s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.004926s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,492 INFO sqlalchemy.engine.Engine [cached since 0.005195s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,492 - sqlalchemy.engine.Engine - INFO - [cached since 0.005195s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,493 INFO sqlalchemy.engine.Engine [cached since 0.005455s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.005455s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,493 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,493 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 14:48:55,493 INFO sqlalchemy.engine.Engine [cached since 0.005703s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,493 - sqlalchemy.engine.Engine - INFO - [cached since 0.005703s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 14:48:55,493 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 14:48:55,493 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 14:48:55,493 - app.main - INFO - Banco de dados inicializado
2025-08-08 14:48:55,494 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 14:48:55,494 - app.main - INFO - Cache service inicializado
2025-08-08 14:48:55,494 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 14:48:55,494 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/models/database.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:25:47,566 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:25:47,566 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:25:47,566 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [82873]
INFO:     Started server process [84692]
INFO:     Waiting for application startup.
2025-08-08 15:25:50,726 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:25:50,728 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:25:50,748 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:25:50,748 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:25:50,748 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:25:50,748 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:25:50,749 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:25:50,749 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:25:50,749 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:25:50,749 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:25:50,749 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:25:50,749 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:25:50,749 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:25:50,749 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:25:50,750 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:25:50,750 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:25:50,752 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,752 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,752 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,754 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,754 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,754 INFO sqlalchemy.engine.Engine [cached since 0.001936s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,754 - sqlalchemy.engine.Engine - INFO - [cached since 0.001936s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine [cached since 0.002463s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - [cached since 0.002463s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine [cached since 0.00296s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - [cached since 0.00296s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,755 INFO sqlalchemy.engine.Engine [cached since 0.003325s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,755 - sqlalchemy.engine.Engine - INFO - [cached since 0.003325s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine [cached since 0.003694s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - [cached since 0.003694s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine [cached since 0.004047s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - [cached since 0.004047s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,756 INFO sqlalchemy.engine.Engine [cached since 0.00432s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,756 - sqlalchemy.engine.Engine - INFO - [cached since 0.00432s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine [cached since 0.004606s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - [cached since 0.004606s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine [cached since 0.004871s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - [cached since 0.004871s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine [cached since 0.005118s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - [cached since 0.005118s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,757 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,757 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine [cached since 0.005363s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - [cached since 0.005363s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine [cached since 0.005606s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - [cached since 0.005606s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine [cached since 0.005875s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - [cached since 0.005875s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:25:50,758 INFO sqlalchemy.engine.Engine [cached since 0.006144s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,758 - sqlalchemy.engine.Engine - INFO - [cached since 0.006144s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:25:50,759 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:25:50,759 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:25:50,759 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:25:50,760 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:25:50,760 - app.main - INFO - Cache service inicializado
2025-08-08 15:25:50,760 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:25:50,760 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/models/database.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:26:00,275 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:26:00,275 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:26:00,275 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [84692]
INFO:     Started server process [84713]
INFO:     Waiting for application startup.
2025-08-08 15:26:03,301 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:26:03,302 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:26:03,321 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:26:03,321 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:26:03,321 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:03,321 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:03,322 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:26:03,322 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:26:03,322 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:03,322 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:03,322 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:26:03,322 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:26:03,322 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:03,322 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:03,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:26:03,323 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:26:03,325 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,325 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,325 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,325 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,327 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,327 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,327 INFO sqlalchemy.engine.Engine [cached since 0.001739s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,327 - sqlalchemy.engine.Engine - INFO - [cached since 0.001739s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,327 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,327 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,327 INFO sqlalchemy.engine.Engine [cached since 0.002124s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,327 - sqlalchemy.engine.Engine - INFO - [cached since 0.002124s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine [cached since 0.002474s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - [cached since 0.002474s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine [cached since 0.002804s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - [cached since 0.002804s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,328 INFO sqlalchemy.engine.Engine [cached since 0.003213s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,328 - sqlalchemy.engine.Engine - INFO - [cached since 0.003213s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine [cached since 0.003608s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - [cached since 0.003608s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine [cached since 0.00388s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - [cached since 0.00388s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine [cached since 0.004146s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - [cached since 0.004146s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine [cached since 0.004392s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.004392s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine [cached since 0.004636s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.004636s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine [cached since 0.004896s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.004896s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine [cached since 0.005143s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.005143s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine [cached since 0.005386s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.005386s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine [cached since 0.005628s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.005628s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine [cached since 0.005879s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.005879s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:03,331 INFO sqlalchemy.engine.Engine [cached since 0.006128s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.006128s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:03,332 INFO sqlalchemy.engine.Engine 
CREATE TABLE admin_users (
	id SERIAL NOT NULL, 
	username VARCHAR(50) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	password_hash VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	is_active BOOLEAN, 
	is_super_admin BOOLEAN, 
	last_login TIMESTAMP WITH TIME ZONE, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	updated_at TIMESTAMP WITH TIME ZONE, 
	PRIMARY KEY (id)
)


2025-08-08 15:26:03,332 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE admin_users (
	id SERIAL NOT NULL, 
	username VARCHAR(50) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	password_hash VARCHAR(255) NOT NULL, 
	full_name VARCHAR(255), 
	is_active BOOLEAN, 
	is_super_admin BOOLEAN, 
	last_login TIMESTAMP WITH TIME ZONE, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	updated_at TIMESTAMP WITH TIME ZONE, 
	PRIMARY KEY (id)
)


2025-08-08 15:26:03,332 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
2025-08-08 15:26:03,332 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
2025-08-08 15:26:03,343 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_admin_users_email ON admin_users (email)
2025-08-08 15:26:03,343 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_admin_users_email ON admin_users (email)
2025-08-08 15:26:03,343 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
2025-08-08 15:26:03,343 - sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ()
2025-08-08 15:26:03,344 INFO sqlalchemy.engine.Engine CREATE INDEX ix_admin_users_id ON admin_users (id)
2025-08-08 15:26:03,344 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_admin_users_id ON admin_users (id)
2025-08-08 15:26:03,344 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
2025-08-08 15:26:03,344 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
2025-08-08 15:26:03,345 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_admin_users_username ON admin_users (username)
2025-08-08 15:26:03,345 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_admin_users_username ON admin_users (username)
2025-08-08 15:26:03,345 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
2025-08-08 15:26:03,345 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
2025-08-08 15:26:03,346 INFO sqlalchemy.engine.Engine 
CREATE TABLE login_sessions (
	id SERIAL NOT NULL, 
	session_token VARCHAR(255) NOT NULL, 
	admin_user_id INTEGER NOT NULL, 
	ip_address VARCHAR(45), 
	user_agent TEXT, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	expires_at TIMESTAMP WITH TIME ZONE NOT NULL, 
	is_active BOOLEAN, 
	PRIMARY KEY (id), 
	FOREIGN KEY(admin_user_id) REFERENCES admin_users (id)
)


2025-08-08 15:26:03,346 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE login_sessions (
	id SERIAL NOT NULL, 
	session_token VARCHAR(255) NOT NULL, 
	admin_user_id INTEGER NOT NULL, 
	ip_address VARCHAR(45), 
	user_agent TEXT, 
	created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), 
	expires_at TIMESTAMP WITH TIME ZONE NOT NULL, 
	is_active BOOLEAN, 
	PRIMARY KEY (id), 
	FOREIGN KEY(admin_user_id) REFERENCES admin_users (id)
)


2025-08-08 15:26:03,346 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
2025-08-08 15:26:03,346 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
2025-08-08 15:26:03,351 INFO sqlalchemy.engine.Engine CREATE INDEX ix_login_sessions_id ON login_sessions (id)
2025-08-08 15:26:03,351 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_sessions_id ON login_sessions (id)
2025-08-08 15:26:03,351 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
2025-08-08 15:26:03,351 - sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
2025-08-08 15:26:03,352 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_login_sessions_session_token ON login_sessions (session_token)
2025-08-08 15:26:03,352 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_login_sessions_session_token ON login_sessions (session_token)
2025-08-08 15:26:03,352 INFO sqlalchemy.engine.Engine [no key 0.00006s] ()
2025-08-08 15:26:03,352 - sqlalchemy.engine.Engine - INFO - [no key 0.00006s] ()
2025-08-08 15:26:03,353 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:26:03,353 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:26:03,354 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:26:03,355 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:26:03,355 - app.main - INFO - Cache service inicializado
2025-08-08 15:26:03,355 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:26:03,355 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'alembic/versions/2025_08_08_1526-115422716842_add_admin_authentication_system.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:26:40,622 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:26:40,623 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:26:40,623 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [84713]
INFO:     Started server process [85156]
INFO:     Waiting for application startup.
2025-08-08 15:26:44,158 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:26:44,160 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:26:44,178 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:26:44,178 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:26:44,178 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:44,178 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:44,179 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:26:44,179 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:26:44,179 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:44,179 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:44,180 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:26:44,180 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:26:44,180 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:26:44,180 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:26:44,181 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:26:44,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:26:44,183 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,183 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,183 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,183 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,184 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,184 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,185 INFO sqlalchemy.engine.Engine [cached since 0.001767s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.001767s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,185 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,185 INFO sqlalchemy.engine.Engine [cached since 0.002147s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.002147s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,185 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,185 INFO sqlalchemy.engine.Engine [cached since 0.002512s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.002512s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine [cached since 0.002902s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.002902s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine [cached since 0.003268s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.003268s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,186 INFO sqlalchemy.engine.Engine [cached since 0.003638s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.003638s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine [cached since 0.003893s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.003893s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine [cached since 0.004145s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.004145s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine [cached since 0.004405s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.004405s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,187 INFO sqlalchemy.engine.Engine [cached since 0.004649s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.004649s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine [cached since 0.004891s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.004891s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine [cached since 0.005133s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.005133s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine [cached since 0.005418s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.005418s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,188 INFO sqlalchemy.engine.Engine [cached since 0.005687s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.005687s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,189 INFO sqlalchemy.engine.Engine [cached since 0.005943s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.005943s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:26:44,189 INFO sqlalchemy.engine.Engine [cached since 0.006193s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.006193s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:26:44,189 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:26:44,189 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:26:44,190 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:26:44,190 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:26:44,190 - app.main - INFO - Cache service inicializado
2025-08-08 15:26:44,190 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:26:44,190 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'alembic/versions/2025_08_08_1526-115422716842_add_admin_authentication_system.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:27:03,929 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:27:03,929 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:27:03,929 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [85156]
INFO:     Started server process [85378]
INFO:     Waiting for application startup.
2025-08-08 15:27:07,624 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:27:07,625 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:27:07,644 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:27:07,644 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:27:07,644 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:27:07,644 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:27:07,645 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:27:07,645 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:27:07,645 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:27:07,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:27:07,646 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:27:07,646 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:27:07,646 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:27:07,646 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:27:07,647 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:27:07,647 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:27:07,649 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,649 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,649 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,649 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,650 INFO sqlalchemy.engine.Engine [cached since 0.001781s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.001781s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine [cached since 0.002172s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.002172s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine [cached since 0.002546s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.002546s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,651 INFO sqlalchemy.engine.Engine [cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine [cached since 0.0032s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.0032s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine [cached since 0.003541s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.003541s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,652 INFO sqlalchemy.engine.Engine [cached since 0.003808s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.003808s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine [cached since 0.004057s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.004057s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine [cached since 0.004329s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.004329s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine [cached since 0.0046s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.0046s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,653 INFO sqlalchemy.engine.Engine [cached since 0.004849s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.004849s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine [cached since 0.005104s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.005104s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine [cached since 0.005353s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.005353s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine [cached since 0.005615s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.005615s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,654 INFO sqlalchemy.engine.Engine [cached since 0.005858s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.005858s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,655 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:27:07,655 INFO sqlalchemy.engine.Engine [cached since 0.006112s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,655 - sqlalchemy.engine.Engine - INFO - [cached since 0.006112s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:27:07,655 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:27:07,655 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:27:07,655 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:27:07,656 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:27:07,656 - app.main - INFO - Cache service inicializado
2025-08-08 15:27:07,656 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:27:07,656 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:31:55,512 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:31:55,512 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:31:55,512 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [85378]
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Started server process [85804]
INFO:     Waiting for application startup.
2025-08-08 15:31:59,305 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:31:59,306 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:31:59,332 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:31:59,332 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:31:59,332 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:31:59,332 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:31:59,334 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:31:59,334 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:31:59,334 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:31:59,334 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:31:59,335 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:31:59,335 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:31:59,335 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:31:59,335 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:31:59,336 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:31:59,336 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:31:59,339 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,339 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,339 INFO sqlalchemy.engine.Engine [generated in 0.00027s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,339 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,341 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,341 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,342 INFO sqlalchemy.engine.Engine [cached since 0.002763s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,342 - sqlalchemy.engine.Engine - INFO - [cached since 0.002763s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,342 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,342 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,342 INFO sqlalchemy.engine.Engine [cached since 0.003336s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,342 - sqlalchemy.engine.Engine - INFO - [cached since 0.003336s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,343 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,343 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,343 INFO sqlalchemy.engine.Engine [cached since 0.003817s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,343 - sqlalchemy.engine.Engine - INFO - [cached since 0.003817s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,343 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,343 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,343 INFO sqlalchemy.engine.Engine [cached since 0.004298s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,343 - sqlalchemy.engine.Engine - INFO - [cached since 0.004298s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,344 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,344 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,344 INFO sqlalchemy.engine.Engine [cached since 0.00487s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,344 - sqlalchemy.engine.Engine - INFO - [cached since 0.00487s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,344 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,344 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,344 INFO sqlalchemy.engine.Engine [cached since 0.005436s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,344 - sqlalchemy.engine.Engine - INFO - [cached since 0.005436s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine [cached since 0.005854s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.005854s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine [cached since 0.006255s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.006255s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,345 INFO sqlalchemy.engine.Engine [cached since 0.006616s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,345 - sqlalchemy.engine.Engine - INFO - [cached since 0.006616s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine [cached since 0.006981s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.006981s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine [cached since 0.007297s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.007297s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,346 INFO sqlalchemy.engine.Engine [cached since 0.007595s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,346 - sqlalchemy.engine.Engine - INFO - [cached since 0.007595s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine [cached since 0.007898s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.007898s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine [cached since 0.008311s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.008311s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,347 INFO sqlalchemy.engine.Engine [cached since 0.008696s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,347 - sqlalchemy.engine.Engine - INFO - [cached since 0.008696s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,348 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,348 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:31:59,348 INFO sqlalchemy.engine.Engine [cached since 0.009074s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,348 - sqlalchemy.engine.Engine - INFO - [cached since 0.009074s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:31:59,348 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:31:59,348 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:31:59,349 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:31:59,349 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:31:59,349 - app.main - INFO - Cache service inicializado
2025-08-08 15:31:59,349 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:31:59,350 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [85831]
INFO:     Waiting for application startup.
2025-08-08 15:32:02,791 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:32:02,793 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:32:02,815 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:32:02,815 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:32:02,815 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:32:02,815 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:32:02,816 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:32:02,816 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:32:02,816 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:32:02,816 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:32:02,817 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:32:02,817 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:32:02,817 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:32:02,817 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:32:02,818 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:32:02,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:32:02,820 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,820 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,820 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,820 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine [cached since 0.001847s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.001847s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine [cached since 0.002249s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.002249s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,822 INFO sqlalchemy.engine.Engine [cached since 0.002588s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.002588s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine [cached since 0.002917s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - [cached since 0.002917s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine [cached since 0.003243s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - [cached since 0.003243s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,823 INFO sqlalchemy.engine.Engine [cached since 0.003594s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,823 - sqlalchemy.engine.Engine - INFO - [cached since 0.003594s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine [cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - [cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine [cached since 0.004167s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - [cached since 0.004167s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine [cached since 0.004428s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - [cached since 0.004428s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,824 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,824 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine [cached since 0.00469s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - [cached since 0.00469s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine [cached since 0.004981s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - [cached since 0.004981s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine [cached since 0.005342s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - [cached since 0.005342s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,825 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,825 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine [cached since 0.005675s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - [cached since 0.005675s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine [cached since 0.005999s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - [cached since 0.005999s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine [cached since 0.006284s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - [cached since 0.006284s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:32:02,826 INFO sqlalchemy.engine.Engine [cached since 0.006557s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,826 - sqlalchemy.engine.Engine - INFO - [cached since 0.006557s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:32:02,827 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:32:02,827 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:32:02,827 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:32:02,828 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:32:02,828 - app.main - INFO - Cache service inicializado
2025-08-08 15:32:02,828 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:32:02,828 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:33:00,147 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:33:00,147 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:33:00,147 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [85831]
INFO:     Started server process [86085]
INFO:     Waiting for application startup.
2025-08-08 15:33:03,404 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:33:03,405 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:33:03,424 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:33:03,424 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:33:03,424 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:03,424 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:03,425 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:33:03,425 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:33:03,425 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:03,425 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:03,426 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:33:03,426 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:33:03,426 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:03,426 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:03,426 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:33:03,426 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:33:03,429 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,429 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,429 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,430 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,430 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,430 INFO sqlalchemy.engine.Engine [cached since 0.001853s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.001853s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,431 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,431 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,431 INFO sqlalchemy.engine.Engine [cached since 0.002281s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,431 - sqlalchemy.engine.Engine - INFO - [cached since 0.002281s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,431 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,431 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,431 INFO sqlalchemy.engine.Engine [cached since 0.00275s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,431 - sqlalchemy.engine.Engine - INFO - [cached since 0.00275s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine [cached since 0.003157s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - [cached since 0.003157s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine [cached since 0.003556s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - [cached since 0.003556s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,432 INFO sqlalchemy.engine.Engine [cached since 0.003926s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,432 - sqlalchemy.engine.Engine - INFO - [cached since 0.003926s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine [cached since 0.004189s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - [cached since 0.004189s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine [cached since 0.004443s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - [cached since 0.004443s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine [cached since 0.004706s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - [cached since 0.004706s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,433 INFO sqlalchemy.engine.Engine [cached since 0.004951s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,433 - sqlalchemy.engine.Engine - INFO - [cached since 0.004951s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine [cached since 0.005214s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - [cached since 0.005214s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine [cached since 0.005487s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - [cached since 0.005487s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine [cached since 0.00575s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - [cached since 0.00575s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,434 INFO sqlalchemy.engine.Engine [cached since 0.006018s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,434 - sqlalchemy.engine.Engine - INFO - [cached since 0.006018s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,435 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,435 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,435 INFO sqlalchemy.engine.Engine [cached since 0.006287s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,435 - sqlalchemy.engine.Engine - INFO - [cached since 0.006287s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,435 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,435 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:03,435 INFO sqlalchemy.engine.Engine [cached since 0.006566s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,435 - sqlalchemy.engine.Engine - INFO - [cached since 0.006566s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:03,435 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:33:03,435 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:33:03,436 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:33:03,436 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:33:03,436 - app.main - INFO - Cache service inicializado
2025-08-08 15:33:03,436 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:33:03,436 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:33:06,046 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:33:06,046 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:33:06,046 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86085]
INFO:     Started server process [86096]
INFO:     Waiting for application startup.
2025-08-08 15:33:09,303 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:33:09,304 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:33:09,324 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:33:09,324 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:33:09,324 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:09,324 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:09,325 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:33:09,325 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:33:09,325 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:09,325 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:09,326 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:33:09,326 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:33:09,326 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:09,326 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:09,326 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:33:09,326 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:33:09,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,329 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,329 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,331 INFO sqlalchemy.engine.Engine [cached since 0.00183s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.00183s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,331 INFO sqlalchemy.engine.Engine [cached since 0.002281s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.002281s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine [cached since 0.002696s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.002696s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine [cached since 0.00306s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.00306s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,332 INFO sqlalchemy.engine.Engine [cached since 0.00339s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.00339s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine [cached since 0.003735s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.003735s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine [cached since 0.003991s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.003991s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine [cached since 0.004252s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.004252s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,333 INFO sqlalchemy.engine.Engine [cached since 0.004513s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.004513s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine [cached since 0.004763s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.004763s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine [cached since 0.005011s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.005011s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine [cached since 0.00527s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.00527s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,334 INFO sqlalchemy.engine.Engine [cached since 0.005518s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.005518s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine [cached since 0.005763s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.005763s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine [cached since 0.006014s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.006014s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:09,335 INFO sqlalchemy.engine.Engine [cached since 0.006293s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.006293s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:09,336 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:33:09,336 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:33:09,336 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:33:09,336 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:33:09,337 - app.main - INFO - Cache service inicializado
2025-08-08 15:33:09,337 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:33:09,337 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:33:19,755 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:33:19,755 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:33:19,755 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86096]
WARNING:  WatchFiles detected changes in 'scripts/create_admin_user.py'. Reloading...
INFO:     Started server process [86120]
INFO:     Waiting for application startup.
2025-08-08 15:33:23,397 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:33:23,398 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:33:23,418 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:33:23,418 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:33:23,418 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:23,418 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:23,419 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:33:23,419 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:33:23,419 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:23,419 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:23,420 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:33:23,420 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:33:23,420 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:23,420 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:23,421 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:33:23,421 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:33:23,423 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,423 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,424 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,424 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,425 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,425 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,425 INFO sqlalchemy.engine.Engine [cached since 0.002113s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,425 - sqlalchemy.engine.Engine - INFO - [cached since 0.002113s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,426 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,426 INFO sqlalchemy.engine.Engine [cached since 0.002504s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,426 - sqlalchemy.engine.Engine - INFO - [cached since 0.002504s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,426 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,426 INFO sqlalchemy.engine.Engine [cached since 0.002866s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,426 - sqlalchemy.engine.Engine - INFO - [cached since 0.002866s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,426 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,426 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine [cached since 0.003196s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.003196s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine [cached since 0.003516s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.003516s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine [cached since 0.003916s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - [cached since 0.003916s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,427 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,427 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine [cached since 0.004181s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.004181s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine [cached since 0.004431s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.004431s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine [cached since 0.004691s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.004691s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,428 INFO sqlalchemy.engine.Engine [cached since 0.004961s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,428 - sqlalchemy.engine.Engine - INFO - [cached since 0.004961s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine [cached since 0.005242s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - [cached since 0.005242s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine [cached since 0.005565s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - [cached since 0.005565s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine [cached since 0.005907s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - [cached since 0.005907s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,429 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,429 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine [cached since 0.006197s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.006197s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine [cached since 0.006454s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.006454s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine [cached since 0.006726s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - [cached since 0.006726s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:23,430 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:33:23,430 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:33:23,431 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:33:23,431 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:33:23,431 - app.main - INFO - Cache service inicializado
2025-08-08 15:33:23,431 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:33:23,431 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [86136]
INFO:     Waiting for application startup.
2025-08-08 15:33:26,952 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:33:26,954 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:33:26,982 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:33:26,982 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:33:26,982 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:26,982 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:26,984 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:33:26,984 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:33:26,984 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:26,984 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:26,985 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:33:26,985 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:33:26,985 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:26,985 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:26,986 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:33:26,986 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:33:26,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,989 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,989 INFO sqlalchemy.engine.Engine [generated in 0.00028s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,989 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,991 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,991 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,991 INFO sqlalchemy.engine.Engine [cached since 0.002427s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,991 - sqlalchemy.engine.Engine - INFO - [cached since 0.002427s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,992 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,992 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,992 INFO sqlalchemy.engine.Engine [cached since 0.00287s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,992 - sqlalchemy.engine.Engine - INFO - [cached since 0.00287s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,992 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,992 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,992 INFO sqlalchemy.engine.Engine [cached since 0.003239s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,992 - sqlalchemy.engine.Engine - INFO - [cached since 0.003239s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine [cached since 0.003583s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.003583s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine [cached since 0.003928s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.003928s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,993 INFO sqlalchemy.engine.Engine [cached since 0.004303s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.004303s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine [cached since 0.004604s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.004604s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine [cached since 0.004877s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.004877s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,994 INFO sqlalchemy.engine.Engine [cached since 0.005238s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.005238s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine [cached since 0.005576s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.005576s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine [cached since 0.0059s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.0059s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine [cached since 0.006201s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.006201s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine [cached since 0.006467s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.006467s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine [cached since 0.006732s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.006732s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine [cached since 0.007026s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.007026s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:26,996 INFO sqlalchemy.engine.Engine [cached since 0.0073s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.0073s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:26,997 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:33:26,997 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:33:26,997 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:33:26,998 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:33:26,998 - app.main - INFO - Cache service inicializado
2025-08-08 15:33:26,998 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:33:26,998 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/auth_manager.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:33:53,850 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:33:53,850 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:33:53,851 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86136]
INFO:     Started server process [86297]
INFO:     Waiting for application startup.
2025-08-08 15:33:57,489 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:33:57,491 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:33:57,509 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:33:57,509 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:33:57,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:57,509 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:57,510 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:33:57,510 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:33:57,510 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:57,510 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:57,511 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:33:57,511 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:33:57,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:33:57,511 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:33:57,512 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:33:57,512 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:33:57,514 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,514 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,514 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,514 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,515 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,515 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,515 INFO sqlalchemy.engine.Engine [cached since 0.00175s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,515 - sqlalchemy.engine.Engine - INFO - [cached since 0.00175s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,516 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,516 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,516 INFO sqlalchemy.engine.Engine [cached since 0.002204s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,516 - sqlalchemy.engine.Engine - INFO - [cached since 0.002204s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,516 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,516 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,516 INFO sqlalchemy.engine.Engine [cached since 0.002658s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,516 - sqlalchemy.engine.Engine - INFO - [cached since 0.002658s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,517 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,517 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,517 INFO sqlalchemy.engine.Engine [cached since 0.003061s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,517 - sqlalchemy.engine.Engine - INFO - [cached since 0.003061s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,517 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,517 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,517 INFO sqlalchemy.engine.Engine [cached since 0.003456s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,517 - sqlalchemy.engine.Engine - INFO - [cached since 0.003456s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,517 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,517 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine [cached since 0.003849s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - [cached since 0.003849s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine [cached since 0.004162s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - [cached since 0.004162s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine [cached since 0.004488s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - [cached since 0.004488s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,518 INFO sqlalchemy.engine.Engine [cached since 0.004787s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,518 - sqlalchemy.engine.Engine - INFO - [cached since 0.004787s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine [cached since 0.00509s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - [cached since 0.00509s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine [cached since 0.005387s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - [cached since 0.005387s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,519 INFO sqlalchemy.engine.Engine [cached since 0.005683s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,519 - sqlalchemy.engine.Engine - INFO - [cached since 0.005683s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine [cached since 0.005961s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.005961s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine [cached since 0.00625s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.00625s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine [cached since 0.006563s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.006563s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:33:57,521 INFO sqlalchemy.engine.Engine [cached since 0.006841s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,521 - sqlalchemy.engine.Engine - INFO - [cached since 0.006841s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:33:57,521 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:33:57,521 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:33:57,521 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:33:57,522 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:33:57,522 - app.main - INFO - Cache service inicializado
2025-08-08 15:33:57,522 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:33:57,522 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/components/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:34:33,394 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:34:33,394 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:34:33,394 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86297]
WARNING:  WatchFiles detected changes in 'app/components/auth.py'. Reloading...
INFO:     Started server process [86334]
INFO:     Waiting for application startup.
2025-08-08 15:34:37,113 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:34:37,114 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:34:37,135 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:34:37,135 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:34:37,136 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:37,136 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:37,137 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:34:37,137 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:34:37,137 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:37,137 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:37,137 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:34:37,137 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:34:37,137 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:37,137 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:37,138 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:34:37,138 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:34:37,141 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,141 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,141 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,141 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,142 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,142 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,143 INFO sqlalchemy.engine.Engine [cached since 0.002079s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,143 - sqlalchemy.engine.Engine - INFO - [cached since 0.002079s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,143 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,143 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,143 INFO sqlalchemy.engine.Engine [cached since 0.002504s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,143 - sqlalchemy.engine.Engine - INFO - [cached since 0.002504s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,143 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,143 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,143 INFO sqlalchemy.engine.Engine [cached since 0.002983s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,143 - sqlalchemy.engine.Engine - INFO - [cached since 0.002983s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,144 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,144 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,144 INFO sqlalchemy.engine.Engine [cached since 0.00338s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,144 - sqlalchemy.engine.Engine - INFO - [cached since 0.00338s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,144 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,144 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,144 INFO sqlalchemy.engine.Engine [cached since 0.003827s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,144 - sqlalchemy.engine.Engine - INFO - [cached since 0.003827s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine [cached since 0.00424s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - [cached since 0.00424s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine [cached since 0.004542s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - [cached since 0.004542s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,145 INFO sqlalchemy.engine.Engine [cached since 0.004825s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,145 - sqlalchemy.engine.Engine - INFO - [cached since 0.004825s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine [cached since 0.005103s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.005103s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine [cached since 0.00537s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.00537s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine [cached since 0.005633s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.005633s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,146 INFO sqlalchemy.engine.Engine [cached since 0.005891s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.005891s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine [cached since 0.006161s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.006161s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine [cached since 0.006427s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.006427s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine [cached since 0.006703s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.006703s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:37,147 INFO sqlalchemy.engine.Engine [cached since 0.00696s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.00696s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:37,148 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:34:37,148 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:34:37,148 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:34:37,149 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:34:37,149 - app.main - INFO - Cache service inicializado
2025-08-08 15:34:37,149 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:34:37,149 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [86356]
INFO:     Waiting for application startup.
2025-08-08 15:34:40,652 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:34:40,653 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:34:40,673 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:34:40,673 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:34:40,673 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:40,673 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:40,674 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:34:40,674 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:34:40,674 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:40,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:40,675 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:34:40,675 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:34:40,675 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:40,675 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:40,675 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:34:40,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:34:40,678 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,678 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,678 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,680 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,680 INFO sqlalchemy.engine.Engine [cached since 0.001886s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,680 - sqlalchemy.engine.Engine - INFO - [cached since 0.001886s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,680 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,680 INFO sqlalchemy.engine.Engine [cached since 0.002303s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,680 - sqlalchemy.engine.Engine - INFO - [cached since 0.002303s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,680 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,681 INFO sqlalchemy.engine.Engine [cached since 0.002693s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.002693s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,681 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,681 INFO sqlalchemy.engine.Engine [cached since 0.003076s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.003076s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,681 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,681 INFO sqlalchemy.engine.Engine [cached since 0.003444s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.003444s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine [cached since 0.003824s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.003824s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine [cached since 0.004118s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.004118s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine [cached since 0.004414s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.004414s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine [cached since 0.004706s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.004706s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine [cached since 0.004993s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.004993s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine [cached since 0.005282s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.005282s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,683 INFO sqlalchemy.engine.Engine [cached since 0.005564s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.005564s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine [cached since 0.005846s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - [cached since 0.005846s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine [cached since 0.00613s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - [cached since 0.00613s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine [cached since 0.006419s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - [cached since 0.006419s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:40,685 INFO sqlalchemy.engine.Engine [cached since 0.006701s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,685 - sqlalchemy.engine.Engine - INFO - [cached since 0.006701s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:40,685 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:34:40,685 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:34:40,685 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:34:40,686 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:34:40,686 - app.main - INFO - Cache service inicializado
2025-08-08 15:34:40,686 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:34:40,686 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:34:48,498 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:34:48,498 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:34:48,498 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86356]
INFO:     Started server process [86386]
INFO:     Waiting for application startup.
2025-08-08 15:34:51,985 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:34:51,986 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:34:52,007 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:34:52,007 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:34:52,007 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:52,007 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:52,008 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:34:52,008 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:34:52,008 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:52,008 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:52,009 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:34:52,009 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:34:52,009 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:34:52,009 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:34:52,010 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:34:52,010 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:34:52,012 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,012 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,012 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,012 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,014 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,014 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,014 INFO sqlalchemy.engine.Engine [cached since 0.002294s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,014 - sqlalchemy.engine.Engine - INFO - [cached since 0.002294s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine [cached since 0.002734s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - [cached since 0.002734s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine [cached since 0.003122s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - [cached since 0.003122s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,015 INFO sqlalchemy.engine.Engine [cached since 0.003476s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,015 - sqlalchemy.engine.Engine - INFO - [cached since 0.003476s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine [cached since 0.003805s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - [cached since 0.003805s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine [cached since 0.004212s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - [cached since 0.004212s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,016 INFO sqlalchemy.engine.Engine [cached since 0.004533s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,016 - sqlalchemy.engine.Engine - INFO - [cached since 0.004533s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,017 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,017 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,017 INFO sqlalchemy.engine.Engine [cached since 0.004902s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,017 - sqlalchemy.engine.Engine - INFO - [cached since 0.004902s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,017 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,017 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,017 INFO sqlalchemy.engine.Engine [cached since 0.005274s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,017 - sqlalchemy.engine.Engine - INFO - [cached since 0.005274s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine [cached since 0.005762s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - [cached since 0.005762s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine [cached since 0.00611s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - [cached since 0.00611s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,018 INFO sqlalchemy.engine.Engine [cached since 0.006389s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,018 - sqlalchemy.engine.Engine - INFO - [cached since 0.006389s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine [cached since 0.006676s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - [cached since 0.006676s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine [cached since 0.006959s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - [cached since 0.006959s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine [cached since 0.007224s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - [cached since 0.007224s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:34:52,019 INFO sqlalchemy.engine.Engine [cached since 0.00748s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,019 - sqlalchemy.engine.Engine - INFO - [cached since 0.00748s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:34:52,020 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:34:52,020 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:34:52,020 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:34:52,021 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:34:52,021 - app.main - INFO - Cache service inicializado
2025-08-08 15:34:52,021 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:34:52,021 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:35:19,469 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:35:19,469 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:35:19,469 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86386]
INFO:     Started server process [86459]
INFO:     Waiting for application startup.
2025-08-08 15:35:22,778 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:35:22,779 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:35:22,798 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:35:22,798 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:35:22,798 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:22,798 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:22,799 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:35:22,799 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:35:22,799 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:22,799 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:22,800 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:35:22,800 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:35:22,800 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:22,800 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:22,800 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:35:22,800 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:35:22,803 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,803 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,803 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,803 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,804 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,804 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,804 INFO sqlalchemy.engine.Engine [cached since 0.001917s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,804 - sqlalchemy.engine.Engine - INFO - [cached since 0.001917s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,805 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,805 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,805 INFO sqlalchemy.engine.Engine [cached since 0.002298s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,805 - sqlalchemy.engine.Engine - INFO - [cached since 0.002298s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,805 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,805 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,805 INFO sqlalchemy.engine.Engine [cached since 0.002711s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,805 - sqlalchemy.engine.Engine - INFO - [cached since 0.002711s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine [cached since 0.003076s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - [cached since 0.003076s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine [cached since 0.00344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - [cached since 0.00344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,806 INFO sqlalchemy.engine.Engine [cached since 0.003808s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,806 - sqlalchemy.engine.Engine - INFO - [cached since 0.003808s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine [cached since 0.004071s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - [cached since 0.004071s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine [cached since 0.00433s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - [cached since 0.00433s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine [cached since 0.004598s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - [cached since 0.004598s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,807 INFO sqlalchemy.engine.Engine [cached since 0.004849s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,807 - sqlalchemy.engine.Engine - INFO - [cached since 0.004849s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine [cached since 0.005101s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - [cached since 0.005101s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine [cached since 0.005346s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - [cached since 0.005346s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine [cached since 0.005597s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - [cached since 0.005597s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,808 INFO sqlalchemy.engine.Engine [cached since 0.005849s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,808 - sqlalchemy.engine.Engine - INFO - [cached since 0.005849s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,809 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,809 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,809 INFO sqlalchemy.engine.Engine [cached since 0.006093s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.006093s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,809 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,809 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:22,809 INFO sqlalchemy.engine.Engine [cached since 0.006338s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.006338s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:22,809 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:35:22,809 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:35:22,809 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:35:22,810 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:35:22,810 - app.main - INFO - Cache service inicializado
2025-08-08 15:35:22,810 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:35:22,810 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:35:33,532 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:35:33,532 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:35:33,532 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86459]
INFO:     Started server process [86489]
INFO:     Waiting for application startup.
2025-08-08 15:35:36,907 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:35:36,908 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:35:36,927 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:35:36,927 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:35:36,927 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:36,927 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:36,928 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:35:36,928 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:35:36,928 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:36,928 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:36,929 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:35:36,929 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:35:36,929 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:36,929 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:36,929 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:35:36,929 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:35:36,932 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,932 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,932 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,932 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,933 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,933 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,933 INFO sqlalchemy.engine.Engine [cached since 0.001849s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,933 - sqlalchemy.engine.Engine - INFO - [cached since 0.001849s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,934 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,934 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,934 INFO sqlalchemy.engine.Engine [cached since 0.002394s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,934 - sqlalchemy.engine.Engine - INFO - [cached since 0.002394s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,934 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,934 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,934 INFO sqlalchemy.engine.Engine [cached since 0.002827s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,934 - sqlalchemy.engine.Engine - INFO - [cached since 0.002827s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,935 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,935 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,935 INFO sqlalchemy.engine.Engine [cached since 0.00323s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,935 - sqlalchemy.engine.Engine - INFO - [cached since 0.00323s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,935 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,935 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,935 INFO sqlalchemy.engine.Engine [cached since 0.00361s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,935 - sqlalchemy.engine.Engine - INFO - [cached since 0.00361s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,935 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,935 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine [cached since 0.00401s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - [cached since 0.00401s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine [cached since 0.004275s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - [cached since 0.004275s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine [cached since 0.004549s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - [cached since 0.004549s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,936 INFO sqlalchemy.engine.Engine [cached since 0.00484s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,936 - sqlalchemy.engine.Engine - INFO - [cached since 0.00484s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine [cached since 0.005091s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.005091s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine [cached since 0.005338s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.005338s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine [cached since 0.005594s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.005594s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,937 INFO sqlalchemy.engine.Engine [cached since 0.00584s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.00584s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine [cached since 0.006092s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - [cached since 0.006092s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine [cached since 0.006383s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - [cached since 0.006383s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:36,938 INFO sqlalchemy.engine.Engine [cached since 0.006656s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,938 - sqlalchemy.engine.Engine - INFO - [cached since 0.006656s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:36,939 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:35:36,939 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:35:36,939 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:35:36,939 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:35:36,939 - app.main - INFO - Cache service inicializado
2025-08-08 15:35:36,939 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:35:36,939 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:35:56,074 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:35:56,075 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:35:56,075 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86489]
INFO:     Started server process [86738]
INFO:     Waiting for application startup.
2025-08-08 15:35:59,505 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:35:59,507 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:35:59,526 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:35:59,526 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:35:59,526 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:59,526 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:59,527 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:35:59,527 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:35:59,527 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:59,527 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:59,528 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:35:59,528 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:35:59,528 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:35:59,528 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:35:59,528 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:35:59,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:35:59,531 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,531 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,531 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,531 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,533 INFO sqlalchemy.engine.Engine [cached since 0.002067s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.002067s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,533 INFO sqlalchemy.engine.Engine [cached since 0.002567s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.002567s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine [cached since 0.002958s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.002958s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine [cached since 0.003322s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.003322s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,534 INFO sqlalchemy.engine.Engine [cached since 0.003657s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.003657s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine [cached since 0.004002s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.004002s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine [cached since 0.004277s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.004277s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,535 INFO sqlalchemy.engine.Engine [cached since 0.004532s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.004532s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine [cached since 0.004792s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - [cached since 0.004792s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine [cached since 0.005041s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - [cached since 0.005041s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine [cached since 0.005298s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - [cached since 0.005298s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,536 INFO sqlalchemy.engine.Engine [cached since 0.005546s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,536 - sqlalchemy.engine.Engine - INFO - [cached since 0.005546s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine [cached since 0.005822s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - [cached since 0.005822s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine [cached since 0.0061s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - [cached since 0.0061s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine [cached since 0.006422s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - [cached since 0.006422s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:35:59,537 INFO sqlalchemy.engine.Engine [cached since 0.006685s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,537 - sqlalchemy.engine.Engine - INFO - [cached since 0.006685s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:35:59,538 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:35:59,538 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:35:59,538 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:35:59,539 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:35:59,539 - app.main - INFO - Cache service inicializado
2025-08-08 15:35:59,539 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:35:59,539 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/components/auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:36:04,147 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:36:04,147 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:36:04,147 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86738]
INFO:     Started server process [86749]
INFO:     Waiting for application startup.
2025-08-08 15:36:07,582 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:36:07,584 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:36:07,603 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:36:07,603 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:36:07,603 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:36:07,603 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:36:07,604 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:36:07,604 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:36:07,604 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:36:07,604 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:36:07,604 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:36:07,604 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:36:07,604 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:36:07,604 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:36:07,605 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:36:07,605 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:36:07,607 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,607 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,607 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,607 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,609 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,609 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,609 INFO sqlalchemy.engine.Engine [cached since 0.00171s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,609 - sqlalchemy.engine.Engine - INFO - [cached since 0.00171s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,609 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,609 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,609 INFO sqlalchemy.engine.Engine [cached since 0.002139s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,609 - sqlalchemy.engine.Engine - INFO - [cached since 0.002139s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,610 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,610 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,610 INFO sqlalchemy.engine.Engine [cached since 0.002574s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,610 - sqlalchemy.engine.Engine - INFO - [cached since 0.002574s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,610 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,610 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,610 INFO sqlalchemy.engine.Engine [cached since 0.002924s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,610 - sqlalchemy.engine.Engine - INFO - [cached since 0.002924s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine [cached since 0.003251s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.003251s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine [cached since 0.003586s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.003586s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine [cached since 0.003867s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.003867s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,611 INFO sqlalchemy.engine.Engine [cached since 0.004122s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,611 - sqlalchemy.engine.Engine - INFO - [cached since 0.004122s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine [cached since 0.004386s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - [cached since 0.004386s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine [cached since 0.004662s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - [cached since 0.004662s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,612 INFO sqlalchemy.engine.Engine [cached since 0.004938s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,612 - sqlalchemy.engine.Engine - INFO - [cached since 0.004938s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine [cached since 0.005233s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - [cached since 0.005233s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine [cached since 0.005538s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - [cached since 0.005538s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,613 INFO sqlalchemy.engine.Engine [cached since 0.005935s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,613 - sqlalchemy.engine.Engine - INFO - [cached since 0.005935s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,614 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,614 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,614 INFO sqlalchemy.engine.Engine [cached since 0.006321s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,614 - sqlalchemy.engine.Engine - INFO - [cached since 0.006321s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,614 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,614 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:36:07,614 INFO sqlalchemy.engine.Engine [cached since 0.006608s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,614 - sqlalchemy.engine.Engine - INFO - [cached since 0.006608s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:36:07,614 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:36:07,614 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:36:07,615 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:36:07,615 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:36:07,615 - app.main - INFO - Cache service inicializado
2025-08-08 15:36:07,615 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:36:07,615 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/test_auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:37:09,626 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:37:09,626 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:37:09,627 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [86749]
WARNING:  WatchFiles detected changes in 'scripts/test_auth.py'. Reloading...
INFO:     Started server process [92176]
INFO:     Waiting for application startup.
2025-08-08 15:37:13,783 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:37:13,784 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:37:13,808 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:37:13,808 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:37:13,808 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:13,808 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:13,809 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:37:13,809 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:37:13,809 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:13,809 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:13,810 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:37:13,810 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:37:13,810 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:13,810 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:13,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:37:13,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:37:13,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,814 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,814 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,816 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,816 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,816 INFO sqlalchemy.engine.Engine [cached since 0.002476s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.002476s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,817 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,817 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,817 INFO sqlalchemy.engine.Engine [cached since 0.003003s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,817 - sqlalchemy.engine.Engine - INFO - [cached since 0.003003s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,817 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,817 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,817 INFO sqlalchemy.engine.Engine [cached since 0.00344s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,817 - sqlalchemy.engine.Engine - INFO - [cached since 0.00344s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine [cached since 0.003954s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - [cached since 0.003954s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine [cached since 0.004378s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - [cached since 0.004378s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,818 INFO sqlalchemy.engine.Engine [cached since 0.004809s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,818 - sqlalchemy.engine.Engine - INFO - [cached since 0.004809s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,819 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,819 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,819 INFO sqlalchemy.engine.Engine [cached since 0.005199s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,819 - sqlalchemy.engine.Engine - INFO - [cached since 0.005199s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,819 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,819 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,819 INFO sqlalchemy.engine.Engine [cached since 0.005521s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,819 - sqlalchemy.engine.Engine - INFO - [cached since 0.005521s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,819 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,819 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,820 INFO sqlalchemy.engine.Engine [cached since 0.005883s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,820 - sqlalchemy.engine.Engine - INFO - [cached since 0.005883s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,820 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,820 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,820 INFO sqlalchemy.engine.Engine [cached since 0.006267s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,820 - sqlalchemy.engine.Engine - INFO - [cached since 0.006267s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,820 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,820 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,820 INFO sqlalchemy.engine.Engine [cached since 0.006632s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,820 - sqlalchemy.engine.Engine - INFO - [cached since 0.006632s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine [cached since 0.006923s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - [cached since 0.006923s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine [cached since 0.007369s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - [cached since 0.007369s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,821 INFO sqlalchemy.engine.Engine [cached since 0.007847s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,821 - sqlalchemy.engine.Engine - INFO - [cached since 0.007847s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,822 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,822 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,822 INFO sqlalchemy.engine.Engine [cached since 0.008215s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.008215s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,822 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,822 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:13,822 INFO sqlalchemy.engine.Engine [cached since 0.008562s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.008562s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:13,823 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:37:13,823 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:37:13,823 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:37:13,824 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:37:13,824 - app.main - INFO - Cache service inicializado
2025-08-08 15:37:13,824 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:37:13,824 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [92547]
INFO:     Waiting for application startup.
2025-08-08 15:37:17,951 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:37:17,952 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:37:17,979 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:37:17,979 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:37:17,979 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:17,979 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:17,980 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:37:17,980 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:37:17,980 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:17,980 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:17,981 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:37:17,981 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:37:17,982 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:37:17,982 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:37:17,982 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:37:17,982 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:37:17,986 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,986 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,986 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,986 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,989 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,989 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,990 INFO sqlalchemy.engine.Engine [cached since 0.003672s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,990 - sqlalchemy.engine.Engine - INFO - [cached since 0.003672s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,990 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,990 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,990 INFO sqlalchemy.engine.Engine [cached since 0.004612s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,990 - sqlalchemy.engine.Engine - INFO - [cached since 0.004612s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,991 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,991 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,991 INFO sqlalchemy.engine.Engine [cached since 0.005264s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,991 - sqlalchemy.engine.Engine - INFO - [cached since 0.005264s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,992 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,992 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,992 INFO sqlalchemy.engine.Engine [cached since 0.005841s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,992 - sqlalchemy.engine.Engine - INFO - [cached since 0.005841s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,992 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,992 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,992 INFO sqlalchemy.engine.Engine [cached since 0.006442s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,992 - sqlalchemy.engine.Engine - INFO - [cached since 0.006442s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,993 INFO sqlalchemy.engine.Engine [cached since 0.007048s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.007048s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,993 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,993 INFO sqlalchemy.engine.Engine [cached since 0.007534s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,993 - sqlalchemy.engine.Engine - INFO - [cached since 0.007534s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,994 INFO sqlalchemy.engine.Engine [cached since 0.007956s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.007956s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,994 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,994 INFO sqlalchemy.engine.Engine [cached since 0.008355s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,994 - sqlalchemy.engine.Engine - INFO - [cached since 0.008355s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine [cached since 0.008728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.008728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine [cached since 0.009094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.009094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,995 INFO sqlalchemy.engine.Engine [cached since 0.00953s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.00953s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,996 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,996 INFO sqlalchemy.engine.Engine [cached since 0.0099s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.0099s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,996 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,996 INFO sqlalchemy.engine.Engine [cached since 0.01035s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,996 - sqlalchemy.engine.Engine - INFO - [cached since 0.01035s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,997 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,997 INFO sqlalchemy.engine.Engine [cached since 0.01081s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,997 - sqlalchemy.engine.Engine - INFO - [cached since 0.01081s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,997 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:37:17,997 INFO sqlalchemy.engine.Engine [cached since 0.01121s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,997 - sqlalchemy.engine.Engine - INFO - [cached since 0.01121s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:37:17,998 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:37:17,998 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:37:17,998 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:37:17,999 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:37:17,999 - app.main - INFO - Cache service inicializado
2025-08-08 15:37:17,999 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:37:17,999 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'alembic/versions/2025_08_08_1526-115422716842_add_admin_authentication_system.py', 'app/services/auth_manager.py', 'dashboard_whatsapp_complete.py', 'app/components/auth.py', 'scripts/create_admin_user.py', 'app/models/database.py', 'scripts/test_auth.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:42:31,131 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:42:31,131 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:42:31,131 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [92547]
INFO:     Started server process [141251]
INFO:     Waiting for application startup.
2025-08-08 15:42:34,618 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:42:34,620 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:42:34,643 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:42:34,643 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:42:34,643 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:42:34,643 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:42:34,644 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:42:34,644 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:42:34,644 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:42:34,644 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:42:34,645 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:42:34,645 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:42:34,645 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:42:34,645 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:42:34,646 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:42:34,646 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:42:34,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,648 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,648 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,648 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,650 INFO sqlalchemy.engine.Engine [cached since 0.001917s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,650 - sqlalchemy.engine.Engine - INFO - [cached since 0.001917s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,650 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,651 INFO sqlalchemy.engine.Engine [cached since 0.00237s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.00237s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,651 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,651 INFO sqlalchemy.engine.Engine [cached since 0.002761s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.002761s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,651 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,651 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,651 INFO sqlalchemy.engine.Engine [cached since 0.003145s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,651 - sqlalchemy.engine.Engine - INFO - [cached since 0.003145s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine [cached since 0.003512s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.003512s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine [cached since 0.003902s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.003902s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,652 INFO sqlalchemy.engine.Engine [cached since 0.004199s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,652 - sqlalchemy.engine.Engine - INFO - [cached since 0.004199s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine [cached since 0.00449s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.00449s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine [cached since 0.004794s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.004794s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine [cached since 0.005093s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - [cached since 0.005093s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,653 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,653 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine [cached since 0.00538s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.00538s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine [cached since 0.00567s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.00567s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine [cached since 0.00596s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.00596s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,654 INFO sqlalchemy.engine.Engine [cached since 0.006244s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,654 - sqlalchemy.engine.Engine - INFO - [cached since 0.006244s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,655 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,655 INFO sqlalchemy.engine.Engine [cached since 0.006525s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,655 - sqlalchemy.engine.Engine - INFO - [cached since 0.006525s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,655 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,655 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:42:34,655 INFO sqlalchemy.engine.Engine [cached since 0.006823s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,655 - sqlalchemy.engine.Engine - INFO - [cached since 0.006823s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:42:34,655 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:42:34,655 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:42:34,656 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:42:34,656 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:42:34,656 - app.main - INFO - Cache service inicializado
2025-08-08 15:42:34,656 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:42:34,656 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:46:09,024 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:46:09,024 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:46:09,024 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [141251]
INFO:     Started server process [166138]
INFO:     Waiting for application startup.
2025-08-08 15:46:12,600 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:46:12,601 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:46:12,625 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:46:12,625 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:46:12,625 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:12,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:12,626 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:46:12,626 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:46:12,626 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:12,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:12,627 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:46:12,627 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:46:12,627 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:12,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:12,627 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:46:12,627 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:46:12,630 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,630 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,630 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,630 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,631 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,631 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,632 INFO sqlalchemy.engine.Engine [cached since 0.001926s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,632 - sqlalchemy.engine.Engine - INFO - [cached since 0.001926s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,632 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,632 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,632 INFO sqlalchemy.engine.Engine [cached since 0.002387s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,632 - sqlalchemy.engine.Engine - INFO - [cached since 0.002387s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,632 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,632 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,632 INFO sqlalchemy.engine.Engine [cached since 0.002831s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,632 - sqlalchemy.engine.Engine - INFO - [cached since 0.002831s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,633 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,633 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,633 INFO sqlalchemy.engine.Engine [cached since 0.003236s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,633 - sqlalchemy.engine.Engine - INFO - [cached since 0.003236s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,633 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,633 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,633 INFO sqlalchemy.engine.Engine [cached since 0.00367s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,633 - sqlalchemy.engine.Engine - INFO - [cached since 0.00367s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine [cached since 0.004079s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.004079s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine [cached since 0.004405s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.004405s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,634 INFO sqlalchemy.engine.Engine [cached since 0.004709s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.004709s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine [cached since 0.005038s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.005038s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine [cached since 0.005337s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.005337s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,635 INFO sqlalchemy.engine.Engine [cached since 0.005671s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.005671s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine [cached since 0.005968s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.005968s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine [cached since 0.006271s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.006271s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine [cached since 0.006597s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.006597s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,637 INFO sqlalchemy.engine.Engine [cached since 0.006897s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.006897s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,637 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,637 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:12,637 INFO sqlalchemy.engine.Engine [cached since 0.007187s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.007187s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:12,637 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:46:12,637 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:46:12,637 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:46:12,638 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:46:12,638 - app.main - INFO - Cache service inicializado
2025-08-08 15:46:12,638 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:46:12,638 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:46:21,653 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:46:21,653 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:46:21,654 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [166138]
INFO:     Started server process [167259]
INFO:     Waiting for application startup.
2025-08-08 15:46:25,207 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:46:25,209 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:46:25,230 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:46:25,230 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:46:25,230 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:25,230 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:25,231 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:46:25,231 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:46:25,231 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:25,231 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:25,232 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:46:25,232 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:46:25,232 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:46:25,232 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:46:25,233 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:46:25,233 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:46:25,235 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,235 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,235 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,235 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,237 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,237 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,237 INFO sqlalchemy.engine.Engine [cached since 0.001883s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,237 - sqlalchemy.engine.Engine - INFO - [cached since 0.001883s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,237 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,237 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,237 INFO sqlalchemy.engine.Engine [cached since 0.002403s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,237 - sqlalchemy.engine.Engine - INFO - [cached since 0.002403s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,238 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,238 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,238 INFO sqlalchemy.engine.Engine [cached since 0.002898s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,238 - sqlalchemy.engine.Engine - INFO - [cached since 0.002898s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,238 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,238 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,238 INFO sqlalchemy.engine.Engine [cached since 0.003359s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,238 - sqlalchemy.engine.Engine - INFO - [cached since 0.003359s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine [cached since 0.003735s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - [cached since 0.003735s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine [cached since 0.004192s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - [cached since 0.004192s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,239 INFO sqlalchemy.engine.Engine [cached since 0.00453s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,239 - sqlalchemy.engine.Engine - INFO - [cached since 0.00453s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine [cached since 0.004829s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - [cached since 0.004829s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine [cached since 0.005132s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - [cached since 0.005132s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,240 INFO sqlalchemy.engine.Engine [cached since 0.005445s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,240 - sqlalchemy.engine.Engine - INFO - [cached since 0.005445s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine [cached since 0.005745s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - [cached since 0.005745s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine [cached since 0.006031s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - [cached since 0.006031s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine [cached since 0.006323s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - [cached since 0.006323s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,241 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,241 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,242 INFO sqlalchemy.engine.Engine [cached since 0.006613s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,242 - sqlalchemy.engine.Engine - INFO - [cached since 0.006613s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,242 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,242 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,242 INFO sqlalchemy.engine.Engine [cached since 0.006938s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,242 - sqlalchemy.engine.Engine - INFO - [cached since 0.006938s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,242 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,242 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:46:25,242 INFO sqlalchemy.engine.Engine [cached since 0.007253s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,242 - sqlalchemy.engine.Engine - INFO - [cached since 0.007253s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:46:25,243 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:46:25,243 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:46:25,243 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:46:25,244 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:46:25,244 - app.main - INFO - Cache service inicializado
2025-08-08 15:46:25,244 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:46:25,244 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:50:29,063 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:50:29,063 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:50:29,063 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [167259]
INFO:     Started server process [194046]
INFO:     Waiting for application startup.
2025-08-08 15:50:32,799 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:50:32,800 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:50:32,821 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:50:32,821 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:50:32,821 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:50:32,821 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:50:32,822 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:50:32,822 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:50:32,822 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:50:32,822 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:50:32,823 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:50:32,823 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:50:32,823 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:50:32,823 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:50:32,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:50:32,824 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:50:32,826 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,826 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,826 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,826 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,829 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,829 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,829 INFO sqlalchemy.engine.Engine [cached since 0.002834s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,829 - sqlalchemy.engine.Engine - INFO - [cached since 0.002834s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,829 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,829 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,829 INFO sqlalchemy.engine.Engine [cached since 0.003437s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,829 - sqlalchemy.engine.Engine - INFO - [cached since 0.003437s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,830 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,830 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,830 INFO sqlalchemy.engine.Engine [cached since 0.003957s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.003957s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,830 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,830 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,830 INFO sqlalchemy.engine.Engine [cached since 0.004501s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,830 - sqlalchemy.engine.Engine - INFO - [cached since 0.004501s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,831 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,831 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,831 INFO sqlalchemy.engine.Engine [cached since 0.00506s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,831 - sqlalchemy.engine.Engine - INFO - [cached since 0.00506s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine [cached since 0.005688s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.005688s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine [cached since 0.006074s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.006074s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,832 INFO sqlalchemy.engine.Engine [cached since 0.006443s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,832 - sqlalchemy.engine.Engine - INFO - [cached since 0.006443s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine [cached since 0.006759s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.006759s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine [cached since 0.007052s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.007052s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,833 INFO sqlalchemy.engine.Engine [cached since 0.007428s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,833 - sqlalchemy.engine.Engine - INFO - [cached since 0.007428s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine [cached since 0.007721s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.007721s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine [cached since 0.008031s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.008031s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine [cached since 0.008327s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.008327s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,834 INFO sqlalchemy.engine.Engine [cached since 0.008593s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.008593s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,835 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,835 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:50:32,835 INFO sqlalchemy.engine.Engine [cached since 0.008874s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,835 - sqlalchemy.engine.Engine - INFO - [cached since 0.008874s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:50:32,835 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:50:32,835 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:50:32,835 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:50:32,836 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:50:32,836 - app.main - INFO - Cache service inicializado
2025-08-08 15:50:32,836 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:50:32,836 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 15:51:48,067 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 15:51:48,067 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 15:51:48,067 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [194046]
INFO:     Started server process [201773]
INFO:     Waiting for application startup.
2025-08-08 15:51:51,881 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 15:51:51,883 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 15:51:51,902 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 15:51:51,902 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 15:51:51,903 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:51:51,903 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:51:51,904 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 15:51:51,904 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 15:51:51,904 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:51:51,904 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:51:51,905 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 15:51:51,905 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 15:51:51,905 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 15:51:51,905 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 15:51:51,905 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 15:51:51,905 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 15:51:51,908 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,908 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,908 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,908 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,910 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,910 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,910 INFO sqlalchemy.engine.Engine [cached since 0.002088s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,910 - sqlalchemy.engine.Engine - INFO - [cached since 0.002088s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,910 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,910 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,911 INFO sqlalchemy.engine.Engine [cached since 0.002615s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,911 - sqlalchemy.engine.Engine - INFO - [cached since 0.002615s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,911 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,911 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,911 INFO sqlalchemy.engine.Engine [cached since 0.003023s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,911 - sqlalchemy.engine.Engine - INFO - [cached since 0.003023s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,911 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,911 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,911 INFO sqlalchemy.engine.Engine [cached since 0.003428s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,911 - sqlalchemy.engine.Engine - INFO - [cached since 0.003428s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,912 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,912 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,912 INFO sqlalchemy.engine.Engine [cached since 0.003883s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,912 - sqlalchemy.engine.Engine - INFO - [cached since 0.003883s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,912 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,912 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,912 INFO sqlalchemy.engine.Engine [cached since 0.004383s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,912 - sqlalchemy.engine.Engine - INFO - [cached since 0.004383s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine [cached since 0.004764s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - [cached since 0.004764s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine [cached since 0.005127s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - [cached since 0.005127s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,913 INFO sqlalchemy.engine.Engine [cached since 0.005449s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,913 - sqlalchemy.engine.Engine - INFO - [cached since 0.005449s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine [cached since 0.005717s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - [cached since 0.005717s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine [cached since 0.005976s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - [cached since 0.005976s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine [cached since 0.00626s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - [cached since 0.00626s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,914 INFO sqlalchemy.engine.Engine [cached since 0.006524s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,914 - sqlalchemy.engine.Engine - INFO - [cached since 0.006524s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine [cached since 0.006864s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - [cached since 0.006864s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine [cached since 0.007209s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - [cached since 0.007209s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 15:51:51,915 INFO sqlalchemy.engine.Engine [cached since 0.007537s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,915 - sqlalchemy.engine.Engine - INFO - [cached since 0.007537s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 15:51:51,916 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 15:51:51,916 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 15:51:51,916 - app.main - INFO - Banco de dados inicializado
2025-08-08 15:51:51,917 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 15:51:51,917 - app.main - INFO - Cache service inicializado
2025-08-08 15:51:51,917 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 15:51:51,917 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/validators.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:39:36,511 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:39:36,511 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:39:36,511 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [201773]
INFO:     Started server process [442228]
INFO:     Waiting for application startup.
2025-08-08 16:39:40,381 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:39:40,383 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:39:40,408 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:39:40,408 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:39:40,408 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:40,408 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:40,409 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:39:40,409 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:39:40,409 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:40,409 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:40,410 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:39:40,410 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:39:40,410 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:40,410 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:40,411 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:39:40,411 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:39:40,413 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,413 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,416 INFO sqlalchemy.engine.Engine [cached since 0.002443s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.002443s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,416 INFO sqlalchemy.engine.Engine [cached since 0.003017s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.003017s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,417 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,417 INFO sqlalchemy.engine.Engine [cached since 0.003562s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.003562s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,417 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,417 INFO sqlalchemy.engine.Engine [cached since 0.004052s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.004052s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,418 INFO sqlalchemy.engine.Engine [cached since 0.004518s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.004518s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,418 INFO sqlalchemy.engine.Engine [cached since 0.005009s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.005009s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine [cached since 0.005354s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.005354s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine [cached since 0.005662s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.005662s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine [cached since 0.006014s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.006014s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine [cached since 0.006327s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - [cached since 0.006327s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine [cached since 0.006625s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - [cached since 0.006625s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine [cached since 0.006938s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - [cached since 0.006938s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,420 INFO sqlalchemy.engine.Engine [cached since 0.007235s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,420 - sqlalchemy.engine.Engine - INFO - [cached since 0.007235s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine [cached since 0.007522s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - [cached since 0.007522s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine [cached since 0.007856s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - [cached since 0.007856s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:40,421 INFO sqlalchemy.engine.Engine [cached since 0.008202s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,421 - sqlalchemy.engine.Engine - INFO - [cached since 0.008202s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:40,422 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:39:40,422 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:39:40,422 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:39:40,423 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:39:40,423 - app.main - INFO - Cache service inicializado
2025-08-08 16:39:40,423 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:39:40,423 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:39:49,540 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:39:49,540 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:39:49,540 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [442228]
INFO:     Started server process [442904]
INFO:     Waiting for application startup.
2025-08-08 16:39:53,519 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:39:53,521 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:39:53,548 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:39:53,548 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:39:53,548 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:53,548 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:53,549 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:39:53,549 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:39:53,549 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:53,549 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:53,550 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:39:53,550 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:39:53,550 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:39:53,550 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:39:53,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:39:53,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:39:53,555 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,555 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,555 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,555 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,558 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,558 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,558 INFO sqlalchemy.engine.Engine [cached since 0.003268s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,558 - sqlalchemy.engine.Engine - INFO - [cached since 0.003268s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,558 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,558 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,558 INFO sqlalchemy.engine.Engine [cached since 0.003806s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,558 - sqlalchemy.engine.Engine - INFO - [cached since 0.003806s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,559 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,559 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,559 INFO sqlalchemy.engine.Engine [cached since 0.004248s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,559 - sqlalchemy.engine.Engine - INFO - [cached since 0.004248s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,559 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,559 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,559 INFO sqlalchemy.engine.Engine [cached since 0.004698s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,559 - sqlalchemy.engine.Engine - INFO - [cached since 0.004698s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine [cached since 0.005079s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - [cached since 0.005079s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine [cached since 0.005476s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - [cached since 0.005476s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,560 INFO sqlalchemy.engine.Engine [cached since 0.00582s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,560 - sqlalchemy.engine.Engine - INFO - [cached since 0.00582s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine [cached since 0.006105s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - [cached since 0.006105s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine [cached since 0.006411s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - [cached since 0.006411s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,561 INFO sqlalchemy.engine.Engine [cached since 0.006707s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,561 - sqlalchemy.engine.Engine - INFO - [cached since 0.006707s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine [cached since 0.007094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - [cached since 0.007094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine [cached since 0.007477s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - [cached since 0.007477s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,562 INFO sqlalchemy.engine.Engine [cached since 0.007823s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,562 - sqlalchemy.engine.Engine - INFO - [cached since 0.007823s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine [cached since 0.008151s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - [cached since 0.008151s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine [cached since 0.008504s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - [cached since 0.008504s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:39:53,563 INFO sqlalchemy.engine.Engine [cached since 0.008854s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,563 - sqlalchemy.engine.Engine - INFO - [cached since 0.008854s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:39:53,564 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:39:53,564 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:39:53,564 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:39:53,565 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:39:53,565 - app.main - INFO - Cache service inicializado
2025-08-08 16:39:53,565 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:39:53,565 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:40:08,797 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:40:08,798 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:40:08,798 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [442904]
INFO:     Started server process [443948]
INFO:     Waiting for application startup.
2025-08-08 16:40:12,300 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:40:12,301 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:40:12,322 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:40:12,322 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:40:12,322 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:12,322 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:12,323 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:40:12,323 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:40:12,323 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:12,323 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:12,324 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:40:12,324 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:40:12,324 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:12,324 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:12,325 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:40:12,325 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:40:12,327 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,327 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,327 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,327 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,329 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,329 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,330 INFO sqlalchemy.engine.Engine [cached since 0.002581s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.002581s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,330 INFO sqlalchemy.engine.Engine [cached since 0.003088s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.003088s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,330 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,330 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,330 INFO sqlalchemy.engine.Engine [cached since 0.003534s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,330 - sqlalchemy.engine.Engine - INFO - [cached since 0.003534s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,331 INFO sqlalchemy.engine.Engine [cached since 0.00394s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.00394s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,331 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,331 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,331 INFO sqlalchemy.engine.Engine [cached since 0.004344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,331 - sqlalchemy.engine.Engine - INFO - [cached since 0.004344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,332 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,332 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,332 INFO sqlalchemy.engine.Engine [cached since 0.004894s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.004894s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,332 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,332 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,332 INFO sqlalchemy.engine.Engine [cached since 0.005333s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,332 - sqlalchemy.engine.Engine - INFO - [cached since 0.005333s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine [cached since 0.00574s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.00574s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine [cached since 0.006089s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.006089s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,333 INFO sqlalchemy.engine.Engine [cached since 0.006366s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,333 - sqlalchemy.engine.Engine - INFO - [cached since 0.006366s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine [cached since 0.006634s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.006634s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine [cached since 0.0069s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.0069s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine [cached since 0.007186s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.007186s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,334 INFO sqlalchemy.engine.Engine [cached since 0.007459s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,334 - sqlalchemy.engine.Engine - INFO - [cached since 0.007459s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,335 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,335 INFO sqlalchemy.engine.Engine [cached since 0.007717s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.007717s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,335 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,335 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:12,335 INFO sqlalchemy.engine.Engine [cached since 0.007962s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,335 - sqlalchemy.engine.Engine - INFO - [cached since 0.007962s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:12,335 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:40:12,335 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:40:12,336 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:40:12,336 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:40:12,336 - app.main - INFO - Cache service inicializado
2025-08-08 16:40:12,336 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:40:12,336 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:40:29,064 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:40:29,064 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:40:29,064 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [443948]
INFO:     Started server process [443991]
INFO:     Waiting for application startup.
2025-08-08 16:40:32,354 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:40:32,355 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:40:32,374 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:40:32,374 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:40:32,374 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:32,374 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:32,375 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:40:32,375 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:40:32,375 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:32,375 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:32,376 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:40:32,376 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:40:32,376 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:40:32,376 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:40:32,376 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:40:32,376 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:40:32,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,379 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,379 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,379 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,380 INFO sqlalchemy.engine.Engine [cached since 0.001726s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,380 - sqlalchemy.engine.Engine - INFO - [cached since 0.001726s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine [cached since 0.002129s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.002129s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine [cached since 0.002501s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.002501s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,381 INFO sqlalchemy.engine.Engine [cached since 0.00286s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.00286s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine [cached since 0.003219s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.003219s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine [cached since 0.00359s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.00359s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,382 INFO sqlalchemy.engine.Engine [cached since 0.003875s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.003875s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine [cached since 0.004157s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.004157s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine [cached since 0.004444s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.004444s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine [cached since 0.004728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.004728s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,383 INFO sqlalchemy.engine.Engine [cached since 0.005007s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.005007s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine [cached since 0.005281s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - [cached since 0.005281s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine [cached since 0.005558s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - [cached since 0.005558s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine [cached since 0.005837s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - [cached since 0.005837s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,384 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,384 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,385 INFO sqlalchemy.engine.Engine [cached since 0.006114s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,385 - sqlalchemy.engine.Engine - INFO - [cached since 0.006114s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,385 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,385 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:40:32,385 INFO sqlalchemy.engine.Engine [cached since 0.006382s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,385 - sqlalchemy.engine.Engine - INFO - [cached since 0.006382s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:40:32,385 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:40:32,385 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:40:32,385 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:40:32,386 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:40:32,386 - app.main - INFO - Cache service inicializado
2025-08-08 16:40:32,386 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:40:32,386 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:40:57,237 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:40:57,237 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:40:57,238 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [443991]
INFO:     Started server process [444033]
INFO:     Waiting for application startup.
2025-08-08 16:41:00,544 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:41:00,546 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:41:00,564 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:41:00,564 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:41:00,564 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:00,564 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:00,565 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:41:00,565 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:41:00,565 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:00,565 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:00,565 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:41:00,565 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:41:00,565 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:00,565 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:00,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:41:00,566 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:41:00,568 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,568 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,568 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,568 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,570 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,570 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,570 INFO sqlalchemy.engine.Engine [cached since 0.001956s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,570 - sqlalchemy.engine.Engine - INFO - [cached since 0.001956s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,570 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,570 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,571 INFO sqlalchemy.engine.Engine [cached since 0.002375s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,571 - sqlalchemy.engine.Engine - INFO - [cached since 0.002375s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,571 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,571 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,571 INFO sqlalchemy.engine.Engine [cached since 0.002784s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,571 - sqlalchemy.engine.Engine - INFO - [cached since 0.002784s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,571 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,571 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,571 INFO sqlalchemy.engine.Engine [cached since 0.003166s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,571 - sqlalchemy.engine.Engine - INFO - [cached since 0.003166s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine [cached since 0.003512s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.003512s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine [cached since 0.003865s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.003865s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,572 INFO sqlalchemy.engine.Engine [cached since 0.00413s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,572 - sqlalchemy.engine.Engine - INFO - [cached since 0.00413s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine [cached since 0.004394s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - [cached since 0.004394s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine [cached since 0.004663s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - [cached since 0.004663s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine [cached since 0.004923s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - [cached since 0.004923s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,573 INFO sqlalchemy.engine.Engine [cached since 0.005181s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,573 - sqlalchemy.engine.Engine - INFO - [cached since 0.005181s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine [cached since 0.005436s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - [cached since 0.005436s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine [cached since 0.005688s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - [cached since 0.005688s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine [cached since 0.005951s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - [cached since 0.005951s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,574 INFO sqlalchemy.engine.Engine [cached since 0.006208s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,574 - sqlalchemy.engine.Engine - INFO - [cached since 0.006208s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,575 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,575 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:00,575 INFO sqlalchemy.engine.Engine [cached since 0.006478s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,575 - sqlalchemy.engine.Engine - INFO - [cached since 0.006478s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:00,575 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:41:00,575 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:41:00,575 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:41:00,576 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:41:00,576 - app.main - INFO - Cache service inicializado
2025-08-08 16:41:00,576 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:41:00,576 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:41:50,786 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:41:50,786 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:41:50,786 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [444033]
INFO:     Started server process [444105]
INFO:     Waiting for application startup.
2025-08-08 16:41:54,021 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:41:54,023 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:41:54,041 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:41:54,041 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:41:54,041 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:54,041 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:54,042 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:41:54,042 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:41:54,042 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:54,042 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:54,043 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:41:54,043 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:41:54,043 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:41:54,043 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:41:54,043 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:41:54,043 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:41:54,045 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,045 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,046 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,046 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,047 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,047 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,047 INFO sqlalchemy.engine.Engine [cached since 0.001628s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,047 - sqlalchemy.engine.Engine - INFO - [cached since 0.001628s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,047 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,047 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,047 INFO sqlalchemy.engine.Engine [cached since 0.002035s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,047 - sqlalchemy.engine.Engine - INFO - [cached since 0.002035s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,048 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,048 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,048 INFO sqlalchemy.engine.Engine [cached since 0.002412s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,048 - sqlalchemy.engine.Engine - INFO - [cached since 0.002412s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,048 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,048 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,048 INFO sqlalchemy.engine.Engine [cached since 0.00278s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,048 - sqlalchemy.engine.Engine - INFO - [cached since 0.00278s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,048 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,048 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine [cached since 0.00313s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.00313s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine [cached since 0.003498s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.003498s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine [cached since 0.003798s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.003798s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,049 INFO sqlalchemy.engine.Engine [cached since 0.004076s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,049 - sqlalchemy.engine.Engine - INFO - [cached since 0.004076s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine [cached since 0.004363s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - [cached since 0.004363s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine [cached since 0.004647s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - [cached since 0.004647s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,050 INFO sqlalchemy.engine.Engine [cached since 0.004921s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,050 - sqlalchemy.engine.Engine - INFO - [cached since 0.004921s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine [cached since 0.005191s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - [cached since 0.005191s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine [cached since 0.005465s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - [cached since 0.005465s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine [cached since 0.005753s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - [cached since 0.005753s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,051 INFO sqlalchemy.engine.Engine [cached since 0.006026s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,051 - sqlalchemy.engine.Engine - INFO - [cached since 0.006026s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,052 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,052 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:41:54,052 INFO sqlalchemy.engine.Engine [cached since 0.006299s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,052 - sqlalchemy.engine.Engine - INFO - [cached since 0.006299s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:41:54,052 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:41:54,052 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:41:54,052 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:41:54,053 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:41:54,053 - app.main - INFO - Cache service inicializado
2025-08-08 16:41:54,053 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:41:54,053 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:44:45,439 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:44:45,439 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:44:45,439 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [444105]
INFO:     Started server process [444282]
INFO:     Waiting for application startup.
2025-08-08 16:44:48,661 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:44:48,662 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:44:48,681 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:44:48,681 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:44:48,681 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:44:48,681 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:44:48,682 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:44:48,682 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:44:48,682 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:44:48,682 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:44:48,682 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:44:48,682 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:44:48,682 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:44:48,682 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:44:48,683 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:44:48,683 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:44:48,685 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,685 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,685 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,685 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,687 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,687 INFO sqlalchemy.engine.Engine [cached since 0.001739s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,687 - sqlalchemy.engine.Engine - INFO - [cached since 0.001739s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,687 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,687 INFO sqlalchemy.engine.Engine [cached since 0.00214s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,687 - sqlalchemy.engine.Engine - INFO - [cached since 0.00214s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine [cached since 0.002488s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.002488s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine [cached since 0.002815s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.002815s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,688 INFO sqlalchemy.engine.Engine [cached since 0.003196s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,688 - sqlalchemy.engine.Engine - INFO - [cached since 0.003196s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine [cached since 0.003556s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - [cached since 0.003556s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine [cached since 0.003824s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - [cached since 0.003824s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine [cached since 0.004088s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - [cached since 0.004088s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,689 INFO sqlalchemy.engine.Engine [cached since 0.00434s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,689 - sqlalchemy.engine.Engine - INFO - [cached since 0.00434s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine [cached since 0.004589s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - [cached since 0.004589s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine [cached since 0.004834s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - [cached since 0.004834s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine [cached since 0.005089s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - [cached since 0.005089s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,690 INFO sqlalchemy.engine.Engine [cached since 0.005334s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,690 - sqlalchemy.engine.Engine - INFO - [cached since 0.005334s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine [cached since 0.00558s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - [cached since 0.00558s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine [cached since 0.005817s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - [cached since 0.005817s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine [cached since 0.006063s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - [cached since 0.006063s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:44:48,691 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:44:48,691 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:44:48,692 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:44:48,692 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:44:48,692 - app.main - INFO - Cache service inicializado
2025-08-08 16:44:48,692 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:44:48,692 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/callback_examples.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:45:51,922 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:45:51,922 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:45:51,922 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [444282]
WARNING:  WatchFiles detected changes in 'app/utils/callback_examples.py'. Reloading...
INFO:     Started server process [444378]
INFO:     Waiting for application startup.
2025-08-08 16:45:55,495 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:45:55,496 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:45:55,515 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:45:55,515 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:45:55,515 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:55,515 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:55,516 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:45:55,516 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:45:55,516 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:55,516 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:55,517 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:45:55,517 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:45:55,517 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:55,517 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:55,517 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:45:55,517 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:45:55,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,520 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,520 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,521 INFO sqlalchemy.engine.Engine [cached since 0.001775s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,521 - sqlalchemy.engine.Engine - INFO - [cached since 0.001775s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine [cached since 0.002197s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.002197s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine [cached since 0.002587s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.002587s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,522 INFO sqlalchemy.engine.Engine [cached since 0.002962s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.002962s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine [cached since 0.003325s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.003325s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine [cached since 0.00371s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.00371s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,523 INFO sqlalchemy.engine.Engine [cached since 0.004014s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.004014s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine [cached since 0.004301s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.004301s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine [cached since 0.004597s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.004597s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,524 INFO sqlalchemy.engine.Engine [cached since 0.004875s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.004875s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine [cached since 0.005159s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.005159s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine [cached since 0.005435s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.005435s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine [cached since 0.005742s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.005742s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,526 INFO sqlalchemy.engine.Engine [cached since 0.006047s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,526 - sqlalchemy.engine.Engine - INFO - [cached since 0.006047s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,526 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,526 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,526 INFO sqlalchemy.engine.Engine [cached since 0.006327s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,526 - sqlalchemy.engine.Engine - INFO - [cached since 0.006327s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,526 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,526 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:55,526 INFO sqlalchemy.engine.Engine [cached since 0.006615s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,526 - sqlalchemy.engine.Engine - INFO - [cached since 0.006615s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:55,527 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:45:55,527 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:45:55,527 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:45:55,528 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:45:55,528 - app.main - INFO - Cache service inicializado
2025-08-08 16:45:55,528 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:45:55,528 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [444394]
INFO:     Waiting for application startup.
2025-08-08 16:45:58,858 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:45:58,859 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:45:58,878 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:45:58,878 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:45:58,878 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:58,878 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:58,879 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:45:58,879 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:45:58,879 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:58,879 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:58,879 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:45:58,879 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:45:58,879 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:45:58,879 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:45:58,880 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:45:58,880 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:45:58,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,882 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,882 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,882 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine [cached since 0.001747s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.001747s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine [cached since 0.00211s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.00211s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,884 INFO sqlalchemy.engine.Engine [cached since 0.002468s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.002468s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine [cached since 0.002806s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - [cached since 0.002806s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine [cached since 0.003137s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - [cached since 0.003137s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,885 INFO sqlalchemy.engine.Engine [cached since 0.003481s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,885 - sqlalchemy.engine.Engine - INFO - [cached since 0.003481s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine [cached since 0.003731s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - [cached since 0.003731s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine [cached since 0.00399s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - [cached since 0.00399s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine [cached since 0.004249s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - [cached since 0.004249s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,886 INFO sqlalchemy.engine.Engine [cached since 0.004494s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,886 - sqlalchemy.engine.Engine - INFO - [cached since 0.004494s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine [cached since 0.004734s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.004734s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine [cached since 0.004978s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.004978s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine [cached since 0.005227s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.005227s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine [cached since 0.00547s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.00547s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,888 INFO sqlalchemy.engine.Engine [cached since 0.005712s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.005712s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:45:58,888 INFO sqlalchemy.engine.Engine [cached since 0.00595s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.00595s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:45:58,888 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:45:58,888 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:45:58,888 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:45:58,889 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:45:58,889 - app.main - INFO - Cache service inicializado
2025-08-08 16:45:58,889 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:45:58,889 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/validators.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:55:42,573 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:55:42,573 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:55:42,573 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [444394]
INFO:     Started server process [446418]
INFO:     Waiting for application startup.
2025-08-08 16:55:46,349 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:55:46,350 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:55:46,370 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:55:46,370 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:55:46,370 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:55:46,370 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:55:46,371 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:55:46,371 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:55:46,371 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:55:46,371 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:55:46,372 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:55:46,372 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:55:46,372 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:55:46,372 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:55:46,373 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:55:46,373 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:55:46,375 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,375 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,375 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,375 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,378 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,378 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,378 INFO sqlalchemy.engine.Engine [cached since 0.002448s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,378 - sqlalchemy.engine.Engine - INFO - [cached since 0.002448s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,378 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,378 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,378 INFO sqlalchemy.engine.Engine [cached since 0.002976s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,378 - sqlalchemy.engine.Engine - INFO - [cached since 0.002976s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,379 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,379 INFO sqlalchemy.engine.Engine [cached since 0.00341s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,379 - sqlalchemy.engine.Engine - INFO - [cached since 0.00341s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,379 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,379 INFO sqlalchemy.engine.Engine [cached since 0.003902s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,379 - sqlalchemy.engine.Engine - INFO - [cached since 0.003902s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine [cached since 0.004352s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - [cached since 0.004352s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine [cached since 0.004742s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - [cached since 0.004742s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,380 INFO sqlalchemy.engine.Engine [cached since 0.005063s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,380 - sqlalchemy.engine.Engine - INFO - [cached since 0.005063s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine [cached since 0.005389s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.005389s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine [cached since 0.005718s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.005718s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,381 INFO sqlalchemy.engine.Engine [cached since 0.006022s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,381 - sqlalchemy.engine.Engine - INFO - [cached since 0.006022s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine [cached since 0.006358s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.006358s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine [cached since 0.006802s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.006802s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,382 INFO sqlalchemy.engine.Engine [cached since 0.007222s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,382 - sqlalchemy.engine.Engine - INFO - [cached since 0.007222s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine [cached since 0.007547s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.007547s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine [cached since 0.00785s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.00785s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:55:46,383 INFO sqlalchemy.engine.Engine [cached since 0.008129s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,383 - sqlalchemy.engine.Engine - INFO - [cached since 0.008129s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:55:46,384 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:55:46,384 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:55:46,384 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:55:46,385 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:55:46,385 - app.main - INFO - Cache service inicializado
2025-08-08 16:55:46,385 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:55:46,385 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:55:57,805 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:55:57,805 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:55:57,805 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [446418]
INFO:     Started server process [447539]
INFO:     Waiting for application startup.
2025-08-08 16:56:01,649 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:56:01,651 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:56:01,672 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:56:01,672 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:56:01,672 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:01,672 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:01,674 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:56:01,674 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:56:01,674 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:01,674 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:01,675 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:56:01,675 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:56:01,675 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:01,675 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:01,675 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:56:01,675 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:56:01,678 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,678 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,678 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,678 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,680 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,680 INFO sqlalchemy.engine.Engine [cached since 0.002407s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,680 - sqlalchemy.engine.Engine - INFO - [cached since 0.002407s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,681 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,681 INFO sqlalchemy.engine.Engine [cached since 0.003029s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.003029s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,682 INFO sqlalchemy.engine.Engine [cached since 0.003651s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.003651s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,682 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,682 INFO sqlalchemy.engine.Engine [cached since 0.004227s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,682 - sqlalchemy.engine.Engine - INFO - [cached since 0.004227s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,683 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,683 INFO sqlalchemy.engine.Engine [cached since 0.004769s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.004769s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,683 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,683 INFO sqlalchemy.engine.Engine [cached since 0.005347s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,683 - sqlalchemy.engine.Engine - INFO - [cached since 0.005347s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,684 INFO sqlalchemy.engine.Engine [cached since 0.005836s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,684 - sqlalchemy.engine.Engine - INFO - [cached since 0.005836s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,684 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,684 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,684 INFO sqlalchemy.engine.Engine [cached since 0.006284s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,684 - sqlalchemy.engine.Engine - INFO - [cached since 0.006284s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,685 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,685 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,685 INFO sqlalchemy.engine.Engine [cached since 0.0067s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,685 - sqlalchemy.engine.Engine - INFO - [cached since 0.0067s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,685 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,685 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,685 INFO sqlalchemy.engine.Engine [cached since 0.007161s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,685 - sqlalchemy.engine.Engine - INFO - [cached since 0.007161s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine [cached since 0.007587s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - [cached since 0.007587s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine [cached since 0.007994s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - [cached since 0.007994s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,686 INFO sqlalchemy.engine.Engine [cached since 0.008391s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,686 - sqlalchemy.engine.Engine - INFO - [cached since 0.008391s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine [cached since 0.008761s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - [cached since 0.008761s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine [cached since 0.009149s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - [cached since 0.009149s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:01,687 INFO sqlalchemy.engine.Engine [cached since 0.009486s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,687 - sqlalchemy.engine.Engine - INFO - [cached since 0.009486s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:01,688 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:56:01,688 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:56:01,688 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:56:01,689 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:56:01,689 - app.main - INFO - Cache service inicializado
2025-08-08 16:56:01,689 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:56:01,689 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/validators.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:56:24,028 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:56:24,029 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:56:24,029 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [447539]
INFO:     Started server process [449355]
INFO:     Waiting for application startup.
2025-08-08 16:56:27,780 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:56:27,782 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:56:27,804 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:56:27,804 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:56:27,804 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:27,804 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:27,805 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:56:27,805 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:56:27,805 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:27,805 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:27,806 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:56:27,806 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:56:27,806 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:27,806 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:27,807 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:56:27,807 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:56:27,809 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,809 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,809 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,809 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,811 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,811 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,811 INFO sqlalchemy.engine.Engine [cached since 0.002083s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,811 - sqlalchemy.engine.Engine - INFO - [cached since 0.002083s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,811 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,811 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,811 INFO sqlalchemy.engine.Engine [cached since 0.002525s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,811 - sqlalchemy.engine.Engine - INFO - [cached since 0.002525s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,812 INFO sqlalchemy.engine.Engine [cached since 0.002957s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,812 - sqlalchemy.engine.Engine - INFO - [cached since 0.002957s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,812 INFO sqlalchemy.engine.Engine [cached since 0.003359s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,812 - sqlalchemy.engine.Engine - INFO - [cached since 0.003359s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,812 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,812 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,813 INFO sqlalchemy.engine.Engine [cached since 0.003734s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.003734s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,813 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,813 INFO sqlalchemy.engine.Engine [cached since 0.004121s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.004121s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,813 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,813 INFO sqlalchemy.engine.Engine [cached since 0.004466s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,813 - sqlalchemy.engine.Engine - INFO - [cached since 0.004466s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine [cached since 0.004795s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.004795s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine [cached since 0.005075s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.005075s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine [cached since 0.005344s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - [cached since 0.005344s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,814 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,814 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,815 INFO sqlalchemy.engine.Engine [cached since 0.005733s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.005733s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,815 INFO sqlalchemy.engine.Engine [cached since 0.006079s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.006079s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,815 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,815 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,815 INFO sqlalchemy.engine.Engine [cached since 0.006447s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,815 - sqlalchemy.engine.Engine - INFO - [cached since 0.006447s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine [cached since 0.006825s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.006825s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine [cached since 0.007199s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.007199s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:27,816 INFO sqlalchemy.engine.Engine [cached since 0.007588s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,816 - sqlalchemy.engine.Engine - INFO - [cached since 0.007588s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:27,817 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:56:27,817 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:56:27,817 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:56:27,818 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:56:27,818 - app.main - INFO - Cache service inicializado
2025-08-08 16:56:27,818 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:56:27,818 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:56:37,437 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:56:37,437 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:56:37,437 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [449355]
INFO:     Started server process [450121]
INFO:     Waiting for application startup.
2025-08-08 16:56:41,024 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:56:41,026 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:56:41,046 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:56:41,046 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:56:41,046 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:41,046 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:41,047 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:56:41,047 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:56:41,047 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:41,047 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:41,048 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:56:41,048 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:56:41,048 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:41,048 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:41,049 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:56:41,049 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:56:41,051 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,051 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,052 INFO sqlalchemy.engine.Engine [generated in 0.00024s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,052 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,054 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,054 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,054 INFO sqlalchemy.engine.Engine [cached since 0.002479s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,054 - sqlalchemy.engine.Engine - INFO - [cached since 0.002479s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,054 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,054 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,055 INFO sqlalchemy.engine.Engine [cached since 0.003207s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,055 - sqlalchemy.engine.Engine - INFO - [cached since 0.003207s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,055 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,055 INFO sqlalchemy.engine.Engine [cached since 0.003719s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,055 - sqlalchemy.engine.Engine - INFO - [cached since 0.003719s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,055 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,055 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,056 INFO sqlalchemy.engine.Engine [cached since 0.004191s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,056 - sqlalchemy.engine.Engine - INFO - [cached since 0.004191s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,056 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,056 INFO sqlalchemy.engine.Engine [cached since 0.00465s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,056 - sqlalchemy.engine.Engine - INFO - [cached since 0.00465s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,056 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,056 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,056 INFO sqlalchemy.engine.Engine [cached since 0.005134s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,056 - sqlalchemy.engine.Engine - INFO - [cached since 0.005134s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,057 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,057 INFO sqlalchemy.engine.Engine [cached since 0.005559s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,057 - sqlalchemy.engine.Engine - INFO - [cached since 0.005559s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,057 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,057 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,057 INFO sqlalchemy.engine.Engine [cached since 0.00593s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,057 - sqlalchemy.engine.Engine - INFO - [cached since 0.00593s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine [cached since 0.006262s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.006262s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine [cached since 0.006567s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.006567s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine [cached since 0.006883s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - [cached since 0.006883s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,058 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,058 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine [cached since 0.007203s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.007203s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine [cached since 0.007489s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.007489s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine [cached since 0.007873s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - [cached since 0.007873s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,060 INFO sqlalchemy.engine.Engine [cached since 0.008191s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,060 - sqlalchemy.engine.Engine - INFO - [cached since 0.008191s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,060 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,060 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:41,060 INFO sqlalchemy.engine.Engine [cached since 0.008474s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,060 - sqlalchemy.engine.Engine - INFO - [cached since 0.008474s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:41,060 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:56:41,060 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:56:41,061 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:56:41,061 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:56:41,061 - app.main - INFO - Cache service inicializado
2025-08-08 16:56:41,061 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:56:41,061 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:56:49,274 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:56:49,274 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:56:49,274 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [450121]
INFO:     Started server process [450815]
INFO:     Waiting for application startup.
2025-08-08 16:56:53,072 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:56:53,074 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:56:53,093 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:56:53,093 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:56:53,093 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:53,093 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:53,094 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:56:53,094 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:56:53,095 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:53,095 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:53,095 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:56:53,095 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:56:53,095 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:56:53,095 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:56:53,096 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:56:53,096 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:56:53,099 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,099 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,099 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,099 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,101 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,101 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,101 INFO sqlalchemy.engine.Engine [cached since 0.002503s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,101 - sqlalchemy.engine.Engine - INFO - [cached since 0.002503s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,101 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,101 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,102 INFO sqlalchemy.engine.Engine [cached since 0.002936s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,102 - sqlalchemy.engine.Engine - INFO - [cached since 0.002936s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,102 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,102 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,102 INFO sqlalchemy.engine.Engine [cached since 0.003333s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,102 - sqlalchemy.engine.Engine - INFO - [cached since 0.003333s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,102 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,102 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,102 INFO sqlalchemy.engine.Engine [cached since 0.003818s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,102 - sqlalchemy.engine.Engine - INFO - [cached since 0.003818s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,103 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,103 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,103 INFO sqlalchemy.engine.Engine [cached since 0.004243s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,103 - sqlalchemy.engine.Engine - INFO - [cached since 0.004243s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,103 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,103 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,103 INFO sqlalchemy.engine.Engine [cached since 0.004655s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,103 - sqlalchemy.engine.Engine - INFO - [cached since 0.004655s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine [cached since 0.004976s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.004976s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine [cached since 0.005252s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.005252s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine [cached since 0.005557s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.005557s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,104 INFO sqlalchemy.engine.Engine [cached since 0.005843s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,104 - sqlalchemy.engine.Engine - INFO - [cached since 0.005843s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine [cached since 0.006123s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.006123s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine [cached since 0.00642s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.00642s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,105 INFO sqlalchemy.engine.Engine [cached since 0.006688s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,105 - sqlalchemy.engine.Engine - INFO - [cached since 0.006688s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine [cached since 0.006949s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - [cached since 0.006949s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine [cached since 0.007209s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - [cached since 0.007209s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine [cached since 0.007479s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - [cached since 0.007479s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:56:53,106 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:56:53,106 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:56:53,107 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:56:53,107 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:56:53,108 - app.main - INFO - Cache service inicializado
2025-08-08 16:56:53,108 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:56:53,108 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/validators.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 16:58:49,822 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 16:58:49,823 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 16:58:49,823 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [450815]
INFO:     Started server process [455121]
INFO:     Waiting for application startup.
2025-08-08 16:58:53,550 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 16:58:53,551 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 16:58:53,575 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 16:58:53,575 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 16:58:53,575 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:58:53,575 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:58:53,576 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 16:58:53,576 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 16:58:53,576 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:58:53,576 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:58:53,577 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 16:58:53,577 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 16:58:53,577 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 16:58:53,577 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 16:58:53,578 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 16:58:53,578 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 16:58:53,580 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,580 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,580 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,582 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,582 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,582 INFO sqlalchemy.engine.Engine [cached since 0.002093s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,582 - sqlalchemy.engine.Engine - INFO - [cached since 0.002093s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,582 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,582 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,582 INFO sqlalchemy.engine.Engine [cached since 0.002544s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,582 - sqlalchemy.engine.Engine - INFO - [cached since 0.002544s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,583 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,583 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,583 INFO sqlalchemy.engine.Engine [cached since 0.002942s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,583 - sqlalchemy.engine.Engine - INFO - [cached since 0.002942s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,583 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,583 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,583 INFO sqlalchemy.engine.Engine [cached since 0.003305s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,583 - sqlalchemy.engine.Engine - INFO - [cached since 0.003305s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine [cached since 0.003657s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - [cached since 0.003657s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine [cached since 0.004181s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - [cached since 0.004181s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,584 INFO sqlalchemy.engine.Engine [cached since 0.004525s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,584 - sqlalchemy.engine.Engine - INFO - [cached since 0.004525s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,585 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,585 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,585 INFO sqlalchemy.engine.Engine [cached since 0.004879s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,585 - sqlalchemy.engine.Engine - INFO - [cached since 0.004879s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,585 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,585 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,585 INFO sqlalchemy.engine.Engine [cached since 0.005264s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,585 - sqlalchemy.engine.Engine - INFO - [cached since 0.005264s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,585 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,585 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,586 INFO sqlalchemy.engine.Engine [cached since 0.00568s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,586 - sqlalchemy.engine.Engine - INFO - [cached since 0.00568s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,586 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,586 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,586 INFO sqlalchemy.engine.Engine [cached since 0.006019s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,586 - sqlalchemy.engine.Engine - INFO - [cached since 0.006019s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,586 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,586 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,586 INFO sqlalchemy.engine.Engine [cached since 0.006344s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,586 - sqlalchemy.engine.Engine - INFO - [cached since 0.006344s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine [cached since 0.006653s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - [cached since 0.006653s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine [cached since 0.006966s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - [cached since 0.006966s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine [cached since 0.007269s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - [cached since 0.007269s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 16:58:53,587 INFO sqlalchemy.engine.Engine [cached since 0.007563s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,587 - sqlalchemy.engine.Engine - INFO - [cached since 0.007563s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 16:58:53,588 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 16:58:53,588 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 16:58:53,588 - app.main - INFO - Banco de dados inicializado
2025-08-08 16:58:53,589 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 16:58:53,589 - app.main - INFO - Cache service inicializado
2025-08-08 16:58:53,589 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 16:58:53,589 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/validators.py', 'app/utils/callback_examples.py', 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:01:38,771 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:01:38,772 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:01:38,772 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [455121]
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Started server process [466376]
INFO:     Waiting for application startup.
2025-08-08 17:01:42,162 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:01:42,164 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:01:42,182 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:01:42,182 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:01:42,182 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:42,182 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:42,183 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:01:42,183 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:01:42,183 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:42,183 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:42,184 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:01:42,184 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:01:42,184 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:42,184 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:42,184 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:01:42,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:01:42,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,187 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,187 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,188 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,188 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,188 INFO sqlalchemy.engine.Engine [cached since 0.001662s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,188 - sqlalchemy.engine.Engine - INFO - [cached since 0.001662s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine [cached since 0.002063s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.002063s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine [cached since 0.002445s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.002445s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,189 INFO sqlalchemy.engine.Engine [cached since 0.002812s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.002812s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine [cached since 0.003164s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.003164s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine [cached since 0.003537s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.003537s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,190 INFO sqlalchemy.engine.Engine [cached since 0.003829s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.003829s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine [cached since 0.004106s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.004106s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine [cached since 0.00439s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.00439s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine [cached since 0.00468s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.00468s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine [cached since 0.004956s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.004956s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine [cached since 0.005229s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.005229s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine [cached since 0.005514s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.005514s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,192 INFO sqlalchemy.engine.Engine [cached since 0.005794s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.005794s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,193 INFO sqlalchemy.engine.Engine [cached since 0.006063s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.006063s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:42,193 INFO sqlalchemy.engine.Engine [cached since 0.006344s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.006344s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:42,193 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:01:42,193 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:01:42,193 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:01:42,194 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:01:42,194 - app.main - INFO - Cache service inicializado
2025-08-08 17:01:42,194 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:01:42,194 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [466407]
INFO:     Waiting for application startup.
2025-08-08 17:01:45,172 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:01:45,173 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:01:45,191 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:01:45,191 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:01:45,191 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:45,191 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:45,192 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:01:45,192 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:01:45,192 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:45,192 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:45,193 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:01:45,193 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:01:45,193 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:01:45,193 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:01:45,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:01:45,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:01:45,196 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,196 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,196 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,197 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,197 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,197 INFO sqlalchemy.engine.Engine [cached since 0.001539s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.001539s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,197 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,197 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,197 INFO sqlalchemy.engine.Engine [cached since 0.001937s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.001937s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine [cached since 0.002306s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - [cached since 0.002306s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine [cached since 0.002674s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - [cached since 0.002674s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,198 INFO sqlalchemy.engine.Engine [cached since 0.003029s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,198 - sqlalchemy.engine.Engine - INFO - [cached since 0.003029s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine [cached since 0.003395s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - [cached since 0.003395s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine [cached since 0.003685s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - [cached since 0.003685s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,199 INFO sqlalchemy.engine.Engine [cached since 0.003968s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,199 - sqlalchemy.engine.Engine - INFO - [cached since 0.003968s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine [cached since 0.004249s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - [cached since 0.004249s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine [cached since 0.004523s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - [cached since 0.004523s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine [cached since 0.004819s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - [cached since 0.004819s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,200 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,200 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine [cached since 0.005094s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.005094s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine [cached since 0.005365s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.005365s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine [cached since 0.005653s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.005653s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,201 INFO sqlalchemy.engine.Engine [cached since 0.005926s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,201 - sqlalchemy.engine.Engine - INFO - [cached since 0.005926s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,202 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,202 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:01:45,202 INFO sqlalchemy.engine.Engine [cached since 0.006196s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,202 - sqlalchemy.engine.Engine - INFO - [cached since 0.006196s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:01:45,202 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:01:45,202 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:01:45,202 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:01:45,203 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:01:45,203 - app.main - INFO - Cache service inicializado
2025-08-08 17:01:45,203 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:01:45,203 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/rate_limiter.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:03:43,638 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:03:43,638 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:03:43,638 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466407]
WARNING:  WatchFiles detected changes in 'app/utils/rate_limiter.py'. Reloading...
INFO:     Started server process [466523]
INFO:     Waiting for application startup.
2025-08-08 17:03:47,408 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:03:47,409 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:03:47,430 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:03:47,430 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:03:47,431 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:47,431 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:47,432 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:03:47,432 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:03:47,432 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:47,432 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:47,432 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:03:47,432 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:03:47,432 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:47,432 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:47,433 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:03:47,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:03:47,436 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,436 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,436 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,436 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,438 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,438 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,439 INFO sqlalchemy.engine.Engine [cached since 0.002627s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,439 - sqlalchemy.engine.Engine - INFO - [cached since 0.002627s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,439 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,439 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,439 INFO sqlalchemy.engine.Engine [cached since 0.00324s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,439 - sqlalchemy.engine.Engine - INFO - [cached since 0.00324s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine [cached since 0.003685s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.003685s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine [cached since 0.00409s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.00409s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,440 INFO sqlalchemy.engine.Engine [cached since 0.004446s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.004446s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine [cached since 0.004804s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.004804s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine [cached since 0.005078s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.005078s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,441 INFO sqlalchemy.engine.Engine [cached since 0.005345s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.005345s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine [cached since 0.005633s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - [cached since 0.005633s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine [cached since 0.005941s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - [cached since 0.005941s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine [cached since 0.00622s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - [cached since 0.00622s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,442 INFO sqlalchemy.engine.Engine [cached since 0.006496s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,442 - sqlalchemy.engine.Engine - INFO - [cached since 0.006496s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine [cached since 0.006766s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - [cached since 0.006766s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine [cached since 0.007033s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - [cached since 0.007033s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine [cached since 0.007293s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - [cached since 0.007293s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,443 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,443 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:47,444 INFO sqlalchemy.engine.Engine [cached since 0.007554s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,444 - sqlalchemy.engine.Engine - INFO - [cached since 0.007554s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:47,444 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:03:47,444 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:03:47,444 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:03:47,445 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:03:47,445 - app.main - INFO - Cache service inicializado
2025-08-08 17:03:47,445 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:03:47,445 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [466539]
INFO:     Waiting for application startup.
2025-08-08 17:03:50,868 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:03:50,869 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:03:50,889 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:03:50,889 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:03:50,889 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:50,889 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:50,890 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:03:50,890 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:03:50,890 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:50,890 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:50,891 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:03:50,891 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:03:50,891 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:03:50,891 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:03:50,892 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:03:50,892 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:03:50,894 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,894 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,894 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,894 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,896 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,896 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,896 INFO sqlalchemy.engine.Engine [cached since 0.002036s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,896 - sqlalchemy.engine.Engine - INFO - [cached since 0.002036s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,896 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,896 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,896 INFO sqlalchemy.engine.Engine [cached since 0.002494s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,896 - sqlalchemy.engine.Engine - INFO - [cached since 0.002494s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,897 INFO sqlalchemy.engine.Engine [cached since 0.002887s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.002887s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,897 INFO sqlalchemy.engine.Engine [cached since 0.003258s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.003258s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine [cached since 0.003619s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.003619s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine [cached since 0.003995s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.003995s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,898 INFO sqlalchemy.engine.Engine [cached since 0.004342s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.004342s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine [cached since 0.004646s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - [cached since 0.004646s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine [cached since 0.004958s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - [cached since 0.004958s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine [cached since 0.005259s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - [cached since 0.005259s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,899 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,899 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine [cached since 0.005548s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - [cached since 0.005548s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine [cached since 0.005852s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - [cached since 0.005852s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine [cached since 0.006165s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - [cached since 0.006165s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,900 INFO sqlalchemy.engine.Engine [cached since 0.006432s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,900 - sqlalchemy.engine.Engine - INFO - [cached since 0.006432s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,901 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,901 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,901 INFO sqlalchemy.engine.Engine [cached since 0.006683s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,901 - sqlalchemy.engine.Engine - INFO - [cached since 0.006683s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,901 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,901 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:03:50,901 INFO sqlalchemy.engine.Engine [cached since 0.006944s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,901 - sqlalchemy.engine.Engine - INFO - [cached since 0.006944s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:03:50,901 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:03:50,901 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:03:50,902 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:03:50,902 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:03:50,902 - app.main - INFO - Cache service inicializado
2025-08-08 17:03:50,902 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:03:50,902 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/middleware/rate_limit_middleware.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:05:26,089 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:05:26,089 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:05:26,089 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466539]
INFO:     Started server process [466672]
INFO:     Waiting for application startup.
2025-08-08 17:05:29,606 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:05:29,607 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:05:29,627 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:05:29,627 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:05:29,627 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:29,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:29,628 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:05:29,628 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:05:29,628 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:29,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:29,628 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:05:29,628 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:05:29,628 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:29,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:29,629 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:05:29,629 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:05:29,631 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,631 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,631 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,631 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,633 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,633 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,633 INFO sqlalchemy.engine.Engine [cached since 0.001901s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,633 - sqlalchemy.engine.Engine - INFO - [cached since 0.001901s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,633 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,633 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,633 INFO sqlalchemy.engine.Engine [cached since 0.002323s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,633 - sqlalchemy.engine.Engine - INFO - [cached since 0.002323s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine [cached since 0.002703s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.002703s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine [cached since 0.003051s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.003051s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,634 INFO sqlalchemy.engine.Engine [cached since 0.003374s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,634 - sqlalchemy.engine.Engine - INFO - [cached since 0.003374s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine [cached since 0.003698s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.003698s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine [cached since 0.003952s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.003952s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine [cached since 0.004202s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.004202s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,635 INFO sqlalchemy.engine.Engine [cached since 0.004446s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,635 - sqlalchemy.engine.Engine - INFO - [cached since 0.004446s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine [cached since 0.004687s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.004687s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine [cached since 0.004925s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.004925s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine [cached since 0.005168s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.005168s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,636 INFO sqlalchemy.engine.Engine [cached since 0.005412s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,636 - sqlalchemy.engine.Engine - INFO - [cached since 0.005412s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine [cached since 0.005654s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.005654s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine [cached since 0.005931s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.005931s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine [cached since 0.006186s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - [cached since 0.006186s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:29,637 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:05:29,637 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:05:29,638 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:05:29,638 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:05:29,638 - app.main - INFO - Cache service inicializado
2025-08-08 17:05:29,638 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:05:29,638 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:05:45,980 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:05:45,980 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:05:45,980 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466672]
INFO:     Started server process [466717]
INFO:     Waiting for application startup.
2025-08-08 17:05:49,475 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:05:49,477 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:05:49,496 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:05:49,496 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:05:49,496 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:49,496 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:49,497 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:05:49,497 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:05:49,497 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:49,497 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:49,498 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:05:49,498 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:05:49,498 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:05:49,498 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:05:49,498 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:05:49,498 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:05:49,501 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,501 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,501 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,501 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,502 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,502 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,502 INFO sqlalchemy.engine.Engine [cached since 0.001871s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,502 - sqlalchemy.engine.Engine - INFO - [cached since 0.001871s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,503 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,503 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,503 INFO sqlalchemy.engine.Engine [cached since 0.002422s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,503 - sqlalchemy.engine.Engine - INFO - [cached since 0.002422s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,503 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,503 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,503 INFO sqlalchemy.engine.Engine [cached since 0.002873s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,503 - sqlalchemy.engine.Engine - INFO - [cached since 0.002873s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine [cached since 0.003277s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - [cached since 0.003277s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine [cached since 0.003636s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - [cached since 0.003636s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,504 INFO sqlalchemy.engine.Engine [cached since 0.003989s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,504 - sqlalchemy.engine.Engine - INFO - [cached since 0.003989s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine [cached since 0.004258s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.004258s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine [cached since 0.004526s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.004526s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine [cached since 0.004801s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - [cached since 0.004801s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,505 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,505 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine [cached since 0.00514s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - [cached since 0.00514s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine [cached since 0.005509s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - [cached since 0.005509s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine [cached since 0.005791s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - [cached since 0.005791s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,506 INFO sqlalchemy.engine.Engine [cached since 0.006041s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,506 - sqlalchemy.engine.Engine - INFO - [cached since 0.006041s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine [cached since 0.0063s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - [cached since 0.0063s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine [cached since 0.006561s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - [cached since 0.006561s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:05:49,507 INFO sqlalchemy.engine.Engine [cached since 0.006811s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,507 - sqlalchemy.engine.Engine - INFO - [cached since 0.006811s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:05:49,508 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:05:49,508 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:05:49,508 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:05:49,508 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:05:49,508 - app.main - INFO - Cache service inicializado
2025-08-08 17:05:49,508 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:05:49,509 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:06:00,533 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:06:00,533 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:06:00,533 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466717]
INFO:     Started server process [466744]
INFO:     Waiting for application startup.
2025-08-08 17:06:03,868 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:06:03,869 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:06:03,887 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:06:03,887 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:06:03,888 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:03,888 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:03,888 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:06:03,888 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:06:03,889 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:03,889 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:03,889 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:06:03,889 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:06:03,889 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:03,889 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:03,890 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:06:03,890 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:06:03,892 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,892 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,892 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,894 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,894 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,894 INFO sqlalchemy.engine.Engine [cached since 0.00196s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,894 - sqlalchemy.engine.Engine - INFO - [cached since 0.00196s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,894 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,894 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,894 INFO sqlalchemy.engine.Engine [cached since 0.00238s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,894 - sqlalchemy.engine.Engine - INFO - [cached since 0.00238s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine [cached since 0.002782s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - [cached since 0.002782s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine [cached since 0.003193s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - [cached since 0.003193s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,895 INFO sqlalchemy.engine.Engine [cached since 0.003533s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,895 - sqlalchemy.engine.Engine - INFO - [cached since 0.003533s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine [cached since 0.003877s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - [cached since 0.003877s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine [cached since 0.004147s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - [cached since 0.004147s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,896 INFO sqlalchemy.engine.Engine [cached since 0.004411s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,896 - sqlalchemy.engine.Engine - INFO - [cached since 0.004411s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine [cached since 0.004671s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.004671s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine [cached since 0.004923s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.004923s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine [cached since 0.00518s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.00518s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,897 INFO sqlalchemy.engine.Engine [cached since 0.005437s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,897 - sqlalchemy.engine.Engine - INFO - [cached since 0.005437s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine [cached since 0.005689s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.005689s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine [cached since 0.005965s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.005965s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine [cached since 0.006249s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.006249s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:03,898 INFO sqlalchemy.engine.Engine [cached since 0.0065s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,898 - sqlalchemy.engine.Engine - INFO - [cached since 0.0065s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:03,899 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:06:03,899 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:06:03,899 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:06:03,900 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:06:03,900 - app.main - INFO - Cache service inicializado
2025-08-08 17:06:03,900 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:06:03,900 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:06:24,833 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:06:24,833 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:06:24,833 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466744]
INFO:     Started server process [466846]
INFO:     Waiting for application startup.
2025-08-08 17:06:28,119 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:06:28,120 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:06:28,139 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:06:28,139 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:06:28,139 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:28,139 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:28,140 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:06:28,140 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:06:28,140 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:28,140 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:28,141 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:06:28,141 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:06:28,141 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:28,141 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:28,141 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:06:28,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:06:28,143 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,143 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,143 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,143 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,145 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,145 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,145 INFO sqlalchemy.engine.Engine [cached since 0.001926s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,145 - sqlalchemy.engine.Engine - INFO - [cached since 0.001926s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine [cached since 0.002374s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.002374s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine [cached since 0.002742s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.002742s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,146 INFO sqlalchemy.engine.Engine [cached since 0.003138s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,146 - sqlalchemy.engine.Engine - INFO - [cached since 0.003138s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,147 INFO sqlalchemy.engine.Engine [cached since 0.003527s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.003527s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,147 INFO sqlalchemy.engine.Engine [cached since 0.003957s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,147 - sqlalchemy.engine.Engine - INFO - [cached since 0.003957s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine [cached since 0.004271s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - [cached since 0.004271s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine [cached since 0.004598s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - [cached since 0.004598s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine [cached since 0.00494s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - [cached since 0.00494s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,148 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine [cached since 0.005219s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.005219s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine [cached since 0.005502s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.005502s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine [cached since 0.005785s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.005785s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,149 INFO sqlalchemy.engine.Engine [cached since 0.006045s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.006045s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine [cached since 0.006317s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - [cached since 0.006317s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine [cached since 0.006559s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - [cached since 0.006559s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine [cached since 0.006814s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - [cached since 0.006814s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:28,150 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:06:28,150 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:06:28,151 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:06:28,151 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:06:28,151 - app.main - INFO - Cache service inicializado
2025-08-08 17:06:28,151 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:06:28,151 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:06:31,057 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:06:31,057 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:06:31,057 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466846]
INFO:     Started server process [466860]
INFO:     Waiting for application startup.
2025-08-08 17:06:34,573 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:06:34,574 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:06:34,593 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:06:34,593 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:06:34,593 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:34,593 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:34,594 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:06:34,594 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:06:34,594 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:34,594 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:34,595 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:06:34,595 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:06:34,595 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:34,595 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:34,596 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:06:34,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:06:34,598 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,598 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,598 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,598 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,600 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,600 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,600 INFO sqlalchemy.engine.Engine [cached since 0.002221s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,600 - sqlalchemy.engine.Engine - INFO - [cached since 0.002221s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,600 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,600 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,601 INFO sqlalchemy.engine.Engine [cached since 0.002641s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,601 - sqlalchemy.engine.Engine - INFO - [cached since 0.002641s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,601 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,601 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,601 INFO sqlalchemy.engine.Engine [cached since 0.002998s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,601 - sqlalchemy.engine.Engine - INFO - [cached since 0.002998s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,601 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,601 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,601 INFO sqlalchemy.engine.Engine [cached since 0.003339s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,601 - sqlalchemy.engine.Engine - INFO - [cached since 0.003339s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine [cached since 0.003677s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.003677s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine [cached since 0.004084s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.004084s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine [cached since 0.004387s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - [cached since 0.004387s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,602 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine [cached since 0.004645s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.004645s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine [cached since 0.004903s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.004903s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine [cached since 0.005171s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.005171s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,603 INFO sqlalchemy.engine.Engine [cached since 0.005459s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,603 - sqlalchemy.engine.Engine - INFO - [cached since 0.005459s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine [cached since 0.00574s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.00574s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine [cached since 0.005994s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.005994s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine [cached since 0.006256s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.006256s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,604 INFO sqlalchemy.engine.Engine [cached since 0.006499s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.006499s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,605 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,605 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:34,605 INFO sqlalchemy.engine.Engine [cached since 0.006749s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.006749s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:34,605 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:06:34,605 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:06:34,605 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:06:34,606 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:06:34,606 - app.main - INFO - Cache service inicializado
2025-08-08 17:06:34,606 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:06:34,606 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:06:36,810 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:06:36,810 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:06:36,810 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466860]
INFO:     Started server process [466876]
INFO:     Waiting for application startup.
2025-08-08 17:06:40,200 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:06:40,201 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:06:40,221 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:06:40,221 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:06:40,221 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:40,221 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:40,222 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:06:40,222 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:06:40,222 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:40,222 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:40,222 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:06:40,222 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:06:40,223 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:40,223 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:40,223 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:06:40,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:06:40,225 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,225 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,225 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,225 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,227 INFO sqlalchemy.engine.Engine [cached since 0.001742s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.001742s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,227 INFO sqlalchemy.engine.Engine [cached since 0.002114s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.002114s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine [cached since 0.002453s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.002453s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine [cached since 0.002791s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.002791s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,228 INFO sqlalchemy.engine.Engine [cached since 0.003118s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.003118s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine [cached since 0.003454s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - [cached since 0.003454s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine [cached since 0.003722s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - [cached since 0.003722s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine [cached since 0.003978s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - [cached since 0.003978s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,229 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,229 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine [cached since 0.004228s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.004228s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine [cached since 0.004477s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.004477s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine [cached since 0.004728s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.004728s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine [cached since 0.004974s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - [cached since 0.004974s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,230 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,230 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine [cached since 0.005211s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - [cached since 0.005211s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine [cached since 0.005459s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - [cached since 0.005459s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine [cached since 0.005706s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - [cached since 0.005706s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:40,231 INFO sqlalchemy.engine.Engine [cached since 0.005947s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,231 - sqlalchemy.engine.Engine - INFO - [cached since 0.005947s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:40,232 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:06:40,232 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:06:40,232 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:06:40,233 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:06:40,233 - app.main - INFO - Cache service inicializado
2025-08-08 17:06:40,233 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:06:40,233 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:06:42,236 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:06:42,236 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:06:42,236 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466876]
INFO:     Started server process [466890]
INFO:     Waiting for application startup.
2025-08-08 17:06:45,458 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:06:45,459 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:06:45,478 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:06:45,478 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:06:45,478 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:45,478 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:45,479 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:06:45,479 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:06:45,479 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:45,479 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:45,479 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:06:45,479 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:06:45,479 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:06:45,479 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:06:45,480 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:06:45,480 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:06:45,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,482 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,482 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,482 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine [cached since 0.001798s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.001798s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine [cached since 0.002192s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.002192s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,484 INFO sqlalchemy.engine.Engine [cached since 0.00254s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.00254s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,485 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,485 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,485 INFO sqlalchemy.engine.Engine [cached since 0.002877s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,485 - sqlalchemy.engine.Engine - INFO - [cached since 0.002877s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,485 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,485 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,485 INFO sqlalchemy.engine.Engine [cached since 0.003224s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,485 - sqlalchemy.engine.Engine - INFO - [cached since 0.003224s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,485 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,485 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine [cached since 0.00356s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.00356s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine [cached since 0.00383s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.00383s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine [cached since 0.004104s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.004104s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,486 INFO sqlalchemy.engine.Engine [cached since 0.004364s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.004364s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine [cached since 0.004614s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.004614s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine [cached since 0.004869s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.004869s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine [cached since 0.005132s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.005132s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,487 INFO sqlalchemy.engine.Engine [cached since 0.005386s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.005386s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine [cached since 0.005643s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - [cached since 0.005643s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine [cached since 0.00589s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - [cached since 0.00589s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine [cached since 0.006141s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - [cached since 0.006141s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:06:45,488 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:06:45,488 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:06:45,489 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:06:45,489 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:06:45,489 - app.main - INFO - Cache service inicializado
2025-08-08 17:06:45,489 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:06:45,489 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:07:04,022 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:07:04,022 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:07:04,022 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466890]
INFO:     Started server process [466982]
INFO:     Waiting for application startup.
2025-08-08 17:07:07,386 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:07:07,388 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:07:07,408 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:07:07,408 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:07:07,408 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:07,408 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:07,409 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:07:07,409 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:07:07,409 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:07,409 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:07,410 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:07:07,410 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:07:07,410 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:07,410 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:07,410 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:07:07,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:07:07,413 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,413 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,413 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,415 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,415 INFO sqlalchemy.engine.Engine [cached since 0.002135s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,415 - sqlalchemy.engine.Engine - INFO - [cached since 0.002135s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine [cached since 0.002593s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.002593s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine [cached since 0.003014s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.003014s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,416 INFO sqlalchemy.engine.Engine [cached since 0.003394s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.003394s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine [cached since 0.003762s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.003762s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine [cached since 0.004145s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.004145s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,417 INFO sqlalchemy.engine.Engine [cached since 0.004413s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,417 - sqlalchemy.engine.Engine - INFO - [cached since 0.004413s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine [cached since 0.004676s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.004676s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine [cached since 0.004935s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.004935s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine [cached since 0.005192s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.005192s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,418 INFO sqlalchemy.engine.Engine [cached since 0.005436s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,418 - sqlalchemy.engine.Engine - INFO - [cached since 0.005436s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine [cached since 0.005679s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.005679s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine [cached since 0.005925s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.005925s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine [cached since 0.006192s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.006192s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,419 INFO sqlalchemy.engine.Engine [cached since 0.006454s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,419 - sqlalchemy.engine.Engine - INFO - [cached since 0.006454s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,420 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,420 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:07,420 INFO sqlalchemy.engine.Engine [cached since 0.006713s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,420 - sqlalchemy.engine.Engine - INFO - [cached since 0.006713s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:07,420 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:07:07,420 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:07:07,420 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:07:07,421 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:07:07,421 - app.main - INFO - Cache service inicializado
2025-08-08 17:07:07,421 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:07:07,421 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:07:30,078 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:07:30,078 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:07:30,078 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [466982]
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Started server process [467000]
INFO:     Waiting for application startup.
2025-08-08 17:07:33,503 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:07:33,505 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:07:33,524 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:07:33,524 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:07:33,524 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:33,524 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:33,525 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:07:33,525 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:07:33,525 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:33,525 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:33,526 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:07:33,526 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:07:33,526 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:33,526 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:33,526 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:07:33,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:07:33,529 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,529 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,529 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,529 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,530 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,530 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,530 INFO sqlalchemy.engine.Engine [cached since 0.001805s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,530 - sqlalchemy.engine.Engine - INFO - [cached since 0.001805s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,531 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,531 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,531 INFO sqlalchemy.engine.Engine [cached since 0.002258s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,531 - sqlalchemy.engine.Engine - INFO - [cached since 0.002258s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,531 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,531 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,531 INFO sqlalchemy.engine.Engine [cached since 0.002668s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,531 - sqlalchemy.engine.Engine - INFO - [cached since 0.002668s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine [cached since 0.003011s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - [cached since 0.003011s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine [cached since 0.003334s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - [cached since 0.003334s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,532 INFO sqlalchemy.engine.Engine [cached since 0.003684s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,532 - sqlalchemy.engine.Engine - INFO - [cached since 0.003684s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine [cached since 0.00396s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.00396s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine [cached since 0.004213s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.004213s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine [cached since 0.00448s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.00448s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,533 INFO sqlalchemy.engine.Engine [cached since 0.004732s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,533 - sqlalchemy.engine.Engine - INFO - [cached since 0.004732s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine [cached since 0.004977s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.004977s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine [cached since 0.005225s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.005225s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine [cached since 0.005477s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.005477s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,534 INFO sqlalchemy.engine.Engine [cached since 0.005727s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,534 - sqlalchemy.engine.Engine - INFO - [cached since 0.005727s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,535 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,535 INFO sqlalchemy.engine.Engine [cached since 0.005968s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.005968s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,535 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,535 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:33,535 INFO sqlalchemy.engine.Engine [cached since 0.006213s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,535 - sqlalchemy.engine.Engine - INFO - [cached since 0.006213s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:33,535 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:07:33,535 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:07:33,535 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:07:33,536 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:07:33,536 - app.main - INFO - Cache service inicializado
2025-08-08 17:07:33,536 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:07:33,536 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [467014]
INFO:     Waiting for application startup.
2025-08-08 17:07:36,831 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:07:36,833 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:07:36,851 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:07:36,851 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:07:36,851 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:36,851 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:36,852 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:07:36,852 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:07:36,852 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:36,852 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:36,853 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:07:36,853 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:07:36,853 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:07:36,853 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:07:36,854 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:07:36,854 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:07:36,856 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,856 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,856 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,856 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,858 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,858 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,858 INFO sqlalchemy.engine.Engine [cached since 0.002182s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,858 - sqlalchemy.engine.Engine - INFO - [cached since 0.002182s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,859 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,859 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,859 INFO sqlalchemy.engine.Engine [cached since 0.002676s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,859 - sqlalchemy.engine.Engine - INFO - [cached since 0.002676s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,859 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,859 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,859 INFO sqlalchemy.engine.Engine [cached since 0.003137s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,859 - sqlalchemy.engine.Engine - INFO - [cached since 0.003137s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine [cached since 0.003558s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - [cached since 0.003558s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine [cached since 0.00393s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - [cached since 0.00393s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,860 INFO sqlalchemy.engine.Engine [cached since 0.004287s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,860 - sqlalchemy.engine.Engine - INFO - [cached since 0.004287s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine [cached since 0.004571s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - [cached since 0.004571s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine [cached since 0.004827s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - [cached since 0.004827s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine [cached since 0.005143s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - [cached since 0.005143s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,861 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,861 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine [cached since 0.005423s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - [cached since 0.005423s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine [cached since 0.005687s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - [cached since 0.005687s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine [cached since 0.005953s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - [cached since 0.005953s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,862 INFO sqlalchemy.engine.Engine [cached since 0.006212s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,862 - sqlalchemy.engine.Engine - INFO - [cached since 0.006212s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine [cached since 0.006465s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - [cached since 0.006465s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine [cached since 0.006729s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - [cached since 0.006729s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine [cached since 0.006995s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - [cached since 0.006995s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:07:36,863 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:07:36,863 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:07:36,864 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:07:36,864 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:07:36,864 - app.main - INFO - Cache service inicializado
2025-08-08 17:07:36,864 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:07:36,864 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:08:32,561 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:08:32,562 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:08:32,562 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467014]
INFO:     Started server process [467123]
INFO:     Waiting for application startup.
2025-08-08 17:08:35,853 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:08:35,855 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:08:35,873 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:08:35,873 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:08:35,874 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:35,874 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:35,874 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:08:35,874 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:08:35,874 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:35,874 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:35,875 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:08:35,875 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:08:35,875 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:35,875 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:35,876 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:08:35,876 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:08:35,878 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,878 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,878 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,878 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,879 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,879 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,879 INFO sqlalchemy.engine.Engine [cached since 0.001687s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,879 - sqlalchemy.engine.Engine - INFO - [cached since 0.001687s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,880 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,880 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,880 INFO sqlalchemy.engine.Engine [cached since 0.002063s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,880 - sqlalchemy.engine.Engine - INFO - [cached since 0.002063s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,880 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,880 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,880 INFO sqlalchemy.engine.Engine [cached since 0.002489s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,880 - sqlalchemy.engine.Engine - INFO - [cached since 0.002489s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine [cached since 0.002854s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - [cached since 0.002854s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine [cached since 0.003182s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - [cached since 0.003182s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine [cached since 0.003531s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - [cached since 0.003531s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,881 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,881 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine [cached since 0.003787s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - [cached since 0.003787s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine [cached since 0.004058s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - [cached since 0.004058s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine [cached since 0.004326s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - [cached since 0.004326s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,882 INFO sqlalchemy.engine.Engine [cached since 0.004598s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,882 - sqlalchemy.engine.Engine - INFO - [cached since 0.004598s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine [cached since 0.004885s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - [cached since 0.004885s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine [cached since 0.00517s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - [cached since 0.00517s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine [cached since 0.005462s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - [cached since 0.005462s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,883 INFO sqlalchemy.engine.Engine [cached since 0.00576s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,883 - sqlalchemy.engine.Engine - INFO - [cached since 0.00576s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,884 INFO sqlalchemy.engine.Engine [cached since 0.006029s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.006029s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:35,884 INFO sqlalchemy.engine.Engine [cached since 0.00634s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,884 - sqlalchemy.engine.Engine - INFO - [cached since 0.00634s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:35,884 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:08:35,884 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:08:35,885 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:08:35,885 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:08:35,885 - app.main - INFO - Cache service inicializado
2025-08-08 17:08:35,885 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:08:35,885 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:08:45,203 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:08:45,203 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:08:45,203 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467123]
INFO:     Started server process [467145]
INFO:     Waiting for application startup.
2025-08-08 17:08:48,718 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:08:48,719 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:08:48,738 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:08:48,738 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:08:48,738 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:48,738 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:48,739 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:08:48,739 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:08:48,739 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:48,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:48,739 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:08:48,739 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:08:48,739 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:48,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:48,740 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:08:48,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:08:48,742 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,742 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,742 INFO sqlalchemy.engine.Engine [generated in 0.00024s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,742 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,745 INFO sqlalchemy.engine.Engine [cached since 0.002728s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,745 - sqlalchemy.engine.Engine - INFO - [cached since 0.002728s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,745 INFO sqlalchemy.engine.Engine [cached since 0.003164s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,745 - sqlalchemy.engine.Engine - INFO - [cached since 0.003164s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,746 INFO sqlalchemy.engine.Engine [cached since 0.00351s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.00351s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,746 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,746 INFO sqlalchemy.engine.Engine [cached since 0.003837s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.003837s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,746 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,746 INFO sqlalchemy.engine.Engine [cached since 0.004214s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.004214s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine [cached since 0.004567s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.004567s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine [cached since 0.004841s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.004841s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine [cached since 0.005133s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.005133s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,747 INFO sqlalchemy.engine.Engine [cached since 0.005422s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.005422s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine [cached since 0.005684s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - [cached since 0.005684s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine [cached since 0.005947s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - [cached since 0.005947s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine [cached since 0.006211s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - [cached since 0.006211s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,748 INFO sqlalchemy.engine.Engine [cached since 0.006455s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,748 - sqlalchemy.engine.Engine - INFO - [cached since 0.006455s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine [cached since 0.006703s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - [cached since 0.006703s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine [cached since 0.006952s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - [cached since 0.006952s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:48,749 INFO sqlalchemy.engine.Engine [cached since 0.007209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,749 - sqlalchemy.engine.Engine - INFO - [cached since 0.007209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:48,750 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:08:48,750 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:08:48,750 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:08:48,750 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:08:48,750 - app.main - INFO - Cache service inicializado
2025-08-08 17:08:48,750 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:08:48,750 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:08:53,261 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:08:53,261 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:08:53,261 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467145]
INFO:     Started server process [467174]
INFO:     Waiting for application startup.
2025-08-08 17:08:56,669 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:08:56,670 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:08:56,690 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:08:56,690 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:08:56,690 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:56,690 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:56,691 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:08:56,691 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:08:56,691 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:56,691 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:56,692 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:08:56,692 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:08:56,692 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:08:56,692 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:08:56,692 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:08:56,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:08:56,695 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,695 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,695 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,695 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,697 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,697 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,697 INFO sqlalchemy.engine.Engine [cached since 0.002442s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,697 - sqlalchemy.engine.Engine - INFO - [cached since 0.002442s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,698 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,698 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,698 INFO sqlalchemy.engine.Engine [cached since 0.002868s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,698 - sqlalchemy.engine.Engine - INFO - [cached since 0.002868s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,698 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,698 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,698 INFO sqlalchemy.engine.Engine [cached since 0.003366s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,698 - sqlalchemy.engine.Engine - INFO - [cached since 0.003366s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine [cached since 0.003793s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - [cached since 0.003793s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine [cached since 0.004168s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - [cached since 0.004168s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,699 INFO sqlalchemy.engine.Engine [cached since 0.004547s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,699 - sqlalchemy.engine.Engine - INFO - [cached since 0.004547s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine [cached since 0.00483s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - [cached since 0.00483s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine [cached since 0.005229s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - [cached since 0.005229s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,700 INFO sqlalchemy.engine.Engine [cached since 0.005604s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,700 - sqlalchemy.engine.Engine - INFO - [cached since 0.005604s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine [cached since 0.005878s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.005878s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine [cached since 0.006187s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.006187s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,701 INFO sqlalchemy.engine.Engine [cached since 0.006506s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,701 - sqlalchemy.engine.Engine - INFO - [cached since 0.006506s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine [cached since 0.006806s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - [cached since 0.006806s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine [cached since 0.00714s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - [cached since 0.00714s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,702 INFO sqlalchemy.engine.Engine [cached since 0.007459s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,702 - sqlalchemy.engine.Engine - INFO - [cached since 0.007459s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,703 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,703 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:08:56,703 INFO sqlalchemy.engine.Engine [cached since 0.007785s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,703 - sqlalchemy.engine.Engine - INFO - [cached since 0.007785s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:08:56,703 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:08:56,703 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:08:56,703 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:08:56,704 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:08:56,704 - app.main - INFO - Cache service inicializado
2025-08-08 17:08:56,704 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:08:56,704 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:09:06,925 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:09:06,925 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:09:06,925 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467174]
INFO:     Started server process [467240]
INFO:     Waiting for application startup.
2025-08-08 17:09:10,145 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:09:10,146 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:09:10,166 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:09:10,166 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:09:10,166 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:10,166 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:10,167 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:09:10,167 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:09:10,167 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:10,167 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:10,168 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:09:10,168 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:09:10,168 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:10,168 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:10,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:09:10,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:09:10,171 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,171 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,171 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,171 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine [cached since 0.00189s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - [cached since 0.00189s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine [cached since 0.002299s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - [cached since 0.002299s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,173 INFO sqlalchemy.engine.Engine [cached since 0.002745s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,173 - sqlalchemy.engine.Engine - INFO - [cached since 0.002745s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,174 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,174 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,174 INFO sqlalchemy.engine.Engine [cached since 0.003144s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,174 - sqlalchemy.engine.Engine - INFO - [cached since 0.003144s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,174 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,174 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,174 INFO sqlalchemy.engine.Engine [cached since 0.003524s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,174 - sqlalchemy.engine.Engine - INFO - [cached since 0.003524s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine [cached since 0.003888s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - [cached since 0.003888s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine [cached since 0.004156s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - [cached since 0.004156s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine [cached since 0.004428s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - [cached since 0.004428s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,175 INFO sqlalchemy.engine.Engine [cached since 0.004693s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,175 - sqlalchemy.engine.Engine - INFO - [cached since 0.004693s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine [cached since 0.00498s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.00498s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine [cached since 0.005264s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.005264s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine [cached since 0.005526s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.005526s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,176 INFO sqlalchemy.engine.Engine [cached since 0.005784s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.005784s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine [cached since 0.006042s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - [cached since 0.006042s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine [cached since 0.006298s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - [cached since 0.006298s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:10,177 INFO sqlalchemy.engine.Engine [cached since 0.006576s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,177 - sqlalchemy.engine.Engine - INFO - [cached since 0.006576s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:10,178 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:09:10,178 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:09:10,178 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:09:10,179 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:09:10,179 - app.main - INFO - Cache service inicializado
2025-08-08 17:09:10,179 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:09:10,179 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:09:50,766 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:09:50,766 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:09:50,767 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467240]
INFO:     Started server process [467337]
INFO:     Waiting for application startup.
2025-08-08 17:09:54,161 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:09:54,162 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:09:54,182 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:09:54,182 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:09:54,182 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:54,182 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:54,183 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:09:54,183 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:09:54,183 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:54,183 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:54,184 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:09:54,184 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:09:54,184 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:09:54,184 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:09:54,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:09:54,185 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:09:54,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,187 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,187 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,189 INFO sqlalchemy.engine.Engine [cached since 0.001916s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.001916s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,189 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,189 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,189 INFO sqlalchemy.engine.Engine [cached since 0.002375s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,189 - sqlalchemy.engine.Engine - INFO - [cached since 0.002375s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine [cached since 0.002756s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.002756s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine [cached since 0.003107s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.003107s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,190 INFO sqlalchemy.engine.Engine [cached since 0.003437s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,190 - sqlalchemy.engine.Engine - INFO - [cached since 0.003437s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine [cached since 0.003781s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.003781s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine [cached since 0.004047s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.004047s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine [cached since 0.004302s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - [cached since 0.004302s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine [cached since 0.004555s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.004555s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine [cached since 0.004805s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.004805s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine [cached since 0.005071s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.005071s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,192 INFO sqlalchemy.engine.Engine [cached since 0.005361s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,192 - sqlalchemy.engine.Engine - INFO - [cached since 0.005361s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine [cached since 0.005636s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.005636s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine [cached since 0.005899s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.005899s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine [cached since 0.00615s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.00615s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:09:54,193 INFO sqlalchemy.engine.Engine [cached since 0.006396s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.006396s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:09:54,194 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:09:54,194 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:09:54,194 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:09:54,195 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:09:54,195 - app.main - INFO - Cache service inicializado
2025-08-08 17:09:54,195 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:09:54,195 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/test_rate_limiting.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:44:25,509 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:44:25,509 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:44:25,509 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [467337]
WARNING:  WatchFiles detected changes in 'scripts/test_rate_limiting.py'. Reloading...
INFO:     Started server process [468941]
INFO:     Waiting for application startup.
2025-08-08 17:44:29,196 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:44:29,198 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:44:29,217 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:44:29,217 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:44:29,217 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:29,217 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:29,218 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:44:29,218 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:44:29,218 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:29,218 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:29,218 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:44:29,218 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:44:29,218 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:29,218 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:29,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:44:29,219 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:44:29,221 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,221 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,221 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,221 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,223 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,223 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,223 INFO sqlalchemy.engine.Engine [cached since 0.001817s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,223 - sqlalchemy.engine.Engine - INFO - [cached since 0.001817s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,223 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,223 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,224 INFO sqlalchemy.engine.Engine [cached since 0.002245s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,224 - sqlalchemy.engine.Engine - INFO - [cached since 0.002245s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,224 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,224 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,224 INFO sqlalchemy.engine.Engine [cached since 0.002635s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,224 - sqlalchemy.engine.Engine - INFO - [cached since 0.002635s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,224 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,224 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,224 INFO sqlalchemy.engine.Engine [cached since 0.003022s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,224 - sqlalchemy.engine.Engine - INFO - [cached since 0.003022s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine [cached since 0.003386s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - [cached since 0.003386s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine [cached since 0.003841s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - [cached since 0.003841s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,225 INFO sqlalchemy.engine.Engine [cached since 0.004172s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,225 - sqlalchemy.engine.Engine - INFO - [cached since 0.004172s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine [cached since 0.004482s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.004482s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine [cached since 0.004801s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.004801s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,226 INFO sqlalchemy.engine.Engine [cached since 0.005113s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,226 - sqlalchemy.engine.Engine - INFO - [cached since 0.005113s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine [cached since 0.005407s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.005407s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine [cached since 0.00569s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.00569s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine [cached since 0.00599s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - [cached since 0.00599s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,227 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,227 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine [cached since 0.006286s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.006286s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine [cached since 0.00657s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.00657s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine [cached since 0.006864s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - [cached since 0.006864s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:29,228 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:44:29,228 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:44:29,229 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:44:29,229 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:44:29,229 - app.main - INFO - Cache service inicializado
2025-08-08 17:44:29,229 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:44:29,230 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [469063]
INFO:     Waiting for application startup.
2025-08-08 17:44:32,345 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:44:32,346 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:44:32,364 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:44:32,364 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:44:32,364 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:32,364 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:32,365 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:44:32,365 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:44:32,365 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:32,365 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:32,365 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:44:32,365 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:44:32,365 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:44:32,365 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:44:32,366 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:44:32,366 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:44:32,368 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,368 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,368 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,368 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,369 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,369 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,370 INFO sqlalchemy.engine.Engine [cached since 0.001511s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,370 - sqlalchemy.engine.Engine - INFO - [cached since 0.001511s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,370 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,370 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,370 INFO sqlalchemy.engine.Engine [cached since 0.001909s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,370 - sqlalchemy.engine.Engine - INFO - [cached since 0.001909s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,370 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,370 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,370 INFO sqlalchemy.engine.Engine [cached since 0.002287s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,370 - sqlalchemy.engine.Engine - INFO - [cached since 0.002287s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine [cached since 0.002647s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - [cached since 0.002647s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine [cached since 0.003007s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - [cached since 0.003007s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,371 INFO sqlalchemy.engine.Engine [cached since 0.00338s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,371 - sqlalchemy.engine.Engine - INFO - [cached since 0.00338s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine [cached since 0.003665s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.003665s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine [cached since 0.003942s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.003942s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine [cached since 0.00424s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - [cached since 0.00424s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,372 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,372 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine [cached since 0.004516s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - [cached since 0.004516s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine [cached since 0.004788s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - [cached since 0.004788s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine [cached since 0.005075s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - [cached since 0.005075s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,373 INFO sqlalchemy.engine.Engine [cached since 0.005348s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,373 - sqlalchemy.engine.Engine - INFO - [cached since 0.005348s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine [cached since 0.005622s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.005622s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine [cached since 0.005895s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.005895s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:44:32,374 INFO sqlalchemy.engine.Engine [cached since 0.006176s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,374 - sqlalchemy.engine.Engine - INFO - [cached since 0.006176s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:44:32,375 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:44:32,375 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:44:32,375 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:44:32,375 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:44:32,375 - app.main - INFO - Cache service inicializado
2025-08-08 17:44:32,375 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:44:32,375 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/middleware/rate_limit_middleware.py', 'dashboard_whatsapp_complete.py', 'app/utils/rate_limiter.py', 'scripts/test_rate_limiting.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:46:07,052 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:46:07,052 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:46:07,052 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [469063]
WARNING:  WatchFiles detected changes in 'dashboard_whatsapp_complete.py'. Reloading...
INFO:     Started server process [469950]
INFO:     Waiting for application startup.
2025-08-08 17:46:10,365 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:46:10,367 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:46:10,390 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:46:10,390 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:46:10,391 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:10,391 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:10,392 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:46:10,392 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:46:10,392 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:10,392 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:10,393 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:46:10,393 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:46:10,393 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:10,393 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:10,394 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:46:10,394 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:46:10,396 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,396 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,396 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,396 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,399 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,399 INFO sqlalchemy.engine.Engine [cached since 0.002679s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.002679s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,399 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,399 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,399 INFO sqlalchemy.engine.Engine [cached since 0.003254s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,399 - sqlalchemy.engine.Engine - INFO - [cached since 0.003254s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,400 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,400 INFO sqlalchemy.engine.Engine [cached since 0.003782s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.003782s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,400 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,400 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,400 INFO sqlalchemy.engine.Engine [cached since 0.004248s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,400 - sqlalchemy.engine.Engine - INFO - [cached since 0.004248s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,401 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,401 INFO sqlalchemy.engine.Engine [cached since 0.004745s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.004745s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,401 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,401 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,401 INFO sqlalchemy.engine.Engine [cached since 0.005235s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,401 - sqlalchemy.engine.Engine - INFO - [cached since 0.005235s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine [cached since 0.005579s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.005579s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine [cached since 0.005918s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.005918s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,402 INFO sqlalchemy.engine.Engine [cached since 0.006266s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,402 - sqlalchemy.engine.Engine - INFO - [cached since 0.006266s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine [cached since 0.006592s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.006592s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine [cached since 0.006928s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.006928s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,403 INFO sqlalchemy.engine.Engine [cached since 0.007279s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.007279s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine [cached since 0.007619s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - [cached since 0.007619s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine [cached since 0.00797s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - [cached since 0.00797s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,404 INFO sqlalchemy.engine.Engine [cached since 0.008309s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,404 - sqlalchemy.engine.Engine - INFO - [cached since 0.008309s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,405 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,405 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:10,405 INFO sqlalchemy.engine.Engine [cached since 0.008684s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,405 - sqlalchemy.engine.Engine - INFO - [cached since 0.008684s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:10,405 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:46:10,405 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:46:10,406 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:46:10,406 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:46:10,407 - app.main - INFO - Cache service inicializado
2025-08-08 17:46:10,407 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:46:10,407 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [470052]
INFO:     Waiting for application startup.
2025-08-08 17:46:13,453 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:46:13,454 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:46:13,474 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:46:13,474 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:46:13,474 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:13,474 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:13,475 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:46:13,475 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:46:13,475 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:13,475 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:13,475 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:46:13,475 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:46:13,475 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:46:13,475 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:46:13,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:46:13,476 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:46:13,478 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,478 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,478 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,478 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,479 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,479 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,480 INFO sqlalchemy.engine.Engine [cached since 0.001801s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,480 - sqlalchemy.engine.Engine - INFO - [cached since 0.001801s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,480 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,480 INFO sqlalchemy.engine.Engine [cached since 0.002208s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,480 - sqlalchemy.engine.Engine - INFO - [cached since 0.002208s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,480 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,480 INFO sqlalchemy.engine.Engine [cached since 0.00259s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,480 - sqlalchemy.engine.Engine - INFO - [cached since 0.00259s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine [cached since 0.002957s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - [cached since 0.002957s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine [cached since 0.003318s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - [cached since 0.003318s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,481 INFO sqlalchemy.engine.Engine [cached since 0.003688s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,481 - sqlalchemy.engine.Engine - INFO - [cached since 0.003688s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine [cached since 0.003981s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - [cached since 0.003981s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine [cached since 0.004269s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - [cached since 0.004269s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,482 INFO sqlalchemy.engine.Engine [cached since 0.004557s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,482 - sqlalchemy.engine.Engine - INFO - [cached since 0.004557s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine [cached since 0.00484s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - [cached since 0.00484s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine [cached since 0.005118s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - [cached since 0.005118s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine [cached since 0.005396s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - [cached since 0.005396s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,483 INFO sqlalchemy.engine.Engine [cached since 0.005672s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,483 - sqlalchemy.engine.Engine - INFO - [cached since 0.005672s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine [cached since 0.005956s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.005956s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine [cached since 0.006231s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.006231s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:46:13,484 INFO sqlalchemy.engine.Engine [cached since 0.006505s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,484 - sqlalchemy.engine.Engine - INFO - [cached since 0.006505s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:46:13,485 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:46:13,485 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:46:13,485 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:46:13,485 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:46:13,485 - app.main - INFO - Cache service inicializado
2025-08-08 17:46:13,486 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:46:13,486 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:49:55,643 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:49:55,643 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:49:55,643 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [470052]
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py'. Reloading...
INFO:     Started server process [470951]
INFO:     Waiting for application startup.
2025-08-08 17:49:58,993 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:49:58,994 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:49:59,013 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:49:59,013 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:49:59,013 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:49:59,013 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:49:59,014 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:49:59,014 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:49:59,014 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:49:59,014 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:49:59,015 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:49:59,015 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:49:59,015 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:49:59,015 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:49:59,015 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:49:59,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:49:59,018 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,018 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,018 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,018 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,019 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,019 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,019 INFO sqlalchemy.engine.Engine [cached since 0.001727s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,019 - sqlalchemy.engine.Engine - INFO - [cached since 0.001727s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine [cached since 0.002131s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - [cached since 0.002131s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine [cached since 0.00251s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - [cached since 0.00251s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,020 INFO sqlalchemy.engine.Engine [cached since 0.00287s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,020 - sqlalchemy.engine.Engine - INFO - [cached since 0.00287s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine [cached since 0.00323s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.00323s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine [cached since 0.003602s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.003602s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,021 INFO sqlalchemy.engine.Engine [cached since 0.003887s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,021 - sqlalchemy.engine.Engine - INFO - [cached since 0.003887s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine [cached since 0.00417s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.00417s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine [cached since 0.004459s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.004459s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,022 INFO sqlalchemy.engine.Engine [cached since 0.004736s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.004736s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine [cached since 0.005014s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.005014s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine [cached since 0.005287s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.005287s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine [cached since 0.005565s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.005565s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,023 INFO sqlalchemy.engine.Engine [cached since 0.005845s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,023 - sqlalchemy.engine.Engine - INFO - [cached since 0.005845s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,024 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,024 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,024 INFO sqlalchemy.engine.Engine [cached since 0.006117s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,024 - sqlalchemy.engine.Engine - INFO - [cached since 0.006117s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,024 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,024 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:49:59,024 INFO sqlalchemy.engine.Engine [cached since 0.006384s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,024 - sqlalchemy.engine.Engine - INFO - [cached since 0.006384s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:49:59,024 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:49:59,024 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:49:59,025 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:49:59,025 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:49:59,025 - app.main - INFO - Cache service inicializado
2025-08-08 17:49:59,025 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:49:59,025 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:     Started server process [470966]
INFO:     Waiting for application startup.
2025-08-08 17:50:02,165 - app.main - INFO - Iniciando WhatsApp Agent API...
2025-08-08 17:50:02,166 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 17:50:02,186 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 17:50:02,186 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 17:50:02,187 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:50:02,187 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:50:02,187 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 17:50:02,187 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 17:50:02,187 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:50:02,187 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:50:02,188 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 17:50:02,188 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 17:50:02,188 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 17:50:02,188 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 17:50:02,189 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 17:50:02,189 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 17:50:02,191 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,191 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,191 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,191 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine [cached since 0.001807s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.001807s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine [cached since 0.002223s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.002223s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,193 INFO sqlalchemy.engine.Engine [cached since 0.002577s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,193 - sqlalchemy.engine.Engine - INFO - [cached since 0.002577s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine [cached since 0.002909s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - [cached since 0.002909s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine [cached since 0.003235s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - [cached since 0.003235s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,194 INFO sqlalchemy.engine.Engine [cached since 0.003577s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,194 - sqlalchemy.engine.Engine - INFO - [cached since 0.003577s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine [cached since 0.00385s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.00385s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine [cached since 0.004111s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.004111s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine [cached since 0.004383s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.004383s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,195 INFO sqlalchemy.engine.Engine [cached since 0.004634s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,195 - sqlalchemy.engine.Engine - INFO - [cached since 0.004634s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine [cached since 0.004882s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.004882s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine [cached since 0.005149s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.005149s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine [cached since 0.005418s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - [cached since 0.005418s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,196 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,196 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine [cached since 0.005698s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.005698s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine [cached since 0.005957s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.005957s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine [cached since 0.006209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - [cached since 0.006209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:02,197 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 17:50:02,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 17:50:02,198 - app.main - INFO - Banco de dados inicializado
2025-08-08 17:50:02,198 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 17:50:02,198 - app.main - INFO - Cache service inicializado
2025-08-08 17:50:02,198 - app.main - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 17:50:02,198 - app.main - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 17:50:12,329 - app.main - INFO - Encerrando WhatsApp Agent API...
2025-08-08 17:50:12,329 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 17:50:12,329 - app.main - INFO - Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [470966]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [470993]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:50:15,453 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:50:15,453 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:15,453 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:50:15,454 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:15,454 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:50:15,454 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:15,455 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:50:15,457 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,457 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,459 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,459 INFO sqlalchemy.engine.Engine [cached since 0.002052s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002052s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine [cached since 0.002471s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002471s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine [cached since 0.002861s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002861s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,460 INFO sqlalchemy.engine.Engine [cached since 0.003204s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003204s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine [cached since 0.003521s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003521s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine [cached since 0.003853s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003853s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine [cached since 0.004117s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004117s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,461 INFO sqlalchemy.engine.Engine [cached since 0.004368s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004368s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine [cached since 0.004632s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004632s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine [cached since 0.004907s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004907s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine [cached since 0.005158s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005158s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,462 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine [cached since 0.005443s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005443s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine [cached since 0.005699s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005699s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine [cached since 0.00596s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00596s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine [cached since 0.006201s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006201s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,463 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:15,464 INFO sqlalchemy.engine.Engine [cached since 0.006436s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006436s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:15,464 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [470993]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471013]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:50:33,035 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:50:33,035 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:33,036 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:50:33,036 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:33,036 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:50:33,037 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:33,037 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:50:33,040 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,040 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,041 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,041 INFO sqlalchemy.engine.Engine [cached since 0.001889s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001889s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine [cached since 0.0023s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.0023s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine [cached since 0.002645s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002645s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,042 INFO sqlalchemy.engine.Engine [cached since 0.003008s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003008s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine [cached since 0.003336s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003336s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine [cached since 0.00367s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00367s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,043 INFO sqlalchemy.engine.Engine [cached since 0.003919s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003919s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine [cached since 0.004158s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004158s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine [cached since 0.004457s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004457s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine [cached since 0.004748s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004748s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,044 INFO sqlalchemy.engine.Engine [cached since 0.004997s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004997s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine [cached since 0.00524s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00524s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine [cached since 0.005479s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005479s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine [cached since 0.005731s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005731s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,045 INFO sqlalchemy.engine.Engine [cached since 0.005972s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005972s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,046 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:33,046 INFO sqlalchemy.engine.Engine [cached since 0.006223s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006223s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:33,046 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471013]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471033]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:50:52,150 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:50:52,150 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:52,151 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:50:52,151 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:52,151 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:50:52,151 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:50:52,152 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:50:52,155 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,155 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,156 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,156 INFO sqlalchemy.engine.Engine [cached since 0.001731s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001731s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine [cached since 0.002102s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002102s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine [cached since 0.002443s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002443s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,157 INFO sqlalchemy.engine.Engine [cached since 0.00279s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00279s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine [cached since 0.003158s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003158s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine [cached since 0.003519s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003519s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine [cached since 0.003802s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003802s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,158 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine [cached since 0.004075s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004075s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine [cached since 0.004341s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004341s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine [cached since 0.004609s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004609s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,159 INFO sqlalchemy.engine.Engine [cached since 0.00488s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00488s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine [cached since 0.005139s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005139s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine [cached since 0.005398s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005398s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine [cached since 0.005675s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005675s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,160 INFO sqlalchemy.engine.Engine [cached since 0.005934s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005934s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,161 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:50:52,161 INFO sqlalchemy.engine.Engine [cached since 0.006188s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006188s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:50:52,161 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471033]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471056]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:51:04,827 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:51:04,827 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:04,828 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:51:04,828 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:04,829 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:51:04,829 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:04,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:51:04,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,832 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,833 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,833 INFO sqlalchemy.engine.Engine [cached since 0.001649s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001649s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine [cached since 0.002054s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002054s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine [cached since 0.002423s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002423s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,834 INFO sqlalchemy.engine.Engine [cached since 0.002786s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002786s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine [cached since 0.00314s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00314s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine [cached since 0.00352s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00352s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,835 INFO sqlalchemy.engine.Engine [cached since 0.003805s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003805s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine [cached since 0.004079s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004079s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine [cached since 0.004365s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004365s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine [cached since 0.004649s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004649s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,836 INFO sqlalchemy.engine.Engine [cached since 0.004925s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004925s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine [cached since 0.0052s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.0052s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine [cached since 0.005487s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005487s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,837 INFO sqlalchemy.engine.Engine [cached since 0.005767s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005767s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,838 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,838 INFO sqlalchemy.engine.Engine [cached since 0.006037s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006037s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,838 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:04,838 INFO sqlalchemy.engine.Engine [cached since 0.006312s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006312s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:04,838 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471056]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471079]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:51:19,028 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:51:19,028 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:19,029 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:51:19,029 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:19,029 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:51:19,029 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:51:19,030 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:51:19,032 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,032 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,034 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,034 INFO sqlalchemy.engine.Engine [cached since 0.001699s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001699s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,034 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,034 INFO sqlalchemy.engine.Engine [cached since 0.002125s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002125s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,035 INFO sqlalchemy.engine.Engine [cached since 0.0025s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.0025s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,035 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,035 INFO sqlalchemy.engine.Engine [cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine [cached since 0.003232s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003232s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine [cached since 0.003599s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003599s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine [cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine [cached since 0.004172s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004172s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine [cached since 0.004453s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004453s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine [cached since 0.004733s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004733s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,037 INFO sqlalchemy.engine.Engine [cached since 0.005018s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005018s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine [cached since 0.005295s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005295s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine [cached since 0.005567s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005567s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine [cached since 0.005858s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005858s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,038 INFO sqlalchemy.engine.Engine [cached since 0.006134s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006134s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,039 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:51:19,039 INFO sqlalchemy.engine.Engine [cached since 0.006405s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006405s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:51:19,039 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471079]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471106]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:52:04,022 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:52:04,023 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:04,023 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:52:04,023 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:04,024 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:52:04,024 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:04,025 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:52:04,027 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,027 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine [cached since 0.001789s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001789s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine [cached since 0.002157s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002157s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,029 INFO sqlalchemy.engine.Engine [cached since 0.002499s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002499s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine [cached since 0.002818s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002818s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine [cached since 0.003142s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003142s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,030 INFO sqlalchemy.engine.Engine [cached since 0.00348s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00348s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine [cached since 0.003736s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003736s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine [cached since 0.003981s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003981s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine [cached since 0.004237s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004237s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,031 INFO sqlalchemy.engine.Engine [cached since 0.004483s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004483s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine [cached since 0.004722s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004722s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine [cached since 0.004963s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004963s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine [cached since 0.005224s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005224s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,032 INFO sqlalchemy.engine.Engine [cached since 0.005469s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005469s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,033 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,033 INFO sqlalchemy.engine.Engine [cached since 0.005708s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005708s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,033 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:04,033 INFO sqlalchemy.engine.Engine [cached since 0.005944s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005944s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:04,033 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471106]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471135]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:52:48,369 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:52:48,369 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:48,370 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:52:48,370 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:48,371 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:52:48,371 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:52:48,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:52:48,374 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,374 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,376 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,376 INFO sqlalchemy.engine.Engine [cached since 0.001847s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001847s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,376 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,376 INFO sqlalchemy.engine.Engine [cached since 0.002226s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002226s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine [cached since 0.00258s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00258s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine [cached since 0.002921s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002921s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,377 INFO sqlalchemy.engine.Engine [cached since 0.003256s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003256s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine [cached since 0.003591s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003591s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine [cached since 0.003886s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003886s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,378 INFO sqlalchemy.engine.Engine [cached since 0.004191s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004191s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine [cached since 0.00454s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00454s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine [cached since 0.00484s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00484s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine [cached since 0.005094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005094s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,379 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine [cached since 0.005344s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005344s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine [cached since 0.005589s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005589s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine [cached since 0.005844s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005844s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine [cached since 0.006088s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006088s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,380 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:52:48,381 INFO sqlalchemy.engine.Engine [cached since 0.006328s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006328s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:52:48,381 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471135]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471156]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:53:04,532 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:53:04,532 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:53:04,533 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:53:04,533 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:53:04,533 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:53:04,534 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:53:04,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:53:04,537 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,537 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine [cached since 0.001925s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001925s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine [cached since 0.002357s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002357s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,539 INFO sqlalchemy.engine.Engine [cached since 0.002755s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002755s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,540 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,540 INFO sqlalchemy.engine.Engine [cached since 0.003199s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003199s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,540 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,540 INFO sqlalchemy.engine.Engine [cached since 0.003612s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003612s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine [cached since 0.004061s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004061s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine [cached since 0.004373s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004373s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,541 INFO sqlalchemy.engine.Engine [cached since 0.004632s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004632s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine [cached since 0.004914s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004914s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine [cached since 0.005165s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005165s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine [cached since 0.005485s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005485s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,542 INFO sqlalchemy.engine.Engine [cached since 0.005797s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005797s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine [cached since 0.006068s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006068s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine [cached since 0.006334s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006334s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine [cached since 0.006581s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006581s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:53:04,543 INFO sqlalchemy.engine.Engine [cached since 0.006823s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006823s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:53:04,544 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook_secure.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471156]
WARNING:  WatchFiles detected changes in 'app/routes/webhook_secure.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471288]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:54:59,111 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:54:59,111 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:54:59,112 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:54:59,112 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:54:59,112 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:54:59,112 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:54:59,113 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:54:59,115 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,115 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,117 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,117 INFO sqlalchemy.engine.Engine [cached since 0.001903s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001903s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine [cached since 0.002344s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002344s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine [cached since 0.002764s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002764s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,118 INFO sqlalchemy.engine.Engine [cached since 0.003109s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003109s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine [cached since 0.003445s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003445s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine [cached since 0.003797s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003797s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,119 INFO sqlalchemy.engine.Engine [cached since 0.004066s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004066s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine [cached since 0.004323s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004323s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine [cached since 0.004591s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004591s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine [cached since 0.004853s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004853s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,120 INFO sqlalchemy.engine.Engine [cached since 0.0051s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.0051s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine [cached since 0.005361s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005361s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine [cached since 0.005612s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005612s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine [cached since 0.00587s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00587s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,121 INFO sqlalchemy.engine.Engine [cached since 0.006153s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006153s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,122 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:54:59,122 INFO sqlalchemy.engine.Engine [cached since 0.006437s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006437s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:54:59,122 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:     Started server process [471304]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:55:02,358 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:55:02,358 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:02,359 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:55:02,359 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:02,360 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:55:02,360 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:02,361 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:55:02,363 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,363 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,365 INFO sqlalchemy.engine.Engine [cached since 0.001704s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001704s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,365 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,365 INFO sqlalchemy.engine.Engine [cached since 0.002085s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002085s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine [cached since 0.002428s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002428s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine [cached since 0.002758s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002758s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,366 INFO sqlalchemy.engine.Engine [cached since 0.003113s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003113s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine [cached since 0.003514s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003514s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine [cached since 0.003803s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003803s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine [cached since 0.004095s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004095s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,367 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine [cached since 0.004395s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004395s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine [cached since 0.004647s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004647s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine [cached since 0.004904s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004904s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine [cached since 0.005147s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005147s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,368 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine [cached since 0.005387s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005387s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine [cached since 0.005628s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005628s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine [cached since 0.005871s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005871s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:02,369 INFO sqlalchemy.engine.Engine [cached since 0.006109s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006109s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:02,370 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/routes/webhook.py', 'app/routes/webhook_old.py', 'app/routes/webhook_secure.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471304]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471336]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:55:22,471 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:55:22,471 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:22,472 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:55:22,472 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:22,473 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:55:22,473 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:55:22,473 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:55:22,475 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,476 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,477 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,477 INFO sqlalchemy.engine.Engine [cached since 0.001707s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001707s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,477 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,478 INFO sqlalchemy.engine.Engine [cached since 0.002151s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002151s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,478 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,478 INFO sqlalchemy.engine.Engine [cached since 0.002545s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002545s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,478 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,478 INFO sqlalchemy.engine.Engine [cached since 0.002932s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002932s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine [cached since 0.003301s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003301s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine [cached since 0.0037s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.0037s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,479 INFO sqlalchemy.engine.Engine [cached since 0.003997s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003997s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine [cached since 0.004282s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004282s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine [cached since 0.004578s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004578s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine [cached since 0.004878s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004878s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,480 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine [cached since 0.005163s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005163s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine [cached since 0.005444s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005444s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine [cached since 0.005736s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005736s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,481 INFO sqlalchemy.engine.Engine [cached since 0.006021s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006021s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,482 INFO sqlalchemy.engine.Engine [cached since 0.00631s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00631s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,482 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:55:22,482 INFO sqlalchemy.engine.Engine [cached since 0.00665s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00665s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:55:22,482 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'scripts/test_whatsapp_sanitization.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471336]
WARNING:  WatchFiles detected changes in 'scripts/test_whatsapp_sanitization.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471429]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:58:09,639 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:58:09,639 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:09,640 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:58:09,640 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:09,641 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:58:09,641 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:09,641 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:58:09,644 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,644 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00016s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,645 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,645 INFO sqlalchemy.engine.Engine [cached since 0.001867s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001867s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,646 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,646 INFO sqlalchemy.engine.Engine [cached since 0.002449s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002449s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,646 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,647 INFO sqlalchemy.engine.Engine [cached since 0.002978s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002978s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,647 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,647 INFO sqlalchemy.engine.Engine [cached since 0.003406s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003406s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,647 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,647 INFO sqlalchemy.engine.Engine [cached since 0.003773s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003773s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine [cached since 0.004169s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004169s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine [cached since 0.004459s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004459s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine [cached since 0.004728s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004728s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine [cached since 0.005006s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005006s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine [cached since 0.00527s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00527s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine [cached since 0.00556s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00556s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,649 INFO sqlalchemy.engine.Engine [cached since 0.005838s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005838s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine [cached since 0.006119s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006119s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine [cached since 0.006409s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006409s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine [cached since 0.006701s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006701s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,650 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:09,651 INFO sqlalchemy.engine.Engine [cached since 0.006989s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006989s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:09,651 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471445]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 17:58:12,832 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 17:58:12,832 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:12,833 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 17:58:12,833 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:12,834 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 17:58:12,834 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 17:58:12,834 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 17:58:12,836 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,836 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,838 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,838 INFO sqlalchemy.engine.Engine [cached since 0.001877s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001877s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine [cached since 0.002259s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002259s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine [cached since 0.002667s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002667s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,839 INFO sqlalchemy.engine.Engine [cached since 0.003045s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003045s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine [cached since 0.003408s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003408s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine [cached since 0.003799s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003799s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,840 INFO sqlalchemy.engine.Engine [cached since 0.004095s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004095s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine [cached since 0.004377s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004377s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine [cached since 0.004679s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004679s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,841 INFO sqlalchemy.engine.Engine [cached since 0.004961s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004961s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine [cached since 0.005243s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005243s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine [cached since 0.005522s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005522s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine [cached since 0.005813s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005813s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,842 INFO sqlalchemy.engine.Engine [cached since 0.006096s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006096s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,843 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,843 INFO sqlalchemy.engine.Engine [cached since 0.00637s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00637s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,843 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 17:58:12,843 INFO sqlalchemy.engine.Engine [cached since 0.006659s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006659s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 17:58:12,843 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471445]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471762]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:01:34,408 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:01:34,409 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:34,410 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:01:34,410 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:34,410 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:01:34,410 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:34,411 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:01:34,413 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,413 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00015s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,415 INFO sqlalchemy.engine.Engine [cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,415 INFO sqlalchemy.engine.Engine [cached since 0.002279s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002279s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine [cached since 0.002668s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002668s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine [cached since 0.00302s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00302s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,416 INFO sqlalchemy.engine.Engine [cached since 0.003346s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003346s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine [cached since 0.003685s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003685s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine [cached since 0.003943s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003943s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine [cached since 0.004203s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004203s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,417 INFO sqlalchemy.engine.Engine [cached since 0.004462s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004462s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine [cached since 0.004701s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004701s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine [cached since 0.00495s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00495s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine [cached since 0.005199s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005199s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,418 INFO sqlalchemy.engine.Engine [cached since 0.005439s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005439s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine [cached since 0.005679s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005679s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine [cached since 0.005922s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005922s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine [cached since 0.006166s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006166s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:34,419 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471762]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471783]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:01:50,556 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:01:50,556 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:50,557 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:01:50,557 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:50,558 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:01:50,558 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:01:50,558 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:01:50,560 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,560 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,562 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,562 INFO sqlalchemy.engine.Engine [cached since 0.00173s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00173s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,562 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,562 INFO sqlalchemy.engine.Engine [cached since 0.002105s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002105s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine [cached since 0.002457s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002457s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine [cached since 0.002779s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002779s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,563 INFO sqlalchemy.engine.Engine [cached since 0.003103s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003103s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine [cached since 0.003446s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003446s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine [cached since 0.003698s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003698s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine [cached since 0.00395s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00395s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,564 INFO sqlalchemy.engine.Engine [cached since 0.004204s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004204s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine [cached since 0.004444s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004444s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine [cached since 0.004693s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004693s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine [cached since 0.004941s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004941s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,565 INFO sqlalchemy.engine.Engine [cached since 0.005207s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005207s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine [cached since 0.005463s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005463s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine [cached since 0.005706s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005706s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine [cached since 0.00596s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00596s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:01:50,566 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471783]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471862]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:02:21,513 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:02:21,513 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:02:21,514 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:02:21,514 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:02:21,515 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:02:21,515 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:02:21,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:02:21,518 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,518 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine [cached since 0.001905s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001905s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine [cached since 0.002309s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002309s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,520 INFO sqlalchemy.engine.Engine [cached since 0.002662s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002662s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine [cached since 0.003003s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003003s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine [cached since 0.003344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003344s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,521 INFO sqlalchemy.engine.Engine [cached since 0.003684s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003684s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine [cached since 0.003941s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003941s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine [cached since 0.004193s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004193s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine [cached since 0.004457s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004457s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,522 INFO sqlalchemy.engine.Engine [cached since 0.004706s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004706s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine [cached since 0.004999s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004999s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine [cached since 0.005266s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005266s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine [cached since 0.005532s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005532s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,523 INFO sqlalchemy.engine.Engine [cached since 0.005787s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005787s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,524 INFO sqlalchemy.engine.Engine [cached since 0.006041s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006041s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:02:21,524 INFO sqlalchemy.engine.Engine [cached since 0.006285s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006285s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:02:21,524 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/utils/whatsapp_sanitizer.py', 'app/routes/webhook.py', 'app/routes/webhook_secure.py', 'scripts/test_whatsapp_sanitization.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471862]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [471932]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:04:05,670 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:04:05,671 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:04:05,672 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:04:05,672 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:04:05,672 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:04:05,672 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:04:05,673 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:04:05,676 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,676 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,678 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,678 INFO sqlalchemy.engine.Engine [cached since 0.002279s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002279s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine [cached since 0.002836s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002836s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine [cached since 0.003292s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003292s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,679 INFO sqlalchemy.engine.Engine [cached since 0.003669s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003669s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine [cached since 0.004016s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004016s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine [cached since 0.004383s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004383s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,680 INFO sqlalchemy.engine.Engine [cached since 0.004689s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004689s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine [cached since 0.004989s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004989s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine [cached since 0.005306s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005306s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,681 INFO sqlalchemy.engine.Engine [cached since 0.005601s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005601s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine [cached since 0.005883s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005883s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine [cached since 0.00617s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00617s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine [cached since 0.006466s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006466s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,682 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine [cached since 0.00677s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00677s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine [cached since 0.007033s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.007033s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine [cached since 0.007303s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.007303s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:04:05,683 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/production_logger.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [471932]
WARNING:  WatchFiles detected changes in 'app/services/production_logger.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472063]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:06:24,580 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:06:24,580 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:24,581 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:06:24,581 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:24,582 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:06:24,582 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:24,583 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:06:24,585 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,585 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,586 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,586 INFO sqlalchemy.engine.Engine [cached since 0.001668s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001668s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,587 INFO sqlalchemy.engine.Engine [cached since 0.002061s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002061s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,587 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,587 INFO sqlalchemy.engine.Engine [cached since 0.002415s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002415s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine [cached since 0.002749s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002749s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine [cached since 0.003069s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003069s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,588 INFO sqlalchemy.engine.Engine [cached since 0.003497s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003497s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine [cached since 0.003784s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003784s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine [cached since 0.004044s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004044s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine [cached since 0.004307s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004307s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,589 INFO sqlalchemy.engine.Engine [cached since 0.004553s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004553s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine [cached since 0.004801s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004801s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine [cached since 0.005043s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005043s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine [cached since 0.005293s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005293s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,590 INFO sqlalchemy.engine.Engine [cached since 0.005544s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005544s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,591 INFO sqlalchemy.engine.Engine [cached since 0.005784s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005784s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,591 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:24,591 INFO sqlalchemy.engine.Engine [cached since 0.006021s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006021s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:24,591 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472079]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:06:27,719 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:06:27,719 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:27,720 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:06:27,720 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:27,721 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:06:27,721 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:06:27,721 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:06:27,724 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,724 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,725 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,725 INFO sqlalchemy.engine.Engine [cached since 0.001863s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001863s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine [cached since 0.002264s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002264s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine [cached since 0.00264s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00264s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,726 INFO sqlalchemy.engine.Engine [cached since 0.002968s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002968s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine [cached since 0.003285s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003285s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine [cached since 0.003628s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003628s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,727 INFO sqlalchemy.engine.Engine [cached since 0.003883s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003883s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine [cached since 0.00413s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00413s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine [cached since 0.004377s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004377s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine [cached since 0.004635s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004635s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,728 INFO sqlalchemy.engine.Engine [cached since 0.004876s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004876s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine [cached since 0.005113s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005113s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine [cached since 0.005376s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005376s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine [cached since 0.005627s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005627s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,729 INFO sqlalchemy.engine.Engine [cached since 0.005871s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005871s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,730 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:06:27,730 INFO sqlalchemy.engine.Engine [cached since 0.006122s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006122s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:06:27,730 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/business_metrics.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [472079]
WARNING:  WatchFiles detected changes in 'app/services/business_metrics.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472110]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:07:40,793 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:07:40,794 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:40,794 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:07:40,794 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:40,795 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:07:40,795 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:40,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:07:40,798 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,798 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,800 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,800 INFO sqlalchemy.engine.Engine [cached since 0.002082s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002082s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,800 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,800 INFO sqlalchemy.engine.Engine [cached since 0.002529s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002529s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,801 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,801 INFO sqlalchemy.engine.Engine [cached since 0.002918s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002918s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,801 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,801 INFO sqlalchemy.engine.Engine [cached since 0.003308s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003308s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,801 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine [cached since 0.003683s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003683s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine [cached since 0.004022s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004022s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine [cached since 0.004287s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004287s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,802 INFO sqlalchemy.engine.Engine [cached since 0.004541s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004541s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine [cached since 0.004793s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004793s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine [cached since 0.005038s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005038s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine [cached since 0.005294s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005294s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,803 INFO sqlalchemy.engine.Engine [cached since 0.005537s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005537s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine [cached since 0.005783s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005783s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine [cached since 0.00606s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00606s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine [cached since 0.006314s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006314s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:40,804 INFO sqlalchemy.engine.Engine [cached since 0.006552s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006552s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:40,805 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472126]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:07:43,942 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:07:43,943 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:43,943 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:07:43,944 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:43,944 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:07:43,944 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:07:43,945 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:07:43,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,947 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,949 INFO sqlalchemy.engine.Engine [cached since 0.001733s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001733s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,949 INFO sqlalchemy.engine.Engine [cached since 0.002154s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002154s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine [cached since 0.002606s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002606s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine [cached since 0.002981s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002981s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,950 INFO sqlalchemy.engine.Engine [cached since 0.003308s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003308s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine [cached since 0.003645s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003645s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine [cached since 0.003904s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003904s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine [cached since 0.004167s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004167s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,951 INFO sqlalchemy.engine.Engine [cached since 0.004418s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004418s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine [cached since 0.00467s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00467s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine [cached since 0.004914s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004914s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine [cached since 0.005202s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005202s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine [cached since 0.005459s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005459s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine [cached since 0.005719s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005719s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine [cached since 0.005971s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005971s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:07:43,953 INFO sqlalchemy.engine.Engine [cached since 0.006209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006209s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:07:43,954 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [472126]
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472172]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:08:56,738 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:08:56,738 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:56,739 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:08:56,739 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:56,740 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:08:56,740 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:56,740 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:08:56,742 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,742 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,744 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,744 INFO sqlalchemy.engine.Engine [cached since 0.001723s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001723s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,744 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,744 INFO sqlalchemy.engine.Engine [cached since 0.002132s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002132s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,745 INFO sqlalchemy.engine.Engine [cached since 0.002509s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002509s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,745 INFO sqlalchemy.engine.Engine [cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002875s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine [cached since 0.003237s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003237s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine [cached since 0.003604s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003604s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine [cached since 0.003899s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003899s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine [cached since 0.004182s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004182s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine [cached since 0.004466s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004466s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine [cached since 0.004753s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004753s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,747 INFO sqlalchemy.engine.Engine [cached since 0.005034s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005034s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine [cached since 0.005317s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005317s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine [cached since 0.005593s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005593s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine [cached since 0.005881s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005881s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,748 INFO sqlalchemy.engine.Engine [cached since 0.00616s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00616s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,749 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:56,749 INFO sqlalchemy.engine.Engine [cached since 0.006438s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006438s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:56,749 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472189]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:08:59,913 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:08:59,913 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:59,915 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:08:59,915 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:59,916 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:08:59,916 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:08:59,917 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:08:59,920 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,921 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00026s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,923 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,923 INFO sqlalchemy.engine.Engine [cached since 0.003127s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003127s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,924 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,924 INFO sqlalchemy.engine.Engine [cached since 0.003848s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003848s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,925 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,925 INFO sqlalchemy.engine.Engine [cached since 0.004377s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004377s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,925 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,925 INFO sqlalchemy.engine.Engine [cached since 0.004865s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004865s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine [cached since 0.005317s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005317s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine [cached since 0.005786s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005786s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,926 INFO sqlalchemy.engine.Engine [cached since 0.006103s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006103s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine [cached since 0.006464s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006464s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine [cached since 0.006823s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006823s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,927 INFO sqlalchemy.engine.Engine [cached since 0.007137s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.007137s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine [cached since 0.007429s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.007429s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine [cached since 0.007721s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.007721s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,928 INFO sqlalchemy.engine.Engine [cached since 0.008007s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.008007s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine [cached since 0.008296s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.008296s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine [cached since 0.00857s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00857s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine [cached since 0.008852s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.008852s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:08:59,929 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/performance_monitor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [472189]
WARNING:  WatchFiles detected changes in 'app/services/performance_monitor.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472230]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:10:11,615 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:10:11,615 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:11,616 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:10:11,616 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:11,616 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:10:11,616 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:11,617 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:10:11,619 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,619 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,621 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,621 INFO sqlalchemy.engine.Engine [cached since 0.00173s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00173s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,621 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,621 INFO sqlalchemy.engine.Engine [cached since 0.002168s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002168s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine [cached since 0.002521s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002521s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine [cached since 0.002855s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002855s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,622 INFO sqlalchemy.engine.Engine [cached since 0.003178s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003178s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine [cached since 0.003508s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003508s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine [cached since 0.003767s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003767s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine [cached since 0.004022s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004022s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,623 INFO sqlalchemy.engine.Engine [cached since 0.004277s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004277s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine [cached since 0.004522s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004522s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine [cached since 0.004771s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004771s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine [cached since 0.005022s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005022s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,624 INFO sqlalchemy.engine.Engine [cached since 0.005265s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005265s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine [cached since 0.005511s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005511s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine [cached since 0.005801s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005801s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:11,625 INFO sqlalchemy.engine.Engine [cached since 0.006054s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006054s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:11,626 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472253]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:10:14,760 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:10:14,760 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:14,761 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:10:14,761 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:14,762 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:10:14,762 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:10:14,763 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:10:14,765 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,765 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,766 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,766 INFO sqlalchemy.engine.Engine [cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,767 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,767 INFO sqlalchemy.engine.Engine [cached since 0.002259s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002259s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,767 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,767 INFO sqlalchemy.engine.Engine [cached since 0.002669s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002669s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine [cached since 0.003019s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003019s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine [cached since 0.003336s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003336s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,768 INFO sqlalchemy.engine.Engine [cached since 0.003673s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003673s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine [cached since 0.003931s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003931s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine [cached since 0.004181s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004181s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine [cached since 0.004439s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004439s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,769 INFO sqlalchemy.engine.Engine [cached since 0.004688s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004688s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine [cached since 0.004931s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004931s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine [cached since 0.005172s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005172s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine [cached since 0.005423s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005423s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,770 INFO sqlalchemy.engine.Engine [cached since 0.00568s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00568s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,771 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,771 INFO sqlalchemy.engine.Engine [cached since 0.005922s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005922s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,771 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:10:14,771 INFO sqlalchemy.engine.Engine [cached since 0.00616s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00616s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:10:14,771 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/services/backup_system.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [472253]
WARNING:  WatchFiles detected changes in 'app/services/backup_system.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472289]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:11:26,987 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:11:26,987 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:26,988 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:11:26,988 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:26,989 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:11:26,989 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:26,989 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:11:26,992 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,992 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00014s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,993 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,993 INFO sqlalchemy.engine.Engine [cached since 0.00172s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00172s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine [cached since 0.002125s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002125s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine [cached since 0.002513s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002513s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,994 INFO sqlalchemy.engine.Engine [cached since 0.002874s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002874s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine [cached since 0.003232s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003232s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine [cached since 0.003607s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003607s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,995 INFO sqlalchemy.engine.Engine [cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003892s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine [cached since 0.004168s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004168s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine [cached since 0.004463s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004463s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine [cached since 0.004737s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004737s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,996 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine [cached since 0.005011s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005011s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine [cached since 0.005287s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005287s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine [cached since 0.005566s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005566s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,997 INFO sqlalchemy.engine.Engine [cached since 0.005839s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005839s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,998 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,998 INFO sqlalchemy.engine.Engine [cached since 0.006108s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006108s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,998 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:26,998 INFO sqlalchemy.engine.Engine [cached since 0.006378s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.006378s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:26,998 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
INFO:     Started server process [472307]
INFO:     Waiting for application startup.
INFO:app.main:Iniciando WhatsApp Agent API...
INFO:app.services.state_manager:Redis conectado com sucesso
2025-08-08 18:11:30,120 INFO sqlalchemy.engine.Engine select pg_catalog.version()
INFO:sqlalchemy.engine.Engine:select pg_catalog.version()
2025-08-08 18:11:30,120 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:30,121 INFO sqlalchemy.engine.Engine select current_schema()
INFO:sqlalchemy.engine.Engine:select current_schema()
2025-08-08 18:11:30,121 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:30,121 INFO sqlalchemy.engine.Engine show standard_conforming_strings
INFO:sqlalchemy.engine.Engine:show standard_conforming_strings
2025-08-08 18:11:30,122 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-08-08 18:11:30,122 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-08-08 18:11:30,124 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,124 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[generated in 0.00013s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,126 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,126 INFO sqlalchemy.engine.Engine [cached since 0.001604s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001604s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,126 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,126 INFO sqlalchemy.engine.Engine [cached since 0.001986s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.001986s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,126 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine [cached since 0.002336s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002336s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine [cached since 0.002664s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002664s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine [cached since 0.002993s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.002993s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,127 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine [cached since 0.00332s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00332s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine [cached since 0.003581s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003581s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine [cached since 0.003832s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.003832s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine [cached since 0.004081s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004081s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,128 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine [cached since 0.004319s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004319s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine [cached since 0.004562s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004562s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine [cached since 0.004803s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.004803s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine [cached since 0.005041s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005041s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,129 INFO sqlalchemy.engine.Engine [cached since 0.005284s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005284s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,130 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,130 INFO sqlalchemy.engine.Engine [cached since 0.00552s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.00552s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,130 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
INFO:sqlalchemy.engine.Engine:SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:11:30,130 INFO sqlalchemy.engine.Engine [cached since 0.005751s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
INFO:sqlalchemy.engine.Engine:[cached since 0.005751s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:11:30,130 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:app.main:Banco de dados inicializado
INFO:app.services.cache_service:✅ Conexão com Redis estabelecida
INFO:app.main:Cache service inicializado
INFO:app.main:✅ WhatsApp Agent API iniciado com sucesso!
INFO:app.main:📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:app.main:Encerrando WhatsApp Agent API...
INFO:app.services.cache_service:Conexão com Redis fechada
INFO:app.main:Finalizando WhatsApp Agent API...
INFO:     Application shutdown complete.
INFO:     Finished server process [472307]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-113:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 25, in <module>
    from app.services.business_metrics import metrics_collector
  File "/home/vancim/whats_agent/app/services/business_metrics.py", line 19, in <module>
    import aiofiles
ModuleNotFoundError: No module named 'aiofiles'
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-114:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 25, in <module>
    from app.services.business_metrics import metrics_collector
  File "/home/vancim/whats_agent/app/services/business_metrics.py", line 19, in <module>
    import aiofiles
ModuleNotFoundError: No module named 'aiofiles'
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-115:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 25, in <module>
    from app.services.business_metrics import metrics_collector
  File "/home/vancim/whats_agent/app/services/business_metrics.py", line 19, in <module>
    import aiofiles
ModuleNotFoundError: No module named 'aiofiles'
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-116:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 25, in <module>
    from app.services.business_metrics import metrics_collector
  File "/home/vancim/whats_agent/app/services/business_metrics.py", line 19, in <module>
    import aiofiles
ModuleNotFoundError: No module named 'aiofiles'
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-117:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 26, in <module>
    from app.services.automated_alerts import alert_manager as production_alert_manager
  File "/home/vancim/whats_agent/app/services/automated_alerts.py", line 22, in <module>
    from email.mime.multipart import MimeMultipart
ImportError: cannot import name 'MimeMultipart' from 'email.mime.multipart' (/home/vancim/anaconda3/lib/python3.13/email/mime/multipart.py)
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
Process SpawnProcess-118:
Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/config.py", line 436, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/home/vancim/anaconda3/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/home/vancim/whats_agent/app/main.py", line 26, in <module>
    from app.services.automated_alerts import alert_manager as production_alert_manager
  File "/home/vancim/whats_agent/app/services/automated_alerts.py", line 22, in <module>
    from email.mime.multipart import MimeMultipart
ImportError: cannot import name 'MimeMultipart' from 'email.mime.multipart' (/home/vancim/anaconda3/lib/python3.13/email/mime/multipart.py)
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:16:08,815 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [472739]
INFO:     Waiting for application startup.
2025-08-08 18:16:08,839 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:16:08,840 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:16:08,858 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:16:08,858 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:16:08,858 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:08,858 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:08,859 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:16:08,859 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:16:08,859 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:08,859 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:08,860 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:16:08,860 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:16:08,860 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:08,860 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:08,861 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:08,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:08,863 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,863 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,863 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,863 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,865 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,865 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,865 INFO sqlalchemy.engine.Engine [cached since 0.002034s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,865 - sqlalchemy.engine.Engine - INFO - [cached since 0.002034s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,865 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,865 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,865 INFO sqlalchemy.engine.Engine [cached since 0.002581s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,865 - sqlalchemy.engine.Engine - INFO - [cached since 0.002581s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,866 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,866 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,866 INFO sqlalchemy.engine.Engine [cached since 0.003062s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,866 - sqlalchemy.engine.Engine - INFO - [cached since 0.003062s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,866 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,866 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,866 INFO sqlalchemy.engine.Engine [cached since 0.00349s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,866 - sqlalchemy.engine.Engine - INFO - [cached since 0.00349s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine [cached since 0.003907s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - [cached since 0.003907s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine [cached since 0.004333s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - [cached since 0.004333s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,867 INFO sqlalchemy.engine.Engine [cached since 0.004719s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,867 - sqlalchemy.engine.Engine - INFO - [cached since 0.004719s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,868 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,868 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,868 INFO sqlalchemy.engine.Engine [cached since 0.005077s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,868 - sqlalchemy.engine.Engine - INFO - [cached since 0.005077s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,868 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,868 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,868 INFO sqlalchemy.engine.Engine [cached since 0.005432s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,868 - sqlalchemy.engine.Engine - INFO - [cached since 0.005432s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,868 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,868 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine [cached since 0.00576s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - [cached since 0.00576s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine [cached since 0.006088s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - [cached since 0.006088s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine [cached since 0.006421s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - [cached since 0.006421s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,869 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,869 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,870 INFO sqlalchemy.engine.Engine [cached since 0.006744s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,870 - sqlalchemy.engine.Engine - INFO - [cached since 0.006744s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,870 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,870 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,870 INFO sqlalchemy.engine.Engine [cached since 0.007082s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,870 - sqlalchemy.engine.Engine - INFO - [cached since 0.007082s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,870 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,870 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,870 INFO sqlalchemy.engine.Engine [cached since 0.007468s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,870 - sqlalchemy.engine.Engine - INFO - [cached since 0.007468s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,871 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,871 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:08,871 INFO sqlalchemy.engine.Engine [cached since 0.007834s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,871 - sqlalchemy.engine.Engine - INFO - [cached since 0.007834s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:08,871 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:16:08,871 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:16:08,871 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:16:08,872 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:16:08,872 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:16:08,872 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:16:08,873 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:16:08,873 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:16:08,873 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:16:09,875 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:09,875 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:09,875 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:16:09,875 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:16:09,875 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ()
2025-08-08 18:16:09,875 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ()
2025-08-08 18:16:09,876 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:16:09,876 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:16:09,876 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:16:09,876 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:16:09,877 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:16:09,877 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:16:09,877 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:16:09,877 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:16:09,879 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:16:09,879 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:41556 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:16:09,903 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:16:09,934 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:09,934 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:09,934 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:16:09,934 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:16:09,934 INFO sqlalchemy.engine.Engine [cached since 0.05937s ago] ()
2025-08-08 18:16:09,934 - sqlalchemy.engine.Engine - INFO - [cached since 0.05937s ago] ()
2025-08-08 18:16:09,935 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:16:09,935 - sqlalchemy.engine.Engine - INFO - ROLLBACK
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     127.0.0.1:41556 - "GET /metrics HTTP/1.1" 200 OK
INFO:     Waiting for application shutdown.
2025-08-08 18:16:11,783 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:16:11,784 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:16:11,784 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [472739]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:16:14,880 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [472755]
INFO:     Waiting for application startup.
2025-08-08 18:16:14,902 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:16:14,904 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:16:14,922 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:16:14,922 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:16:14,922 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:14,922 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:14,923 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:16:14,923 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:16:14,923 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:14,923 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:14,924 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:16:14,924 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:16:14,924 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:16:14,924 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:16:14,925 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:14,925 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:14,927 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,927 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,927 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,927 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,928 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,928 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,928 INFO sqlalchemy.engine.Engine [cached since 0.001769s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,928 - sqlalchemy.engine.Engine - INFO - [cached since 0.001769s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,929 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,929 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,929 INFO sqlalchemy.engine.Engine [cached since 0.002275s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,929 - sqlalchemy.engine.Engine - INFO - [cached since 0.002275s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,929 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,929 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,929 INFO sqlalchemy.engine.Engine [cached since 0.002774s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,929 - sqlalchemy.engine.Engine - INFO - [cached since 0.002774s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,930 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,930 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,930 INFO sqlalchemy.engine.Engine [cached since 0.003215s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,930 - sqlalchemy.engine.Engine - INFO - [cached since 0.003215s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,930 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,930 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,930 INFO sqlalchemy.engine.Engine [cached since 0.003628s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,930 - sqlalchemy.engine.Engine - INFO - [cached since 0.003628s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine [cached since 0.004047s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - [cached since 0.004047s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine [cached since 0.004393s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - [cached since 0.004393s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,931 INFO sqlalchemy.engine.Engine [cached since 0.004742s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,931 - sqlalchemy.engine.Engine - INFO - [cached since 0.004742s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine [cached since 0.005078s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - [cached since 0.005078s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine [cached since 0.005404s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - [cached since 0.005404s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,932 INFO sqlalchemy.engine.Engine [cached since 0.005745s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,932 - sqlalchemy.engine.Engine - INFO - [cached since 0.005745s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine [cached since 0.006075s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - [cached since 0.006075s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine [cached since 0.006401s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - [cached since 0.006401s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,933 INFO sqlalchemy.engine.Engine [cached since 0.006749s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,933 - sqlalchemy.engine.Engine - INFO - [cached since 0.006749s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,934 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,934 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,934 INFO sqlalchemy.engine.Engine [cached since 0.007105s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,934 - sqlalchemy.engine.Engine - INFO - [cached since 0.007105s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,934 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,934 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:16:14,934 INFO sqlalchemy.engine.Engine [cached since 0.007454s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,934 - sqlalchemy.engine.Engine - INFO - [cached since 0.007454s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:16:14,934 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:16:14,934 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:16:14,935 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:16:14,935 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:16:14,935 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:16:14,935 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:16:14,936 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:16:14,936 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:16:14,936 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:16:15,938 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:15,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:15,938 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:16:15,938 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:16:15,938 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:16:15,938 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:16:15,939 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:16:15,939 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:16:15,939 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ()
2025-08-08 18:16:15,939 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2025-08-08 18:16:15,940 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:16:15,940 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:16:15,940 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:16:15,940 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:16:15,941 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:16:15,941 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:37718 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:16:15,964 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:16:15,995 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:16:15,995 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:16:15,995 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:16:15,995 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:16:15,995 INFO sqlalchemy.engine.Engine [cached since 0.0572s ago] ()
2025-08-08 18:16:15,995 - sqlalchemy.engine.Engine - INFO - [cached since 0.0572s ago] ()
2025-08-08 18:16:15,996 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:16:15,996 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:37718 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:17:18,916 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:17:18,916 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:17:18,916 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:17:18,916 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:17:18,916 INFO sqlalchemy.engine.Engine [cached since 62.98s ago] ()
2025-08-08 18:17:18,916 - sqlalchemy.engine.Engine - INFO - [cached since 62.98s ago] ()
2025-08-08 18:17:18,917 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:17:18,917 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:17:18,917 INFO sqlalchemy.engine.Engine [cached since 62.98s ago] ()
2025-08-08 18:17:18,917 - sqlalchemy.engine.Engine - INFO - [cached since 62.98s ago] ()
2025-08-08 18:17:18,917 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:17:18,917 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:17:18,917 INFO sqlalchemy.engine.Engine [cached since 62.98s ago] ()
2025-08-08 18:17:18,917 - sqlalchemy.engine.Engine - INFO - [cached since 62.98s ago] ()
2025-08-08 18:17:18,917 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:17:18,917 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:38282 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:17:18,936 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:17:18,974 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:17:18,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:17:18,974 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:17:18,974 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:17:18,974 INFO sqlalchemy.engine.Engine [cached since 63.04s ago] ()
2025-08-08 18:17:18,974 - sqlalchemy.engine.Engine - INFO - [cached since 63.04s ago] ()
2025-08-08 18:17:18,974 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:17:18,974 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:38282 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:18:21,809 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:21,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:21,809 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:18:21,809 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:18:21,809 INFO sqlalchemy.engine.Engine [cached since 125.9s ago] ()
2025-08-08 18:18:21,809 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ()
2025-08-08 18:18:21,809 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:18:21,809 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:18:21,809 INFO sqlalchemy.engine.Engine [cached since 125.9s ago] ()
2025-08-08 18:18:21,809 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ()
2025-08-08 18:18:21,810 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:18:21,810 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:18:21,810 INFO sqlalchemy.engine.Engine [cached since 125.9s ago] ()
2025-08-08 18:18:21,810 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ()
2025-08-08 18:18:21,810 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:18:21,810 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:60974 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:18:21,829 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:18:21,860 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:21,860 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:21,860 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:18:21,860 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:18:21,860 INFO sqlalchemy.engine.Engine [cached since 125.9s ago] ()
2025-08-08 18:18:21,860 - sqlalchemy.engine.Engine - INFO - [cached since 125.9s ago] ()
2025-08-08 18:18:21,861 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:18:21,861 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:60974 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_production.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:18:49,856 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:18:49,857 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:18:49,857 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [472755]
WARNING:  WatchFiles detected changes in 'test_production.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:18:53,246 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473125]
INFO:     Waiting for application startup.
2025-08-08 18:18:53,269 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:18:53,271 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:18:53,289 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:18:53,289 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:18:53,289 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:53,289 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:53,290 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:18:53,290 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:18:53,290 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:53,290 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:53,291 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:18:53,291 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:18:53,291 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:53,291 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:53,291 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:53,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:53,293 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,293 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,294 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,294 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,295 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,295 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,295 INFO sqlalchemy.engine.Engine [cached since 0.001869s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,295 - sqlalchemy.engine.Engine - INFO - [cached since 0.001869s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,296 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,296 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,296 INFO sqlalchemy.engine.Engine [cached since 0.002368s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,296 - sqlalchemy.engine.Engine - INFO - [cached since 0.002368s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,296 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,296 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,296 INFO sqlalchemy.engine.Engine [cached since 0.002906s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,296 - sqlalchemy.engine.Engine - INFO - [cached since 0.002906s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,297 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,297 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,297 INFO sqlalchemy.engine.Engine [cached since 0.003356s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,297 - sqlalchemy.engine.Engine - INFO - [cached since 0.003356s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,297 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,297 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,297 INFO sqlalchemy.engine.Engine [cached since 0.003778s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,297 - sqlalchemy.engine.Engine - INFO - [cached since 0.003778s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine [cached since 0.004289s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - [cached since 0.004289s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine [cached since 0.004669s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - [cached since 0.004669s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,298 INFO sqlalchemy.engine.Engine [cached since 0.005017s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,298 - sqlalchemy.engine.Engine - INFO - [cached since 0.005017s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine [cached since 0.005357s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - [cached since 0.005357s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine [cached since 0.005692s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - [cached since 0.005692s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,299 INFO sqlalchemy.engine.Engine [cached since 0.006029s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,299 - sqlalchemy.engine.Engine - INFO - [cached since 0.006029s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine [cached since 0.006351s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - [cached since 0.006351s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine [cached since 0.00669s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - [cached since 0.00669s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,300 INFO sqlalchemy.engine.Engine [cached since 0.007018s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,300 - sqlalchemy.engine.Engine - INFO - [cached since 0.007018s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,301 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,301 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,301 INFO sqlalchemy.engine.Engine [cached since 0.007346s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,301 - sqlalchemy.engine.Engine - INFO - [cached since 0.007346s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,301 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,301 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:53,301 INFO sqlalchemy.engine.Engine [cached since 0.007698s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,301 - sqlalchemy.engine.Engine - INFO - [cached since 0.007698s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:53,301 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:18:53,301 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:18:53,302 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:18:53,302 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:18:53,302 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:18:53,303 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:18:53,303 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:18:53,303 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:18:53,303 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:18:57,387 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473141]
INFO:     Waiting for application startup.
2025-08-08 18:18:57,410 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:18:57,411 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:18:57,429 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:18:57,429 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:18:57,429 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:57,429 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:57,430 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:18:57,430 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:18:57,430 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:57,430 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:57,431 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:18:57,431 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:18:57,431 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:18:57,431 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:18:57,432 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:57,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:57,434 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,434 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,434 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,434 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,435 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,435 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,435 INFO sqlalchemy.engine.Engine [cached since 0.001795s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,435 - sqlalchemy.engine.Engine - INFO - [cached since 0.001795s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,436 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,436 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,436 INFO sqlalchemy.engine.Engine [cached since 0.002245s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,436 - sqlalchemy.engine.Engine - INFO - [cached since 0.002245s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,436 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,436 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,436 INFO sqlalchemy.engine.Engine [cached since 0.002726s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,436 - sqlalchemy.engine.Engine - INFO - [cached since 0.002726s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,437 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,437 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,437 INFO sqlalchemy.engine.Engine [cached since 0.003171s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,437 - sqlalchemy.engine.Engine - INFO - [cached since 0.003171s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,437 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,437 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,437 INFO sqlalchemy.engine.Engine [cached since 0.003611s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,437 - sqlalchemy.engine.Engine - INFO - [cached since 0.003611s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine [cached since 0.004063s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - [cached since 0.004063s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine [cached since 0.004443s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - [cached since 0.004443s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,438 INFO sqlalchemy.engine.Engine [cached since 0.004798s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,438 - sqlalchemy.engine.Engine - INFO - [cached since 0.004798s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine [cached since 0.005159s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - [cached since 0.005159s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine [cached since 0.005525s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - [cached since 0.005525s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,439 INFO sqlalchemy.engine.Engine [cached since 0.005875s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,439 - sqlalchemy.engine.Engine - INFO - [cached since 0.005875s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,440 INFO sqlalchemy.engine.Engine [cached since 0.006219s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.006219s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,440 INFO sqlalchemy.engine.Engine [cached since 0.006578s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,440 - sqlalchemy.engine.Engine - INFO - [cached since 0.006578s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,440 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,440 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,441 INFO sqlalchemy.engine.Engine [cached since 0.006933s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.006933s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,441 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,441 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,441 INFO sqlalchemy.engine.Engine [cached since 0.007277s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.007277s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,441 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,441 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:18:57,441 INFO sqlalchemy.engine.Engine [cached since 0.00764s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,441 - sqlalchemy.engine.Engine - INFO - [cached since 0.00764s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:18:57,442 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:18:57,442 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:18:57,442 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:18:57,442 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:18:57,443 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:18:57,443 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:18:57,443 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:18:57,443 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:18:57,443 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:18:58,445 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:58,445 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:58,445 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:18:58,445 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:18:58,445 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:18:58,445 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:18:58,446 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:18:58,446 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:18:58,446 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 18:18:58,446 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 18:18:58,447 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:18:58,447 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:18:58,447 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:18:58,447 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:18:58,448 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:18:58,448 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:36762 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:18:58,470 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:18:58,500 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:18:58,500 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:18:58,500 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:18:58,500 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:18:58,500 INFO sqlalchemy.engine.Engine [cached since 0.05512s ago] ()
2025-08-08 18:18:58,500 - sqlalchemy.engine.Engine - INFO - [cached since 0.05512s ago] ()
2025-08-08 18:18:58,501 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:18:58,501 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:36762 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:19:20,790 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:19:20,790 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:19:20,790 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473141]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:19:23,892 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473196]
INFO:     Waiting for application startup.
2025-08-08 18:19:23,916 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:19:23,917 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:19:23,937 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:19:23,937 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:19:23,937 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:23,937 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:23,938 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:19:23,938 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:19:23,938 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:23,938 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:23,938 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:19:23,938 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:19:23,939 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:23,939 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:23,939 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:23,939 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:23,941 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,941 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,941 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,941 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,943 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,943 INFO sqlalchemy.engine.Engine [cached since 0.002147s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,943 - sqlalchemy.engine.Engine - INFO - [cached since 0.002147s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,944 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,944 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,944 INFO sqlalchemy.engine.Engine [cached since 0.002802s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,944 - sqlalchemy.engine.Engine - INFO - [cached since 0.002802s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,944 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,944 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,945 INFO sqlalchemy.engine.Engine [cached since 0.003256s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.003256s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,945 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,945 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,945 INFO sqlalchemy.engine.Engine [cached since 0.003684s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.003684s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,945 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,945 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,945 INFO sqlalchemy.engine.Engine [cached since 0.004108s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,945 - sqlalchemy.engine.Engine - INFO - [cached since 0.004108s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,946 INFO sqlalchemy.engine.Engine [cached since 0.004528s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.004528s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,946 INFO sqlalchemy.engine.Engine [cached since 0.004876s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,946 - sqlalchemy.engine.Engine - INFO - [cached since 0.004876s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,946 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,946 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,947 INFO sqlalchemy.engine.Engine [cached since 0.005241s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.005241s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,947 INFO sqlalchemy.engine.Engine [cached since 0.005589s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.005589s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,947 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,947 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,947 INFO sqlalchemy.engine.Engine [cached since 0.005995s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,947 - sqlalchemy.engine.Engine - INFO - [cached since 0.005995s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine [cached since 0.006326s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.006326s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine [cached since 0.006712s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.006712s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,948 INFO sqlalchemy.engine.Engine [cached since 0.007058s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,948 - sqlalchemy.engine.Engine - INFO - [cached since 0.007058s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine [cached since 0.007392s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.007392s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine [cached since 0.007731s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.007731s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:23,949 INFO sqlalchemy.engine.Engine [cached since 0.008062s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,949 - sqlalchemy.engine.Engine - INFO - [cached since 0.008062s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:23,950 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:19:23,950 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:19:23,950 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:19:23,951 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:19:23,951 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:19:23,951 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:19:23,951 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:19:23,951 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:19:23,951 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:19:24,953 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:24,953 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:24,954 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:24,954 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:24,954 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:19:24,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:19:24,954 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:24,954 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:24,954 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-08-08 18:19:24,954 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2025-08-08 18:19:24,956 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:24,956 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:24,956 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-08-08 18:19:24,956 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2025-08-08 18:19:24,957 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:24,957 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:37638 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:19:24,979 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:19:25,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:25,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:25,011 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:25,011 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:25,011 INFO sqlalchemy.engine.Engine [cached since 0.05752s ago] ()
2025-08-08 18:19:25,011 - sqlalchemy.engine.Engine - INFO - [cached since 0.05752s ago] ()
2025-08-08 18:19:25,012 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:25,012 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:37638 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:19:27,255 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:19:27,256 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:19:27,256 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473196]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:19:30,362 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473216]
INFO:     Waiting for application startup.
2025-08-08 18:19:30,384 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:19:30,386 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:19:30,404 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:19:30,404 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:19:30,404 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:30,404 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:30,405 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:19:30,405 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:19:30,405 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:30,405 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:30,406 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:19:30,406 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:19:30,406 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:30,406 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:30,406 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:30,406 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:30,409 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,409 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,409 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,409 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,411 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,411 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,411 INFO sqlalchemy.engine.Engine [cached since 0.002265s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,411 - sqlalchemy.engine.Engine - INFO - [cached since 0.002265s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,411 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,411 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,411 INFO sqlalchemy.engine.Engine [cached since 0.002831s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,411 - sqlalchemy.engine.Engine - INFO - [cached since 0.002831s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,412 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,412 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,412 INFO sqlalchemy.engine.Engine [cached since 0.003255s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,412 - sqlalchemy.engine.Engine - INFO - [cached since 0.003255s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,412 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,412 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,412 INFO sqlalchemy.engine.Engine [cached since 0.003685s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,412 - sqlalchemy.engine.Engine - INFO - [cached since 0.003685s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,412 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,412 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,413 INFO sqlalchemy.engine.Engine [cached since 0.004089s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,413 - sqlalchemy.engine.Engine - INFO - [cached since 0.004089s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,413 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,413 INFO sqlalchemy.engine.Engine [cached since 0.004516s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,413 - sqlalchemy.engine.Engine - INFO - [cached since 0.004516s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,413 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,413 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,413 INFO sqlalchemy.engine.Engine [cached since 0.00487s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,413 - sqlalchemy.engine.Engine - INFO - [cached since 0.00487s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine [cached since 0.00522s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - [cached since 0.00522s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine [cached since 0.005592s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - [cached since 0.005592s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,414 INFO sqlalchemy.engine.Engine [cached since 0.005975s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,414 - sqlalchemy.engine.Engine - INFO - [cached since 0.005975s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine [cached since 0.006318s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - [cached since 0.006318s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine [cached since 0.006653s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - [cached since 0.006653s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,415 INFO sqlalchemy.engine.Engine [cached since 0.00698s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,415 - sqlalchemy.engine.Engine - INFO - [cached since 0.00698s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine [cached since 0.007317s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.007317s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine [cached since 0.007654s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.007654s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:30,416 INFO sqlalchemy.engine.Engine [cached since 0.007983s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,416 - sqlalchemy.engine.Engine - INFO - [cached since 0.007983s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:30,417 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:19:30,417 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:19:30,417 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:19:30,418 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:19:30,418 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:19:30,418 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:19:30,418 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:19:30,418 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:19:30,418 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:19:31,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:31,420 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:31,421 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:31,421 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:31,421 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:19:31,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:19:31,421 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:31,421 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:31,421 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 18:19:31,421 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 18:19:31,422 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:31,422 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:31,422 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 18:19:31,422 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 18:19:31,423 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:31,423 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:37642 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:19:31,445 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:19:31,476 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:31,476 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:31,476 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:31,476 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:31,476 INFO sqlalchemy.engine.Engine [cached since 0.05553s ago] ()
2025-08-08 18:19:31,476 - sqlalchemy.engine.Engine - INFO - [cached since 0.05553s ago] ()
2025-08-08 18:19:31,477 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:31,477 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:37642 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:19:49,060 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:19:49,061 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:19:49,061 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473216]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:19:52,130 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473289]
INFO:     Waiting for application startup.
2025-08-08 18:19:52,153 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:19:52,155 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:19:52,173 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:19:52,173 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:19:52,174 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:52,174 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:52,175 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:19:52,175 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:19:52,175 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:52,175 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:52,175 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:19:52,175 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:19:52,175 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:19:52,175 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:19:52,176 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:52,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:52,178 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,178 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,178 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,178 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,180 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,180 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,180 INFO sqlalchemy.engine.Engine [cached since 0.0021s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,180 - sqlalchemy.engine.Engine - INFO - [cached since 0.0021s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,181 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,181 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,181 INFO sqlalchemy.engine.Engine [cached since 0.002661s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.002661s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,181 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,181 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,181 INFO sqlalchemy.engine.Engine [cached since 0.003156s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.003156s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,182 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,182 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,182 INFO sqlalchemy.engine.Engine [cached since 0.003619s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.003619s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,182 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,182 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,182 INFO sqlalchemy.engine.Engine [cached since 0.004087s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.004087s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,183 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,183 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,183 INFO sqlalchemy.engine.Engine [cached since 0.004564s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,183 - sqlalchemy.engine.Engine - INFO - [cached since 0.004564s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,183 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,183 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,183 INFO sqlalchemy.engine.Engine [cached since 0.004965s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,183 - sqlalchemy.engine.Engine - INFO - [cached since 0.004965s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,183 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,183 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,184 INFO sqlalchemy.engine.Engine [cached since 0.005362s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,184 - sqlalchemy.engine.Engine - INFO - [cached since 0.005362s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,184 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,184 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,184 INFO sqlalchemy.engine.Engine [cached since 0.00576s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,184 - sqlalchemy.engine.Engine - INFO - [cached since 0.00576s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,184 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,184 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,184 INFO sqlalchemy.engine.Engine [cached since 0.006165s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,184 - sqlalchemy.engine.Engine - INFO - [cached since 0.006165s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,185 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,185 INFO sqlalchemy.engine.Engine [cached since 0.006564s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.006564s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,185 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,185 INFO sqlalchemy.engine.Engine [cached since 0.006985s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,185 - sqlalchemy.engine.Engine - INFO - [cached since 0.006985s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,185 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,185 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,186 INFO sqlalchemy.engine.Engine [cached since 0.007373s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.007373s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,186 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,186 INFO sqlalchemy.engine.Engine [cached since 0.00781s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.00781s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,186 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,186 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,186 INFO sqlalchemy.engine.Engine [cached since 0.008219s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,186 - sqlalchemy.engine.Engine - INFO - [cached since 0.008219s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,187 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:19:52,187 INFO sqlalchemy.engine.Engine [cached since 0.008611s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,187 - sqlalchemy.engine.Engine - INFO - [cached since 0.008611s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:19:52,187 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:19:52,187 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:19:52,187 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:19:52,188 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:19:52,188 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:19:52,188 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:19:52,189 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:19:52,189 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:19:52,189 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:19:53,191 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:53,191 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:53,192 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:53,192 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:53,192 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ()
2025-08-08 18:19:53,192 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2025-08-08 18:19:53,192 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:53,192 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:19:53,193 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ()
2025-08-08 18:19:53,193 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ()
2025-08-08 18:19:53,194 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:53,194 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:19:53,194 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ()
2025-08-08 18:19:53,194 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2025-08-08 18:19:53,195 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:53,195 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:32778 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:19:53,221 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:19:53,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:19:53,251 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:19:53,251 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:19:53,251 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:19:53,251 INFO sqlalchemy.engine.Engine [cached since 0.05954s ago] ()
2025-08-08 18:19:53,251 - sqlalchemy.engine.Engine - INFO - [cached since 0.05954s ago] ()
2025-08-08 18:19:53,252 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:19:53,252 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:32778 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_production.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:20:03,305 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:20:03,306 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:20:03,306 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473289]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:20:06,395 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473340]
INFO:     Waiting for application startup.
2025-08-08 18:20:06,420 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:20:06,421 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:20:06,441 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:20:06,441 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:20:06,441 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:06,441 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:06,442 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:20:06,442 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:20:06,442 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:06,442 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:06,443 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:20:06,443 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:20:06,443 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:06,443 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:06,444 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:06,444 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:06,446 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,446 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,446 INFO sqlalchemy.engine.Engine [generated in 0.00022s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,446 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,448 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,448 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,448 INFO sqlalchemy.engine.Engine [cached since 0.002412s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,448 - sqlalchemy.engine.Engine - INFO - [cached since 0.002412s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,449 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,449 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,449 INFO sqlalchemy.engine.Engine [cached since 0.002977s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,449 - sqlalchemy.engine.Engine - INFO - [cached since 0.002977s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,449 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,449 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,449 INFO sqlalchemy.engine.Engine [cached since 0.003439s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,449 - sqlalchemy.engine.Engine - INFO - [cached since 0.003439s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,450 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,450 INFO sqlalchemy.engine.Engine [cached since 0.003861s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,450 - sqlalchemy.engine.Engine - INFO - [cached since 0.003861s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,450 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,450 INFO sqlalchemy.engine.Engine [cached since 0.00427s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,450 - sqlalchemy.engine.Engine - INFO - [cached since 0.00427s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,450 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,450 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,451 INFO sqlalchemy.engine.Engine [cached since 0.004683s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,451 - sqlalchemy.engine.Engine - INFO - [cached since 0.004683s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,451 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,451 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,451 INFO sqlalchemy.engine.Engine [cached since 0.00502s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,451 - sqlalchemy.engine.Engine - INFO - [cached since 0.00502s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,451 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,451 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,451 INFO sqlalchemy.engine.Engine [cached since 0.005383s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,451 - sqlalchemy.engine.Engine - INFO - [cached since 0.005383s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine [cached since 0.00574s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.00574s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine [cached since 0.006138s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.006138s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,452 INFO sqlalchemy.engine.Engine [cached since 0.00657s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,452 - sqlalchemy.engine.Engine - INFO - [cached since 0.00657s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine [cached since 0.006916s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.006916s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine [cached since 0.007246s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.007246s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,453 INFO sqlalchemy.engine.Engine [cached since 0.007575s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,453 - sqlalchemy.engine.Engine - INFO - [cached since 0.007575s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,454 INFO sqlalchemy.engine.Engine [cached since 0.007899s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.007899s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,454 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,454 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:06,454 INFO sqlalchemy.engine.Engine [cached since 0.008227s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,454 - sqlalchemy.engine.Engine - INFO - [cached since 0.008227s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:06,454 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:20:06,454 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:20:06,455 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:20:06,455 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:20:06,456 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:20:06,456 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:20:06,456 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:20:06,456 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:20:06,456 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:20:07,458 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:07,458 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:07,459 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:20:07,459 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:20:07,459 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ()
2025-08-08 18:20:07,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ()
2025-08-08 18:20:07,459 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:20:07,459 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:20:07,459 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:20:07,459 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:20:07,460 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:20:07,460 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:20:07,460 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:20:07,460 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:20:07,462 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:20:07,462 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:49404 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:20:07,485 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:20:07,519 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:07,519 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:07,519 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:20:07,519 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:20:07,520 INFO sqlalchemy.engine.Engine [cached since 0.06096s ago] ()
2025-08-08 18:20:07,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.06096s ago] ()
2025-08-08 18:20:07,520 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:20:07,520 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:49404 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'test_production.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:20:31,418 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:20:31,418 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:20:31,418 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473340]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:20:34,470 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473400]
INFO:     Waiting for application startup.
2025-08-08 18:20:34,493 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:20:34,495 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:20:34,513 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:20:34,513 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:20:34,513 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:34,513 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:34,514 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:20:34,514 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:20:34,514 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:34,514 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:34,515 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:20:34,515 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:20:34,515 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:20:34,515 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:20:34,515 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:34,515 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:34,518 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,518 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,518 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,518 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,519 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,519 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,519 INFO sqlalchemy.engine.Engine [cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,519 - sqlalchemy.engine.Engine - INFO - [cached since 0.001846s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,520 INFO sqlalchemy.engine.Engine [cached since 0.002322s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.002322s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,520 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,520 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,520 INFO sqlalchemy.engine.Engine [cached since 0.002777s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,520 - sqlalchemy.engine.Engine - INFO - [cached since 0.002777s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,521 INFO sqlalchemy.engine.Engine [cached since 0.003209s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,521 - sqlalchemy.engine.Engine - INFO - [cached since 0.003209s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,521 INFO sqlalchemy.engine.Engine [cached since 0.003649s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,521 - sqlalchemy.engine.Engine - INFO - [cached since 0.003649s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,521 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,521 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,522 INFO sqlalchemy.engine.Engine [cached since 0.004102s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.004102s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,522 INFO sqlalchemy.engine.Engine [cached since 0.004467s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.004467s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,522 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,522 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,522 INFO sqlalchemy.engine.Engine [cached since 0.004832s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,522 - sqlalchemy.engine.Engine - INFO - [cached since 0.004832s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine [cached since 0.005212s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.005212s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine [cached since 0.005573s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.005573s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,523 INFO sqlalchemy.engine.Engine [cached since 0.005924s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,523 - sqlalchemy.engine.Engine - INFO - [cached since 0.005924s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine [cached since 0.006269s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.006269s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine [cached since 0.006631s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.006631s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,524 INFO sqlalchemy.engine.Engine [cached since 0.006982s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,524 - sqlalchemy.engine.Engine - INFO - [cached since 0.006982s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,525 INFO sqlalchemy.engine.Engine [cached since 0.007328s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.007328s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,525 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,525 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:20:34,525 INFO sqlalchemy.engine.Engine [cached since 0.007688s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,525 - sqlalchemy.engine.Engine - INFO - [cached since 0.007688s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:20:34,525 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:20:34,525 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:20:34,526 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:20:34,526 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:20:34,527 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:20:34,527 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:20:34,527 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:20:34,527 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:20:34,527 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:20:35,529 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:35,529 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:35,530 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:20:35,530 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:20:35,530 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-08-08 18:20:35,530 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2025-08-08 18:20:35,530 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:20:35,530 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:20:35,530 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:20:35,530 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:20:35,531 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:20:35,531 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:20:35,531 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:20:35,531 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:20:35,533 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:20:35,533 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:53306 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:20:35,557 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:20:35,588 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:20:35,588 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:20:35,589 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:20:35,589 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:20:35,589 INFO sqlalchemy.engine.Engine [cached since 0.05903s ago] ()
2025-08-08 18:20:35,589 - sqlalchemy.engine.Engine - INFO - [cached since 0.05903s ago] ()
2025-08-08 18:20:35,589 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:20:35,589 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:53306 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'validate_production.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:21:15,512 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:21:15,512 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:21:15,512 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473400]
WARNING:  WatchFiles detected changes in 'validate_production.py'. Reloading...
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:21:18,836 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473473]
INFO:     Waiting for application startup.
2025-08-08 18:21:18,859 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:21:18,861 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:21:18,879 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:21:18,879 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:21:18,880 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:18,880 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:18,880 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:21:18,880 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:21:18,881 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:18,881 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:18,881 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:21:18,881 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:21:18,881 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:18,881 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:18,882 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:18,882 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:18,884 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,884 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,884 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,884 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,886 INFO sqlalchemy.engine.Engine [cached since 0.001993s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,886 - sqlalchemy.engine.Engine - INFO - [cached since 0.001993s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,886 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,886 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,887 INFO sqlalchemy.engine.Engine [cached since 0.00255s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.00255s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,887 INFO sqlalchemy.engine.Engine [cached since 0.003031s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.003031s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,887 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,887 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,887 INFO sqlalchemy.engine.Engine [cached since 0.003452s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,887 - sqlalchemy.engine.Engine - INFO - [cached since 0.003452s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,888 INFO sqlalchemy.engine.Engine [cached since 0.00386s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.00386s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,888 INFO sqlalchemy.engine.Engine [cached since 0.004277s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,888 - sqlalchemy.engine.Engine - INFO - [cached since 0.004277s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,888 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,888 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,889 INFO sqlalchemy.engine.Engine [cached since 0.004617s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.004617s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,889 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,889 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,889 INFO sqlalchemy.engine.Engine [cached since 0.004953s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.004953s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,889 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,889 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,889 INFO sqlalchemy.engine.Engine [cached since 0.005302s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,889 - sqlalchemy.engine.Engine - INFO - [cached since 0.005302s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine [cached since 0.005626s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.005626s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine [cached since 0.005954s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.005954s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,890 INFO sqlalchemy.engine.Engine [cached since 0.006284s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,890 - sqlalchemy.engine.Engine - INFO - [cached since 0.006284s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine [cached since 0.006625s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.006625s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine [cached since 0.00697s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.00697s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,891 INFO sqlalchemy.engine.Engine [cached since 0.007309s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,891 - sqlalchemy.engine.Engine - INFO - [cached since 0.007309s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,892 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,892 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:18,892 INFO sqlalchemy.engine.Engine [cached since 0.007628s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,892 - sqlalchemy.engine.Engine - INFO - [cached since 0.007628s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:18,892 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:21:18,892 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:21:18,892 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:21:18,893 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:21:18,893 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:21:18,893 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:21:18,893 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:21:18,893 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:21:18,893 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:21:22,904 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473490]
INFO:     Waiting for application startup.
2025-08-08 18:21:22,927 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:21:22,928 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:21:22,946 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:21:22,946 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:21:22,946 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:22,946 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:22,947 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:21:22,947 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:21:22,947 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:22,947 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:22,947 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:21:22,947 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:21:22,947 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:22,947 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:22,948 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:22,948 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:22,950 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,950 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,950 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,950 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,952 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,952 INFO sqlalchemy.engine.Engine [cached since 0.001743s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,952 - sqlalchemy.engine.Engine - INFO - [cached since 0.001743s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,952 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,952 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,952 INFO sqlalchemy.engine.Engine [cached since 0.002204s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,952 - sqlalchemy.engine.Engine - INFO - [cached since 0.002204s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine [cached since 0.00262s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - [cached since 0.00262s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine [cached since 0.003029s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - [cached since 0.003029s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,953 INFO sqlalchemy.engine.Engine [cached since 0.003428s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,953 - sqlalchemy.engine.Engine - INFO - [cached since 0.003428s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,954 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,954 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,954 INFO sqlalchemy.engine.Engine [cached since 0.003843s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,954 - sqlalchemy.engine.Engine - INFO - [cached since 0.003843s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,954 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,954 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,954 INFO sqlalchemy.engine.Engine [cached since 0.004234s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,954 - sqlalchemy.engine.Engine - INFO - [cached since 0.004234s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine [cached since 0.00461s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - [cached since 0.00461s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine [cached since 0.004988s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - [cached since 0.004988s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,955 INFO sqlalchemy.engine.Engine [cached since 0.00535s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,955 - sqlalchemy.engine.Engine - INFO - [cached since 0.00535s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine [cached since 0.005708s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - [cached since 0.005708s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine [cached since 0.006073s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - [cached since 0.006073s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,956 INFO sqlalchemy.engine.Engine [cached since 0.006424s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,956 - sqlalchemy.engine.Engine - INFO - [cached since 0.006424s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine [cached since 0.00678s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - [cached since 0.00678s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine [cached since 0.007137s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - [cached since 0.007137s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:22,957 INFO sqlalchemy.engine.Engine [cached since 0.007483s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,957 - sqlalchemy.engine.Engine - INFO - [cached since 0.007483s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:22,958 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:21:22,958 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:21:22,958 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:21:22,959 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:21:22,959 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:21:22,959 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:21:22,959 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:21:22,959 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:21:22,959 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:21:23,961 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:23,961 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:23,962 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:21:23,962 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:21:23,962 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
2025-08-08 18:21:23,962 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
2025-08-08 18:21:23,962 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:21:23,962 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:21:23,962 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:21:23,962 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:21:23,963 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:21:23,963 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:21:23,964 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:21:23,964 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:21:23,965 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:21:23,965 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:44702 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:21:23,989 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:21:24,022 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:24,022 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:24,022 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:21:24,022 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:21:24,022 INFO sqlalchemy.engine.Engine [cached since 0.06061s ago] ()
2025-08-08 18:21:24,022 - sqlalchemy.engine.Engine - INFO - [cached since 0.06061s ago] ()
2025-08-08 18:21:24,023 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:21:24,023 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:44702 - "GET /metrics HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/services/automated_alerts.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:21:37,588 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:21:37,588 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:21:37,588 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473490]
INFO:app.services.booking_workflow:🧹 Sistema de limpeza automática de bookings iniciado
INFO:app.routes.webhook:✅ Webhook WhatsApp carregado com sanitização robusta ativada
INFO:app.routes.webhook:🛡️ Proteções ativas: SQL Injection, XSS, Spam, Phishing, Malware
INFO:app.routes.webhook:🧹 Sanitização aplicada em: Payload, Números, Conteúdo, Contatos, Mídia
2025-08-08 18:21:40,692 - whatsapp_agent - INFO - Production logging system initialized
INFO:     Started server process [473547]
INFO:     Waiting for application startup.
2025-08-08 18:21:40,715 - whatsapp_agent - INFO - Iniciando WhatsApp Agent API com sistemas de produção...
2025-08-08 18:21:40,716 - app.services.state_manager - INFO - Redis conectado com sucesso
2025-08-08 18:21:40,735 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-08-08 18:21:40,735 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-08-08 18:21:40,735 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:40,735 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:40,736 INFO sqlalchemy.engine.Engine select current_schema()
2025-08-08 18:21:40,736 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-08-08 18:21:40,736 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:40,736 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:40,737 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-08-08 18:21:40,737 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-08-08 18:21:40,737 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-08-08 18:21:40,737 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-08-08 18:21:40,738 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:40,738 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:40,740 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,740 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,740 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,740 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('admin_users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,742 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,742 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,742 INFO sqlalchemy.engine.Engine [cached since 0.002214s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,742 - sqlalchemy.engine.Engine - INFO - [cached since 0.002214s ago] ('login_sessions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,742 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,742 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,742 INFO sqlalchemy.engine.Engine [cached since 0.002689s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,742 - sqlalchemy.engine.Engine - INFO - [cached since 0.002689s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,743 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,743 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,743 INFO sqlalchemy.engine.Engine [cached since 0.003111s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,743 - sqlalchemy.engine.Engine - INFO - [cached since 0.003111s ago] ('conversations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,743 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,743 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,743 INFO sqlalchemy.engine.Engine [cached since 0.003542s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,743 - sqlalchemy.engine.Engine - INFO - [cached since 0.003542s ago] ('messages', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine [cached since 0.003944s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - [cached since 0.003944s ago] ('businesses', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine [cached since 0.004393s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - [cached since 0.004393s ago] ('services', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,744 INFO sqlalchemy.engine.Engine [cached since 0.004812s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,744 - sqlalchemy.engine.Engine - INFO - [cached since 0.004812s ago] ('appointments', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,745 INFO sqlalchemy.engine.Engine [cached since 0.005151s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,745 - sqlalchemy.engine.Engine - INFO - [cached since 0.005151s ago] ('blocked_times', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,745 INFO sqlalchemy.engine.Engine [cached since 0.005507s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,745 - sqlalchemy.engine.Engine - INFO - [cached since 0.005507s ago] ('meta_logs', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,745 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,745 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,746 INFO sqlalchemy.engine.Engine [cached since 0.005879s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.005879s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,746 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,746 INFO sqlalchemy.engine.Engine [cached since 0.00625s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.00625s ago] ('company_info', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,746 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,746 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,746 INFO sqlalchemy.engine.Engine [cached since 0.006592s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,746 - sqlalchemy.engine.Engine - INFO - [cached since 0.006592s ago] ('message_templates', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine [cached since 0.006916s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.006916s ago] ('bot_configurations', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine [cached since 0.007244s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.007244s ago] ('available_slots', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine [cached since 0.007575s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.007575s ago] ('customer_data_collection', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,747 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-08-08 18:21:40,748 INFO sqlalchemy.engine.Engine [cached since 0.007897s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,748 - sqlalchemy.engine.Engine - INFO - [cached since 0.007897s ago] ('conversation_contexts', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-08-08 18:21:40,748 INFO sqlalchemy.engine.Engine COMMIT
2025-08-08 18:21:40,748 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-08-08 18:21:40,748 - whatsapp_agent - INFO - Banco de dados inicializado
2025-08-08 18:21:40,749 - app.services.cache_service - INFO - ✅ Conexão com Redis estabelecida
2025-08-08 18:21:40,749 - whatsapp_agent - INFO - Cache service inicializado
2025-08-08 18:21:40,749 - whatsapp_agent - INFO - Sistema de monitoramento de performance iniciado
2025-08-08 18:21:40,749 - whatsapp_agent - INFO - Agendador de backups iniciado
2025-08-08 18:21:40,749 - whatsapp_agent - INFO - ✅ WhatsApp Agent API iniciado com sucesso!
2025-08-08 18:21:40,750 - whatsapp_agent - INFO - 📱 Webhook URL: https://testewebhook.ngrok.io/webhook
INFO:     Application startup complete.
2025-08-08 18:21:41,752 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:41,752 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:41,752 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:21:41,752 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:21:41,752 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
2025-08-08 18:21:41,752 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
2025-08-08 18:21:41,753 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:21:41,753 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:21:41,753 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 18:21:41,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 18:21:41,753 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:21:41,753 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:21:41,754 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
2025-08-08 18:21:41,754 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
2025-08-08 18:21:41,755 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:21:41,755 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:40374 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:21:41,779 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:21:41,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:21:41,811 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:21:41,811 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:21:41,811 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:21:41,811 INFO sqlalchemy.engine.Engine [cached since 0.05954s ago] ()
2025-08-08 18:21:41,811 - sqlalchemy.engine.Engine - INFO - [cached since 0.05954s ago] ()
2025-08-08 18:21:41,812 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:21:41,812 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:40374 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:22:44,617 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:22:44,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:22:44,617 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:22:44,617 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:22:44,617 INFO sqlalchemy.engine.Engine [cached since 62.87s ago] ()
2025-08-08 18:22:44,617 - sqlalchemy.engine.Engine - INFO - [cached since 62.87s ago] ()
2025-08-08 18:22:44,618 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:22:44,618 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:22:44,618 INFO sqlalchemy.engine.Engine [cached since 62.87s ago] ()
2025-08-08 18:22:44,618 - sqlalchemy.engine.Engine - INFO - [cached since 62.87s ago] ()
2025-08-08 18:22:44,618 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:22:44,618 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:22:44,618 INFO sqlalchemy.engine.Engine [cached since 62.86s ago] ()
2025-08-08 18:22:44,618 - sqlalchemy.engine.Engine - INFO - [cached since 62.86s ago] ()
2025-08-08 18:22:44,619 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:22:44,619 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:33306 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:22:44,639 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:22:44,678 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:22:44,678 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:22:44,678 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:22:44,678 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:22:44,678 INFO sqlalchemy.engine.Engine [cached since 62.93s ago] ()
2025-08-08 18:22:44,678 - sqlalchemy.engine.Engine - INFO - [cached since 62.93s ago] ()
2025-08-08 18:22:44,679 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:22:44,679 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:33306 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:23:47,106 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:23:47,106 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:23:47,106 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:23:47,106 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:23:47,106 INFO sqlalchemy.engine.Engine [cached since 125.4s ago] ()
2025-08-08 18:23:47,106 - sqlalchemy.engine.Engine - INFO - [cached since 125.4s ago] ()
2025-08-08 18:23:47,107 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:23:47,107 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:23:47,107 INFO sqlalchemy.engine.Engine [cached since 125.4s ago] ()
2025-08-08 18:23:47,107 - sqlalchemy.engine.Engine - INFO - [cached since 125.4s ago] ()
2025-08-08 18:23:47,107 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:23:47,107 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:23:47,107 INFO sqlalchemy.engine.Engine [cached since 125.4s ago] ()
2025-08-08 18:23:47,107 - sqlalchemy.engine.Engine - INFO - [cached since 125.4s ago] ()
2025-08-08 18:23:47,108 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:23:47,108 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:48794 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:23:47,125 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:23:47,154 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:23:47,154 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:23:47,154 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:23:47,154 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:23:47,154 INFO sqlalchemy.engine.Engine [cached since 125.4s ago] ()
2025-08-08 18:23:47,154 - sqlalchemy.engine.Engine - INFO - [cached since 125.4s ago] ()
2025-08-08 18:23:47,155 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:23:47,155 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:48794 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:24:49,938 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:24:49,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:24:49,938 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:24:49,938 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:24:49,938 INFO sqlalchemy.engine.Engine [cached since 188.2s ago] ()
2025-08-08 18:24:49,938 - sqlalchemy.engine.Engine - INFO - [cached since 188.2s ago] ()
2025-08-08 18:24:49,939 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:24:49,939 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:24:49,939 INFO sqlalchemy.engine.Engine [cached since 188.2s ago] ()
2025-08-08 18:24:49,939 - sqlalchemy.engine.Engine - INFO - [cached since 188.2s ago] ()
2025-08-08 18:24:49,939 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:24:49,939 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:24:49,939 INFO sqlalchemy.engine.Engine [cached since 188.2s ago] ()
2025-08-08 18:24:49,939 - sqlalchemy.engine.Engine - INFO - [cached since 188.2s ago] ()
2025-08-08 18:24:49,939 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:24:49,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:53254 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:24:49,958 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:24:49,989 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:24:49,989 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:24:49,990 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:24:49,990 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:24:49,990 INFO sqlalchemy.engine.Engine [cached since 188.2s ago] ()
2025-08-08 18:24:49,990 - sqlalchemy.engine.Engine - INFO - [cached since 188.2s ago] ()
2025-08-08 18:24:49,990 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:24:49,990 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:53254 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:25:52,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:25:52,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:25:52,744 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:25:52,744 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:25:52,744 INFO sqlalchemy.engine.Engine [cached since 251s ago] ()
2025-08-08 18:25:52,744 - sqlalchemy.engine.Engine - INFO - [cached since 251s ago] ()
2025-08-08 18:25:52,744 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:25:52,744 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:25:52,744 INFO sqlalchemy.engine.Engine [cached since 251s ago] ()
2025-08-08 18:25:52,744 - sqlalchemy.engine.Engine - INFO - [cached since 251s ago] ()
2025-08-08 18:25:52,745 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:25:52,745 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:25:52,745 INFO sqlalchemy.engine.Engine [cached since 251s ago] ()
2025-08-08 18:25:52,745 - sqlalchemy.engine.Engine - INFO - [cached since 251s ago] ()
2025-08-08 18:25:52,745 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:25:52,745 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:45842 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:25:52,763 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:25:52,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:25:52,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:25:52,805 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:25:52,805 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:25:52,805 INFO sqlalchemy.engine.Engine [cached since 251.1s ago] ()
2025-08-08 18:25:52,805 - sqlalchemy.engine.Engine - INFO - [cached since 251.1s ago] ()
2025-08-08 18:25:52,806 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:25:52,806 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:45842 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:26:55,433 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:26:55,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:26:55,433 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:26:55,433 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:26:55,433 INFO sqlalchemy.engine.Engine [cached since 313.7s ago] ()
2025-08-08 18:26:55,433 - sqlalchemy.engine.Engine - INFO - [cached since 313.7s ago] ()
2025-08-08 18:26:55,434 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:26:55,434 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:26:55,434 INFO sqlalchemy.engine.Engine [cached since 313.7s ago] ()
2025-08-08 18:26:55,434 - sqlalchemy.engine.Engine - INFO - [cached since 313.7s ago] ()
2025-08-08 18:26:55,434 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:26:55,434 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:26:55,434 INFO sqlalchemy.engine.Engine [cached since 313.7s ago] ()
2025-08-08 18:26:55,434 - sqlalchemy.engine.Engine - INFO - [cached since 313.7s ago] ()
2025-08-08 18:26:55,434 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:26:55,434 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:45294 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:26:55,452 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:26:55,481 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:26:55,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:26:55,481 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:26:55,481 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:26:55,481 INFO sqlalchemy.engine.Engine [cached since 313.7s ago] ()
2025-08-08 18:26:55,481 - sqlalchemy.engine.Engine - INFO - [cached since 313.7s ago] ()
2025-08-08 18:26:55,482 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:26:55,482 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:45294 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:27:58,030 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:27:58,030 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:27:58,030 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:27:58,030 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:27:58,030 INFO sqlalchemy.engine.Engine [cached since 376.3s ago] ()
2025-08-08 18:27:58,030 - sqlalchemy.engine.Engine - INFO - [cached since 376.3s ago] ()
2025-08-08 18:27:58,031 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:27:58,031 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:27:58,031 INFO sqlalchemy.engine.Engine [cached since 376.3s ago] ()
2025-08-08 18:27:58,031 - sqlalchemy.engine.Engine - INFO - [cached since 376.3s ago] ()
2025-08-08 18:27:58,031 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:27:58,031 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:27:58,031 INFO sqlalchemy.engine.Engine [cached since 376.3s ago] ()
2025-08-08 18:27:58,031 - sqlalchemy.engine.Engine - INFO - [cached since 376.3s ago] ()
2025-08-08 18:27:58,032 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:27:58,032 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:43998 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:27:58,050 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:27:58,082 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:27:58,082 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:27:58,082 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:27:58,082 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:27:58,083 INFO sqlalchemy.engine.Engine [cached since 376.3s ago] ()
2025-08-08 18:27:58,083 - sqlalchemy.engine.Engine - INFO - [cached since 376.3s ago] ()
2025-08-08 18:27:58,083 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:27:58,083 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:43998 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:29:00,790 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:29:00,790 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:29:00,790 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:29:00,790 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:29:00,790 INFO sqlalchemy.engine.Engine [cached since 439s ago] ()
2025-08-08 18:29:00,790 - sqlalchemy.engine.Engine - INFO - [cached since 439s ago] ()
2025-08-08 18:29:00,791 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:29:00,791 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:29:00,791 INFO sqlalchemy.engine.Engine [cached since 439s ago] ()
2025-08-08 18:29:00,791 - sqlalchemy.engine.Engine - INFO - [cached since 439s ago] ()
2025-08-08 18:29:00,791 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:29:00,791 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:29:00,792 INFO sqlalchemy.engine.Engine [cached since 439s ago] ()
2025-08-08 18:29:00,792 - sqlalchemy.engine.Engine - INFO - [cached since 439s ago] ()
2025-08-08 18:29:00,792 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:29:00,792 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:57092 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:29:00,812 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:29:00,845 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:29:00,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:29:00,845 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:29:00,845 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:29:00,845 INFO sqlalchemy.engine.Engine [cached since 439.1s ago] ()
2025-08-08 18:29:00,845 - sqlalchemy.engine.Engine - INFO - [cached since 439.1s ago] ()
2025-08-08 18:29:00,846 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:29:00,846 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:57092 - "GET /metrics HTTP/1.1" 200 OK
2025-08-08 18:30:03,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:30:03,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:30:03,734 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:30:03,734 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:30:03,734 INFO sqlalchemy.engine.Engine [cached since 502s ago] ()
2025-08-08 18:30:03,734 - sqlalchemy.engine.Engine - INFO - [cached since 502s ago] ()
2025-08-08 18:30:03,735 INFO sqlalchemy.engine.Engine 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:30:03,735 - sqlalchemy.engine.Engine - INFO - 
                    SELECT 
                        COUNT(*) as total_users,
                        COUNT(CASE WHEN created_at > NOW() - INTERVAL '24 hours' THEN 1 END) as recent_users
                    FROM users
                
2025-08-08 18:30:03,735 INFO sqlalchemy.engine.Engine [cached since 502s ago] ()
2025-08-08 18:30:03,735 - sqlalchemy.engine.Engine - INFO - [cached since 502s ago] ()
2025-08-08 18:30:03,736 INFO sqlalchemy.engine.Engine 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:30:03,736 - sqlalchemy.engine.Engine - INFO - 
                    SELECT COUNT(*) as active_connections
                    FROM pg_stat_activity 
                    WHERE state = 'active'
                
2025-08-08 18:30:03,736 INFO sqlalchemy.engine.Engine [cached since 502s ago] ()
2025-08-08 18:30:03,736 - sqlalchemy.engine.Engine - INFO - [cached since 502s ago] ()
2025-08-08 18:30:03,736 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:30:03,736 - sqlalchemy.engine.Engine - INFO - ROLLBACK
--- Logging error ---
Traceback (most recent call last):
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 227, in check_database_performance
    active_connections = result.fetchone()[0] if result.fetchone() else 0
                         ~~~~~~~~~~~~~~~~~^^^
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 79, in emit
    if self.shouldRollover(record):
       ~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/handlers.py", line 203, in shouldRollover
    msg = "%s\n" % self.format(record)
                   ~~~~~~~~~~~^^^^^^^^
  File "/home/vancim/anaconda3/lib/python3.13/logging/__init__.py", line 999, in format
    return fmt.format(record)
           ~~~~~~~~~~^^^^^^^^
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 70, in format
    'type': record.exc_info[0].__name__,
            ~~~~~~~~~~~~~~~^^^
TypeError: 'bool' object is not subscriptable
Call stack:
  File "<string>", line 1, in <module>
    from multiprocessing.spawn import spawn_main; spawn_main(tracker_fd=5, pipe_handle=10)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
  File "/home/vancim/anaconda3/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/home/vancim/anaconda3/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/home/vancim/anaconda3/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 556, in _monitoring_loop
    metrics = await self.monitor.collect_all_metrics()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 381, in collect_all_metrics
    db_metrics = await self.check_database_performance()
  File "/home/vancim/whats_agent/app/services/performance_monitor.py", line 241, in check_database_performance
    performance_logger.error(f"Error checking database performance: {e}", exc_info=True)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 127, in error
    self._log_with_context(logging.ERROR, message, extra_data, exc_info=exc_info)
  File "/home/vancim/whats_agent/app/services/production_logger.py", line 111, in _log_with_context
    self.logger.handle(record)
Message: "Error checking database performance: 'NoneType' object is not subscriptable"
Arguments: ()
INFO:     127.0.0.1:39010 - "GET /health HTTP/1.1" 200 OK
2025-08-08 18:30:03,757 - app.services.health_checker - INFO - Executando health checks...
2025-08-08 18:30:03,803 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-08 18:30:03,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-08-08 18:30:03,803 INFO sqlalchemy.engine.Engine SELECT 1
2025-08-08 18:30:03,803 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-08-08 18:30:03,804 INFO sqlalchemy.engine.Engine [cached since 502.1s ago] ()
2025-08-08 18:30:03,804 - sqlalchemy.engine.Engine - INFO - [cached since 502.1s ago] ()
2025-08-08 18:30:03,804 INFO sqlalchemy.engine.Engine ROLLBACK
2025-08-08 18:30:03,804 - sqlalchemy.engine.Engine - INFO - ROLLBACK
INFO:     127.0.0.1:39010 - "GET /metrics HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-08-08 18:30:36,393 - whatsapp_agent - INFO - Finalizando WhatsApp Agent API...
2025-08-08 18:30:36,394 - app.services.cache_service - INFO - Conexão com Redis fechada
2025-08-08 18:30:36,394 - whatsapp_agent - INFO - ✅ WhatsApp Agent API finalizado com sucesso!
INFO:     Application shutdown complete.
INFO:     Finished server process [473547]
